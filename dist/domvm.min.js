/*
 https://github.com/leeoniya/domvm
*/
("undefined"!==typeof global?global:this).domvm={};(function(w){var x="undefined"==typeof window?{}:window,t={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,zoom:!0},b={TYPE_ELEM:1,TYPE_TEXT:2,isArr:function(c){return c instanceof
Array},isVal:function(c){c=typeof c;return"string"===c||"number"===c},isObj:function(c){return"object"===typeof c&&null!==c&&!b.isArr(c)},isFunc:function(c){return"function"===typeof c},isProm:function(c){return"object"===typeof c&&b.isFunc(c.then)},execAll:function(c,y){c&&(b.isArr(c)?c:[c]).forEach(function(c){return c.apply(null,y)})},insertArr:function(c,b,g,n){c.splice.apply(c,[g,n].concat(b))},isEvProp:function(c){return"on"===c.substr(0,2)},isDynProp:function(c,b){switch(c){case "input":case "textarea":case "select":case "option":switch(b){case "value":case "checked":case "selected":case "selectedIndex":return!0}}},
camelDash:function(c){return c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},autoPx:function(c,b){return isNaN(b)||t[c]?b:b+"px"},indexOfKey:function(c,b,g,n){for(g=0;g<b.length;g++)if(b[g].key===c)return g;return-1},raft:function(c){function b(){g=0;c.apply(n,z)}if(!x.requestAnimationFrame)return c;var g,n,z;return function(){n=this;z=arguments;g||(g=x.requestAnimationFrame(b))}}};w.util=b})(domvm);(function(w){function x(a,d){return!1===d?null:null==d&&null!=a?a:f.isVal(d)||f.isObj(d)||f.isArr(d)||f.isFunc(d)?d:null}function t(a,d,r,B,e,D){function k(a,d,e){if(e)a[d]=a[d]||[],a[d].push(e);else for(var r in d)a[r]=a[r]||[],a[r].push(d[r])}function h(a,d,r){e=a;D=d;p.update(r,!1);return C(0,!1)}function C(a,B){if(a){for(var h=p;a--&&h.parent;)h=h.parent;h.redraw(0,!0);return h.vm}var b=p.node;b&&p.hooks&&f.execAll(p.hooks.willRedraw,[p]);p.refs={};var k=p.render.call(p.api,p,d,r),k=g(k,e,D,p);
k.vm=p;p.node=k;var C=f.isVal(r)&&"^"===r[0]?r.substr(1):f.isVal(k.ref)&&"^"===k.ref[0]?k.ref.substr(1):null;k.key=null!=r?r:k.key;for(var m=e;m;)m.vm&&(p.parent||(p.parent=m.vm),null!==C&&(m.vm.refs[C]=k)),m=m.parent;!(C=b)||k.type===b.type&&k.tag===b.tag||(C=null,h=!0);n(k,C);e&&(e.body[D]=k);!1!==B&&(b&&c(b),!b&&u||z(k,null,k.el),h&&(b.el.parentNode.replaceChild(k.el,b.el),b.el=null));Promise.resolve().then(function(){b&&p.hooks&&f.execAll(p.hooks.didRedraw,[p])});return p}function m(a){p.hooks&&
f.execAll(p.hooks.willUnmount);if(e)if(a){for(a=D+1;a<e.body.length;a++){var d=e.body[a];d.idx=a-1;d.vm&&d.vm.updIdx(d.idx)}e.body.splice(D,1)}else e.body[D]=null;c(p.node,!0);p.node.vm=null;p.hooks&&f.execAll(p.hooks.didUnmount)}var u=!e;f.isArr(a)&&(d=a[1],r=a[2],B=a[3],a=a[0]);r=x(d,r);var p={api:{},node:null,view:[a,r],model:d,opts:B||{},render:null,update:function(a,e){null==a||r===d&&!f.isVal(r)||(d=p.model=a);return!1!==e?C(0):p},on:function(a,d){k(p.events,a,d)},hook:function(a,d){p.hooks=
p.hooks||{};k(p.hooks,a,d)},events:{},hooks:null,redraw:J.useRaf?f.raft(C):C,patch:function(a,d){var e=a.parent,r=n(g(d,e,a.idx,p),a);e.body[a.idx]=r},emit:function(a){for(var d=Array.prototype.slice.call(arguments,1),e=p;e;){if(e.events[a]){f.execAll(e.events[a],d);break}e=e.parent}},refs:{},parent:null,mount:function(a,d){var e=null;d&&(a.textContent="",e=a,a=null);z(p.node,e,null,a);return p},attach:function(a){b(p.node,a);return p},unmount:function(){A(p.hooks,"Unmount",m,[],[p])},moveTo:h,updIdx:function(a){D=
a}};B&&B.hooks&&p.hook(B.hooks);f.execAll(G,[p]);p.render=a.call(p.api,p,d,r);return e?h(e,D):C(0)}function b(a,d){a.el=d;d._node=a;for(var r in a.props){var B=a.props[r],e=f.isEvProp(r)?r:"."===r[0]?r.substr(1):null;null!==e&&(d[e]=B)}if(f.isArr(a.body))for(r=0;r<a.body.length;r++)b(a.body[r],d.childNodes[r])}function c(a,d){f.isArr(a.body)&&(a.body.forEach(function(a,d){a&&(a.vm&&!a.moved?a.vm.unmount():c(a,!0))}),a.body=null);a.vm=null;d&&a.el&&a.el.parentNode&&(a.removed=!0,A(a.hooks,"Remove",
y,[a]))}function y(a){a.el.parentNode.removeChild(a.el);a.el=null}function g(a,d,r,B){var e=a;a={type:null,key:null,ref:null,idx:null,parent:null,moved:!1,removed:!1,hooks:null,tag:null,ns:null,guard:!1,raw:!1,props:null,el:null,hasKeys:!1,body:null};f.isFunc(e)&&(e=e());if(f.isArr(e)&&e.length){a.type=f.TYPE_ELEM;if(1<e.length){var c=1;f.isObj(e[1])&&(a.props=e[1],c=2);a.body=e.length==c+1?f.isVal(e[c])?e[c]:f.isFunc(e[c])?e[c]():e.slice(c):e.slice(c)}e=e[0];if(/[.#]/.test(e)){if(e=H(e),a.tag=e.tag,
c=null!=e["class"],null!=e.id||c){var k=a.props||{};null==k.id&&(k.id=e.id);c&&(k["class"]=e["class"]+(null!=k["class"]?" "+k["class"]:""));a.props=k}}else a.tag=e;if(a.props){var e=a.props,h;for(h in e)f.isEvProp(h)?e[h]=m(e[h],B.opts.evctx||B.model||null,a,B):f.isFunc(e[h])&&("href"==h?(e.onclick=e[h],e.href=e[h].href):e[h]=e[h]()),f.isDynProp(a.tag,h)&&(e["."+h]=e[h]);if(f.isObj(e.style))for(var b in e.style)h=e.style[b],f.isFunc(h)&&(e.style[b]=h());f.isObj(e._hooks)&&(a.hooks=e._hooks,e._hooks=
null);a.key=f.isVal(e._key)?e._key:f.isVal(e._ref)?e._ref:f.isVal(e.id)?e.id:f.isVal(e.name)?e.name:null;e._ref&&(a.ref=e._ref);e._raw&&(a.raw=!0);e._data&&(a.data=e._data);e._guard&&(a.guard=!0);e._ref=e._key=e._raw=e._data=e._guard=null}}else f.isVal(e)&&(a.type=f.TYPE_TEXT,a.body=e);null!==a.ref&&(B.refs[a.ref]=a);a.parent=d;a.idx=r;a.ns=d&&d.ns?d.ns:"svg"===a.tag||"math"===a.tag?a.tag:null;if(f.isArr(a.body))for(d=0,r=a.body.length;d<r;d++){b=a.body[d];e=h=null;k=c=!1;f.isFunc(b)&&(b=b());if(null==
b)c=!0;else{var n=f.isArr(b),u=n?!1:f.isObj(b);if(n)b.length?f.isArr(b[0])?k=!0:f.isFunc(b[0])?h=x(b[1],b[2]):(e=g(b,a,d,B),h=e.key):c=!0;else if(u)if(f.isFunc(b.redraw))b.moveTo(a,d),e=b.node,h=b.view[1];else{a.body[d--]=""+b;continue}else""===b?c=!0:0<d&&a.body[d-1].type===f.TYPE_TEXT?(a.body[d-1].body+=""+b,c=!0):e=g(""+b,a,d,B)}c||k?(k?f.insertArr(a.body,b,d,1):a.body.splice(d,1),r=a.body.length,d--):(null!==h&&(a.hasKeys=!0),a.body[d]=e||b)}return a}function n(a,d){d&&A(a.hooks,"Recycle",q,[d,
a]);if(f.isArr(a.body)){var c=0;a.body.forEach(function(b,e){var m=f.isArr(b);if(d){var k=l(b,a,d,c);if(null!==k){var h=k[0],k=k[1];h===c&&c++;h=d.body[h];h.vm?m?2===k?h.vm.moveTo(a,e,b[1]):1===k&&t(b[0],b[1],b[2],b[3],a,e):b.vm&&2===k&&b.vm===h.vm&&h.vm.moveTo(a,e):a.body[e]=n(b,h);return}}m?t(b[0],b[1],b[2],b[3],a,e):a.body[e]=n(b)})}return a}function z(a,d,b,c){for(var e=!a.el;b&&b._node.removed;)b=b.nextSibling;e&&a.vm&&a.vm.hooks&&f.execAll(a.vm.hooks.willMount,[a.vm]);if(a.type==f.TYPE_ELEM)if(e&&
(a.el=d||(a.ns?K.createElementNS(E[a.ns],a.tag):K.createElement(a.tag)),a.props&&u(a)),f.isArr(a.body)){d=0;for(var n=a.el.firstChild;d<a.body.length;d++)n=z(a.body[d],null,n)}else f.isVal(a.body)&&(a.raw?a.el.innerHTML=a.body:e&&(a.el.textContent=a.body));else a.type==f.TYPE_TEXT&&e&&(a.el=K.createTextNode(a.body));a.el._node=a;d=a.parent;b!==a.el&&(c||d&&d.el)&&A(a.hooks,e?"Insert":"Reinsert",v,[a,b,c]);e&&a.vm&&a.vm.hooks&&Promise.resolve().then(function(){f.execAll(a.vm.hooks.didMount,[a.vm])});
return b!==a.el?b:b.nextSibling}function v(a,d,b){(b||a.parent.el).insertBefore(a.el,d)}function l(a,d,b,c,e){var n=f.isArr(a),k=n?x(a[1],a[2]):a.key,h=b.hasKeys,m=d.hasKeys;b=b.body;d=d.body;if(null!==k&&h)return a=f.indexOfKey(k,b),-1<a?[a,2]:null;c=c||0;if(c>b.length-1)return null;e=0===e?0:e||b.length-1;for(k=null;c<=e;c++)if(h=b[c],null!==h&&h.el)if(n&&h.vm){if(h.vm.view[0]===a[0]){if(h.vm.view[1]===x(a[1],a[2]))return[c,2];var u=!1;if(J.viewScan)for(var z=0;z<d.length;z++){var p=d[z];if(!p.el&&
p.vm&&p.vm.view[0]===h.vm.view[0]&&p.vm.view[1]===h.vm.view[1]){u=!0;break}}u||k||!m||-1!=f.indexOfKey(h.key,d)||(k=[c,1])}}else if(a.type===h.type&&(a.type===f.TYPE_TEXT||null!==a.tag&&a.tag===h.tag)&&(null===h.key||!m||-1==f.indexOfKey(h.key,d)))return[c,1];return k}function q(a,d){d.el=a.el;a.el=null;if(d.type===f.TYPE_TEXT&&d.body!==a.body)d.el.nodeValue=d.body;else{u(d,a);var b=!f.isArr(d.body),c=!f.isArr(a.body);b&&d.body!==a.body?c&&d.el.firstChild?d.el.firstChild.nodeValue=d.body:d.raw?d.el.innerHTML=
d.body:d.el.textContent=d.body:c&&!b&&(d.el.textContent="");a.moved=!0}}function A(a,d,b,c,e,n){if(a){var k=a["will"+d];f.isArr(k)&&(k=k[0]);var h=a["did"+d];f.isArr(h)&&(h=h[0]);a=function(){b.apply(null,c);h&&h.apply(null,n||e||c)};k?(k=k.apply(null,e||c),f.isProm(k)?k.then(a):a()):a()}else b.apply(null,c)}function H(a){if(a in L)return L[a];var d={tag:null,id:null,"class":null};d.tag=a.replace(/^([\w\-]+)?(?:#([\w\-]+))?((?:\.[\w\-]+)+)?$/,function(a,b,e,c){e&&(d.id=e);c&&(d["class"]=c.replace(/\./g,
" ").trim());return b||"div"});return L[a]=d}function m(a,d,b,c){return function(e){var b,k=e.target._node,h=null;if(f.isFunc(a))b=a.call(d,e,k,c);else if(f.isArr(a))h=a.slice(1),b=a[0].apply(d,h.concat(e,k,c));else if(f.isObj(a))for(var n in a){var m=a[n];e.target.matches(n)&&(f.isArr(m)?(h=m.slice(1),b=m[0].apply(d,h.concat(e,k,c))):f.isFunc(m)&&(b=m.call(d,e,k,c)))}!1===b&&(e.preventDefault(),e.stopPropagation());c.opts.hasOwnProperty("watch")&&c.opts.watch.fire({type:"event",vm:c,node:k,event:e,
data:h})}}function u(a,d){var b=!d;d=d||{};if(d.props||a.props){var c=d.props||{},e=a.props||{},n=c.style,m=e.style;if(f.isObj(n)||f.isObj(m))F(a.el,a.tag,n||{},m||{},M,N,a.ns,b),c.style=e.style=null;F(a.el,a.tag,c,e,O,I,a.ns,b);m&&(e.style=m)}}function F(a,d,b,c,e,n,f,m){for(var u in c)null!==c[u]&&("."===u[0]?a[u.substr(1)]!==c[u]:c[u]!==b[u])&&e(a,u,c[u],f,m);for(u in b)null!==b[u]&&null==c[u]&&n(a,u,f,m)}function M(a,d,b){a.style[d]=f.autoPx(d,b)}function N(a,d){a.style[d]=""}function O(a,d,b,
c,e){"."===d[0]?(d=d.substr(1),"svg"===c?a[d].baseVal=b:a[d]=b):"class"===d?a.className=b:"id"===d||f.isEvProp(d)?a[d]=b:!1===b?I(a,d,c,e):a.setAttribute(d,!0===b?"":b)}function I(a,d,b,c){c||("."===d[0]?(d=d.substr(1),"svg"===b?a[d].baseVal=null:a[d]=null):"class"===d?a.className="":"id"===d||f.isEvProp(d)?a[d]=null:a.removeAttribute(d))}var E={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},L={},K="undefined"==typeof document?{}:document,J={useRaf:!0,viewScan:!1,useDOM:!1};
w.view=t;w.view.config=function(a){J=a};var G=null;w.view.extend=function(a,b){G=!G||b?[]:G;G.push(a)};var f=w.util;return w})(domvm);(function(w){var x=/^(?:img|br|input|col|link|meta|area|base|command|embed|hr|keygen|param|source|track|wbr)$/,t=w.util;w.html=function(b){var c="";switch(b.type){case t.TYPE_ELEM:c+="<"+b.tag;if(b.props){var y=t.isVal(b.props.style)?b.props.style:"",g=t.isObj(b.props.style)?b.props.style:null;if(g)for(var n in g)null!==g[n]&&(y+=t.camelDash(n)+": "+t.autoPx(n,g[n])+"; ");for(n in b.props)t.isEvProp(n)||"."===n[0]||(g=b.props[n],t.isFunc(g)&&(g=g()),t.isObj(g)||(!0===g?c+=" "+n:!1!==g&&null!==g&&
"."!==n[0]&&(c+=" "+n+'="'+g+'"')));y.length&&(c+=' style="'+y.trim()+'"')}if(b.ns&&"svg"!==b.tag&&"math"!==b.tag&&!b.body)return c+"/>";c+=">";break;case t.TYPE_TEXT:return b.body}x.test(b.tag)||(t.isArr(b.body)?b.body.forEach(function(b){c+=w.html(b)}):c+=b.body||"",c+="</"+b.tag+">");return c}})(domvm);(function(w){var x=w.util;w.watch=function(t){function b(){}function c(c,z,v,l,q){q=q||{};q.method=(q.method||c).toUpperCase();if(null!==v){var A=Object.prototype.toString.call(v);"[object Array]"===A||"[object Object]"===A?(q.headers=q.headers||new Headers,q.headers.set("Content-Type","application/json"),q.body=JSON.stringify(v)):q.body=""+v}var A=l,H=b;l instanceof Array&&(A=l[0],l[1]&&(H=l[1]));var m={type:"fetch",fetch:{method:c,url:z,body:v}};l=fetch(z,q).then(function(b){if(200<=b.status&&300>
b.status)return b;var c=Error(b.status+": "+b.statusText);c.data=b;return Promise.reject(c)}).then(function(b){switch(b.headers.get("Content-Type").split("; ")[0]){case "application/json":return b.json();case "text/plain":return b.text();default:return b}}).then(A,H).then(function(b){!1!==b&&g.fire(m);return b},function(b){m.error=b;g.fire(m);return b});l._fetchArgs=[c,z,v,[A,H],q];return l}var y=[];x.isFunc(t)&&y.push(t);var g={on:function(b){y.push(b);return g},off:function(b){y.splice(y.indexOf(b),
1);return g},fire:x.raft(function(){x.execAll(y,arguments);return g}),prop:function(n,z){var v=n,l=function(b,c){if(arguments.length&&b!==v){var m=v;v=b;!1!==c&&g.fire({type:"prop",prop:l,data:{old:m,"new":b}})}return v};if(z&&z.then){l.update=b;if(z._fetchArgs){var q=z._fetchArgs[3];z._fetchArgs[3]=[function(b){return l(q[0]?q[0](b):b)},q[1]];l.update=function(){c.apply(null,z._fetchArgs)}}z.then(l)}return l.toString=l},sync:function(b,c,g){var l=b,q=c;"string"==typeof b&&(l=function(c){return"e."===
b.substr(0,2)?c[b.substr(2)]:c.target[b]});return function(b,n){var m=this!==window?this:null;m&&"string"==typeof c&&(q=function(b,n){var g=m[c];m[c]=b;t&&b!==g&&!1!==n&&t()});q(l(n),g)}},get:function(b,g,v){return c("get",b,null,g,v)},"delete":function(b,g,v){return c("delete",b,null,g,v)},post:function(b,g,v,l){return c("post",b,g,v,l)},put:function(b,g,v,l){return c("put",b,g,v,l)},patch:function(b,g,v,l){return c("patch",b,g,v,l)}};return g}})(domvm);(function(w){function x(b,c,g,l,q,A){var t=null,m=null,u=null;if("/"==g[0]){u=g;m=!1;l={};A=u.split("#");c=A[0].split("?");t=c[0];A=A[1];c[1]&&(q={},c[1].split("&").map(function(b){b=b.split("=");q[b[0]]=null==b[1]?!0:b[1]}));var F,y;for(y in b){g=b[y];var x=g.path;if(F=t.match(g.regexPath)){m=y;-1!==x.indexOf(":")&&(l={},F.shift(),x.replace(/:([^\/]+)/g,function(b,c){l[c]=F.shift()}));break}}}else{m=g;g=b[m];var x=c+g.path,w=g.vars||{},I=/^[^\/]+$/,u=-1!==x.indexOf(":")?t=x.replace(/:([^\/]+)/g,
function(b,c){if((w[c]||I).test(l[c]))return l[c]+="";throw Error("Invalid value for route '"+x+"' segment '"+c+"': '"+l[c]+"'");}):t=x;if(q){var u=u+"?",E;for(E in q)u+=E+(!0!==q[E]?"="+q[E]:"")+"&";u=u.slice(0,-1)}u+=A?"#"+A:""}return{href:u,name:m,path:t,segs:l,hash:A,query:q}}function t(b,c){for(var g in b){var l=b[g];l.regexPath=new RegExp("^"+c+l.path.replace(/:([^\/]+)/g,function(b,c){var g=""+l.vars[c];return"("+g.substring(1,g.lastIndexOf("/"))+")"})+"$")}}var b=[],c=null,y=!1,g="";w.route=
function(n,z){function v(){var b=location,b=y?b.href.substr(b.origin.length):b.hash.substr(1)||"/";return x(w,g,b)}var l=null,q={href:function(b,c,n,l,t){var v=x(w,g,b,c,n,l);return y?(b=function(b){q["goto"](v,null,null,null,t);b.preventDefault()},b.href=v.href,b):"#"+v.href},config:function(b){(y=b.useHist)&&(g=b.root||"");l=b.init||null},refresh:function(){q["goto"](v(),null,null,null,!0)},"goto":function(m,n,l,q,t){t=t||A;m.href||(m=x(w,g,m,n,l,q));if(!1===m.name)console.log("Could not find route");
else{n=null;for(l=0;l<b.length;l++)if(b[l].path===m.path){n=l;break}null===n&&(b.splice(c+1,1E4),b.push(m),n=b.length-1);m=b[c];l=b[n];q=!0;null!==c&&(q=(q=w[m.name].onexit)?q.apply(null,(m?[m.segs,m.query,m.hash]:[]).concat(l)):!0);if(!1!==q&&!1!==w[l.name].onenter.apply(null,(l?[l.segs,l.query,l.hash]:[]).concat(m))){if(y)history[t?"replaceState":"pushState"](null,"title",l.href);c=n}A=!1}},location:function(){return A?v():b[c]}},A=!0,w=n(q,z);t(w,g);window.onhashchange=window.onpopstate=function(b){(y||
"popstate"!=b.type)&&q["goto"](v(),null,null,null,!0)};l&&l();return q}})(domvm);
