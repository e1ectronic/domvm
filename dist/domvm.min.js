/*
 https://github.com/leeoniya/domvm (1.x-dev)
*/
("undefined"!==typeof global?global:this).domvm={};(function(y){var u=("undefined"==typeof window?{}:window).requestAnimationFrame,t={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,zoom:!0},k={TYPE_ELEM:1,
TYPE_TEXT:2,isArr:function(c){return c instanceof Array},isVal:function(c){c=typeof c;return"string"===c||"number"===c},isObj:function(c){return"object"===typeof c&&null!==c&&!k.isArr(c)},isFunc:function(c){return"function"===typeof c},isProm:function(c){return"object"===typeof c&&k.isFunc(c.then)},isElem:function(c){return c instanceof HTMLElement},execAll:function(c,d,n,b,p,f){var x;c&&(k.isArr(c)?c:[c]).forEach(function(c){x=c.call(null,d,n,b,p,f)});return x},repaint:function(c){},insertArr:function(c,
d,n,b){c.splice.apply(c,[n,b].concat(d))},isEvProp:function(c){return"on"===c.substr(0,2)},isDynProp:function(c,d){switch(c){case "input":case "textarea":case "select":case "option":switch(d){case "value":case "checked":case "selected":case "selectedIndex":return!0}}},camelDash:function(c){return c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},autoPx:function(c,d){return isNaN(d)||t[c]?d:d+"px"},cmpArr:function(c,d){var n=c.length;if(n!=d.length)return!1;for(;n--;)if(c[n]!==d[n])return!1;return!0},
deepSet:function(c,d,n,b,p,f){d=d.split(".");var x=d.pop();d.forEach(function(b){c[b]||(c[b]={});c=c[b]});if(k.isFunc(c[x]))c[x](n,b,p,f);else c[x]=n},deepGet:function(c,d){var n=d.split(".");do c=c[n.shift()];while(n.length);return c},keyedIdx:function(c,d,n,b,p){for(b=0;b<d.length;b++)if(p=d[b],p.key===c)if(n){if(p.vm&&p.vm.ident[0]===n)return b}else return b;return-1},raft:function(c){function d(){n=0;c.apply(b,p)}if(!u)return c;var n,b,p;return function(){b=this;p=arguments;n||(n=u(d))}}};y.utils=
k})(domvm);(function(y){function u(a){for(I.repaint&&m.repaint(a);a=J.shift();)a[0].apply(null,a.slice(1))}function t(a,h){return!1===h?null:null==h&&null!=a?a:m.isVal(h)||m.isObj(h)||m.isArr(h)||m.isFunc(h)?h:null}function k(a,h,l,b,B,e){function g(){var a=E(h);if(v===a)return!0;for(var e=0;e<a.length;e++)if(a[e]!==v[e])return v=a,!0;return!1}function A(a,h,e){if(e)a[h]=a[h]||[],a[h].push(e);else for(var l in h)a[l]=a[l]||[],a[l].push(h[l])}function f(a,h,l){B=a;e=h;q.update(l,!1);null!=q.node&&(B.body[e]=
q.node);return w(0,!1)}function k(a){return null==a?"":a}function w(a,c){c=!1!==c;if(a){for(var b=q;a--&&b.parent;)b=b.parent;b.redraw(0,!0);return b.vm}(b=q.node)&&d(q,"willRedraw",q);var F=q.refs,A=q.body;q.refs={};q.body=[];var r=g()&&q.render.call(q.api,q,h,l),f;if(!1===r||(f=p(r,B,e,q,!0))&&D(b,f))return b.moved=!0,b.wasSame=!0,q.refs=F,q.body=A,q;f.vm=q;q.node=f;F=m.isVal(l)&&"^"===l[0]?l.substr(1):m.isVal(f.ref)&&"^"===f.ref[0]?f.ref.substr(1):null;f.key=null!=l?l:f.key;for(A=B;A;)A.vm&&(q.parent||
(q.parent=A.vm,A.vm.body.push(q)),null!==F&&m.deepSet(A.vm.refs,F,f)),A=A.parent;if((F=b)&&b.el&&(f.type!==b.type||f.tag!==b.tag))var F=null,k=!0,M=b.el.parentNode;x(f,F);B&&(B.body[e]=f);c&&(b&&n(b),!b&&C||z(f,null,f.el),k&&((M||f.parent.el).insertBefore(f.el,M.childNodes[b.idx]),q.node=f));b&&d(q,"didRedraw",q);c&&b&&J.length&&u(f);return q}var C=!B;m.isArr(a)&&(h=a[1],l=a[2],b=a[3],a=a[0]);l=t(h,l);var v=!0,E=function(a){return!0},q={api:{},node:null,ident:[a,l],model:h,opts:b||{},render:null,
update:function(a,e){null==a||l===h&&!m.isVal(l)||(d(q,"willUpdate",q,a),h=q.model=a);return!1!==e?w(0):q},on:function(a,h){A(q.events,a,h)},hook:function(a,h){q.hooks=q.hooks||{};A(q.hooks,a,h)},diff:function(a){E=a},events:{},hooks:null,redraw:I.debounce?m.raft(w):w,patch:function(a,h){var e=null!=a.el;if(m.isObj(h)){a.props=a.props||{};var l="class"in h?(k(a["class"])+" "+k(h["class"])).trim():a.props["class"],b="style"in h?h.style:a.props.style;e&&(e=Object.create(a.props),e["class"]=l,e.style=
b,e={tag:a.tag,el:a.el,ns:a.ns,props:e},r(e,a));a.props["class"]=l;a.props.style=b}else l=a.parent,e=x(p(h,l,a.idx,q),a),l.body[a.idx]=e},emit:function(a){for(var h=Array.prototype.slice.call(arguments),e=q,l;e;){if(l=e.events[a]){h[0]=l;m.execAll.apply(null,h);break}e=e.parent}},refs:{},parent:null,body:[],mount:function(a,h){q.node||w(0);if(null==a)return q;var e=null;h&&(a.textContent="",e=a,a=null);z(q.node,e,null,a);u(q.node);return q},attach:function(a){q.node||w(0);c(q.node,a);return q},unmount:function(){n(q.node)},
moveTo:f,updIdx:function(a){e=a}};b&&b.hooks&&q.hook(b.hooks);m.execAll(H,q);q.render=a.call(q.api,q,h,l);return B?f(B,e):q}function c(a,h){a.el=h;h._node=a;for(var l in a.props){var b=a.props[l],B=m.isEvProp(l)?l:"."===l[0]?l.substr(1):null;null!==B&&(h[B]=b)}if(m.isArr(a.body))for(l=0;l<a.body.length;l++)c(a.body[l],h.childNodes[l])}function d(a,h,l,b,B,e){if(a&&a.hooks&&(a=a.hooks[h]))if("did"==h.substr(0,3))J.push([m.execAll,a,l,b,B,e]);else return m.execAll(a,l,b,B,e)}function n(a,h){var l=a.el&&
!a.moved;if(l){var c=d(a.vm,"willUnmount",a.vm),B=d(a,"willRemove",a),e=c||B;a.removed=!0}a.wasSame?a.wasSame=!1:(m.isArr(a.body)&&a.body.forEach(function(a,l){n(a,h||e)}),h||(e?e.then(function(){b(a,l,!0)}):b(a,l)));a.moved=!1}function b(a,h,l){null!=a.el&&a.el.parentNode?h&&(a.el.parentNode.removeChild(a.el),a.el=null,g(a),d(a.vm,"didUnmount",a.vm),d(a,"didRemove",a),l&&u(a.parent)):g(a)}function p(a,h,l,b,B){var e=a;a=0<K.length?K.pop():{type:null,key:null,ref:null,idx:null,parent:null,moved:!1,
wasSame:!1,removed:!1,hooks:null,tag:null,"class":null,ns:null,guard:!1,raw:!1,props:null,el:null,hasKeys:!1,body:null,data:null,diff:null};m.isFunc(e)&&(e=e());var c=e.length;if(m.isArr(e)&&c){a.type=m.TYPE_ELEM;if(1<c){var A=1;!m.isObj(e[1])||e[1].redraw||m.isElem(e[1])||(a.props=e[1],A=2);a.body=c==A+1?m.isVal(e[A])?e[A]:m.isFunc(e[A])?e[A]():e.slice(A):e.slice(A)}e=e[0];c=N[e];c||(c=["",""],c={tag:(e.match(/^[-\w]+/)||["div"])[0],id:(e.match(/#([-\w]+)/)||c)[1],"class":(e.match(/\.([-\w.]+)/)||
c)[1].replace(/\./g," ")},N[e]=c);a.tag=c.tag;if(c.id||c["class"])e=a.props||{},c.id&&null==e.id&&(e.id=c.id),c["class"]&&(a["class"]=c["class"],e["class"]=c["class"]+(null!=e["class"]?" "+e["class"]:"")),a.props=e;if(a.props){var e=a.props,g;for(g in e)!m.isEvProp(g)&&m.isFunc(e[g])&&("href"==g?(e.onclick=e[g],e.href=e[g].href):e[g]=e[g]()),m.isDynProp(a.tag,g)&&(e["."+g]=e[g]);if(m.isObj(e.style))for(var d in e.style)g=e.style[d],m.isFunc(g)&&(e.style[d]=g());a.key=m.isVal(e._key)?e._key:m.isVal(e._ref)?
e._ref:m.isVal(e.id)?e.id:m.isVal(e.name)?e.name:null;null!=e._key&&delete e._key;for(var p in e)"_"==p[0]&&(a[p.substr(1)]=e[p],delete e[p])}}else m.isVal(e)?(a.type=m.TYPE_TEXT,a.body=e):m.isElem(e)&&(a.type=m.TYPE_ELEM,a.el=e,a.tag=e.nodeName.toLowerCase());null!==a.ref&&m.deepSet(b.refs,a.ref,a);a.parent=h;a.idx=l;a.ns=h&&h.ns?h.ns:"svg"===a.tag||"math"===a.tag?a.tag:null;B||a.diff||!m.isArr(a.body)||f(a,b);return a}function f(a,h){for(var l=0,c=a.body.length;l<c;l++){var b=a.body[l],e=null,g=
null,f=!1,d=!1;m.isFunc(b)&&(b=b());if(null==b)f=!0;else{var n=m.isArr(b),r=n?!1:m.isObj(b);if(n)b.length?b._expl?d=!0:"string"==typeof b[0]&&""!==b[0]?(g=p(b,a,l,h),e=g.key):m.isFunc(b[0])?e=t(b[1],b[2]):d=!0:f=!0;else if(r)if(m.isFunc(b.redraw))b.moveTo(a,l),g=b.node,e=b.ident[1];else if(m.isElem(b))g=p(b,a,l,h);else{a.body[l--]=""+b;continue}else""===b?f=!0:0<l&&a.body[l-1].type===m.TYPE_TEXT?(a.body[l-1].body+=""+b,f=!0):g=p(""+b,a,l,h)}f||d?(d?m.insertArr(a.body,b,l,1):a.body.splice(l,1),c=a.body.length,
l--):(null!==e&&(a.hasKeys=!0),a.body[l]=g||b)}a.body._init=!0}function x(a,h){if(D(h,a))return h.moved=!0,h.wasSame=!0,h;h&&(d(a,"willRecycle",h,a),w(h,a),d(a,"didRecycle",h,a));if(m.isArr(a.body)){if(!a.body._init){for(var b=a;!b.vm;)b=b.parent;f(a,b.vm)}var c=0;a.body.forEach(function(b,e){var l=m.isArr(b);if(h){var g=C(b,a,h,c);if(null!==g){var f=g[0],g=g[1];f===c&&c++;f=h.body[f];f.vm?l?2===g?f.vm.moveTo(a,e,b[1]):1===g&&k(b[0],b[1],b[2],b[3],a,e):b.vm&&2===g&&b.vm===f.vm&&f.vm.moveTo(a,e):a.body[e]=
x(b,f);return}}l?k(b[0],b[1],b[2],b[3],a,e):a.body[e]=x(b)})}return a}function z(a,h,b,c){for(var g=!a.el;b&&b._node.removed;)b=b.nextSibling;g&&a.vm&&d(a.vm,"willMount",a.vm);if(a.type==m.TYPE_ELEM)if(g&&(a.el=h||(a.ns?L.createElementNS(G[a.ns],a.tag):L.createElement(a.tag)),a.props&&r(a)),m.isArr(a.body)){h=0;for(var e=a.el.firstChild;h<a.body.length;h++)e=z(a.body[h],null,e)}else m.isVal(a.body)&&(a.raw?a.el.innerHTML=a.body:g&&(a.el.textContent=a.body));else a.type==m.TYPE_TEXT&&g&&(a.el=L.createTextNode(a.body));
a.el._node=a;h=a.parent;b!==a.el&&(c||h&&h.el)&&(h=g?"Insert":"Reinsert",d(a,"will"+h,a),(c||a.parent.el).insertBefore(a.el,b),d(a,"did"+h,a));g&&a.vm&&a.vm.hooks&&!a.moved&&d(a.vm,"didMount",a.vm);return b!==a.el?b:b.nextSibling}function C(a,h,b,c,g){var e=m.isArr(a),f=e?t(a[1],a[2]):a.key,d=b.hasKeys,p=h.hasKeys;b=b.body;h=h.body;if(null!==f&&d)return a=m.keyedIdx(f,b,e?a[0]:null),-1<a?[a,2]:null;c=c||0;if(c>b.length-1)return null;g=0===g?0:g||b.length-1;for(f=null;c<=g;c++)if(d=b[c],null!==d&&
d.el)if(e&&d.vm){if(d.vm.ident[0]===a[0]){if(d.vm.ident[1]===t(a[1],a[2]))return[c,2];!f&&p&&-1==m.keyedIdx(d.key,h,d.vm.ident[0])&&(f=[c,1])}}else if(a.type===d.type&&(a.type===m.TYPE_TEXT||null!==a.tag&&a.tag===d.tag)&&(null===d.key||!p||-1==m.keyedIdx(d.key,h,d.vm?d.vm.ident[0]:null)))return[c,1];return f}function D(a,b){if(a&&a.diff&&b.diff&&a.diff[0]===b.diff[0]){var c=a.diff.slice(1).concat(b.diff.slice(1));return!b.diff[0].apply(null,c)}return!1}function w(a,b){if(a.el)if(b.el=a.el,a.el=null,
b.el&&(b.el._node=b),b.type===m.TYPE_TEXT&&b.body!==a.body)b.el.nodeValue=b.body;else{r(b,a);var c=!m.isArr(b.body),g=!m.isArr(a.body);c&&b.body!==a.body?g&&b.el.firstChild?b.el.firstChild.nodeValue=b.body:b.raw?b.el.innerHTML=b.body:b.el.textContent=b.body:g&&!c&&(b.el.textContent="");a.moved=!0}}function g(a){a.removed&&a.vm&&(a.vm.node=null);a.el=a.key=a.ref=a.data=a.diff=a.vm=a.body=a.props=null;a.raw=a.moved=a.wasSame=a.removed=!1;K.push(a)}function E(a,b,c,g){return function(c){var e,l=c.target._node,
f=null;if(m.isFunc(a))e=a.call(b,c,l,g);else if(m.isArr(a))f=a.slice(1),e=a[0].apply(b,f.concat(c,l,g));else if(m.isObj(a))for(var d in a){var p=a[d];null!=p&&"_"!=d[0]&&c.target.matches(d)&&(m.isArr(p)?(f=p.slice(1),e=p[0].apply(b,f.concat(c,l,g))):m.isFunc(p)&&(e=p.call(b,c,l,g)))}!1===e&&(c.preventDefault(),c.stopPropagation());g.opts.hasOwnProperty("watch")&&g.opts.watch.fire({type:"event",vm:g,node:l,event:c,data:f})}}function r(a,b){var c=!b;b=b||{};if(b.props||a.props){var g=b.props||{},f=
a.props||{},e=g.style,d=f.style;if(m.isObj(e)||m.isObj(d))O(a.el,a.tag,e||{},d||{},Q,v,a.ns,c,a),g.style=f.style=null;O(a.el,a.tag,g,f,R,P,a.ns,c,a);d&&(f.style=d)}}function O(a,b,c,g,f,e,d,p,n){for(var r in g)if(b=g[r],null!==b){var k="."===r[0]?a[r.substr(1)]:c[r];b===k||m.isArr(b)&&m.isArr(k)&&m.cmpArr(b,k)||f(a,r,b,d,p,n)}for(r in c)null!==c[r]&&null==g[r]&&e(a,r,d,p)}function Q(a,b,c){a.style[b]=m.autoPx(b,c)}function v(a,b){a.style[b]=""}function R(a,b,c,g,f,e){if("class"===b)a.className=c;
else if("id"===b)a.id=c;else if("."===b[0])b=b.substr(1),"svg"===g?a[b].baseVal=c:a[b]=c;else if(m.isEvProp(b)){for(g=e;!g.vm;)g=g.parent;a[b]=E(c,g.vm.opts.evctx||g.vm.model||null,e,g.vm)}else!1===c?P(a,b,g,f):a.setAttribute(b,!0===c?"":c)}function P(a,b,c,g){g||("class"===b?a.className="":"id"===b?a.id="":"."===b[0]?(b=b.substr(1),"svg"===c?a[b].baseVal=null:a[b]=null):m.isEvProp(b)?a[b]=null:a.removeAttribute(b))}var G={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},
L="undefined"==typeof document?{}:document,N={},K=[],J=[],I={debounce:!0,repaint:!0};y.view=k;y.view.config=function(a){for(var b in a)I[b]=a[b]};var H=null;y.view.extend=function(a,b){H=!H||b?[]:H;H.push(a)};var m=y.utils;return y})(domvm);(function(y){var u=/^(?:img|br|input|col|link|meta|area|base|command|embed|hr|keygen|param|source|track|wbr)$/,t=y.utils;y.html=function(k){var c="";switch(k.type){case t.TYPE_ELEM:c+="<"+k.tag;if(k.props){var d=t.isVal(k.props.style)?k.props.style:"",n=t.isObj(k.props.style)?k.props.style:null;if(n)for(var b in n)null!==n[b]&&(d+=t.camelDash(b)+": "+t.autoPx(b,n[b])+"; ");for(b in k.props)t.isEvProp(b)||"."===b[0]||(n=k.props[b],t.isFunc(n)&&(n=n()),t.isObj(n)||(!0===n?c+=" "+b:!1!==n&&null!==n&&
"."!==b[0]&&(c+=" "+b+'="'+n+'"')));d.length&&(c+=' style="'+d.trim()+'"')}if(k.ns&&"svg"!==k.tag&&"math"!==k.tag&&!k.body)return c+"/>";c+=">";break;case t.TYPE_TEXT:return k.body}u.test(k.tag)||(t.isArr(k.body)?k.body.forEach(function(b){c+=y.html(b)}):c+=k.body||"",c+="</"+k.tag+">");return c}})(domvm);(function(y){var u=y.utils;y.watch=function(t){function k(){}function c(b,c,f,d,k){k=k||{};k.method=b.toUpperCase();"credentials"in k||(k.credentials="same-origin");null!==f&&(u.isArr(f)||u.isObj(f)?(k.headers=k.headers||new Headers,k.headers.set("Content-Type","application/json"),k.body=JSON.stringify(f)):k.body=""+f);var C=d,D=function(b){return Promise.reject(b)};d instanceof Array&&(C=d[0],d[1]&&(D=d[1]));var w={type:"fetch",fetch:{method:b,url:c,body:f}};d=fetch(c,k).then(function(b){if(200<=
b.status&&300>b.status)return b;var c=Error(b.status+": "+b.statusText);c.data=b;return Promise.reject(c)}).then(function(b){switch(b.headers.get("Content-Type").split("; ")[0]){case "application/json":return b.json();case "text/plain":return b.text();default:return b}}).then(C,D).then(function(b){!1!==b&&n.fire(w);return b},function(b){w.error=b;n.fire(w);return Promise.reject(b)});d._fetchArgs=[b,c,f,[C,D],k];return d}var d=[];u.isFunc(t)&&d.push(t);var n={on:function(b){d.push(b);return n},off:function(b){d.splice(d.indexOf(b),
1);return n},fire:u.raft(function(b){u.execAll(d,b);return n}),prop:function(b,d,f){var x=b,z=function(b,c,g){if(arguments.length&&b!==x){g=g||{type:"prop",prop:z,data:{old:x,"new":b}};f&&(b=f(g));if("undefined"==typeof b||b===x)return x;x=g.data["new"]=b;u.isFunc(c)?c(g):!1!==c&&n.fire(g)}return x};z._prop=!0;if(d&&d.then){z.update=k;if(d._fetchArgs){var C=d._fetchArgs[3];d._fetchArgs[3]=[function(b){return z(C[0]?C[0](b):b)},C[1]];z.update=function(){c.apply(null,d._fetchArgs)}}d.then(z)}return z.toString=
z},sync:function(b,c,d){var k=b,z=c;u.isFunc(k)||(k=function(c,d,f){if("string"==typeof b){var g,k;"e."==b.substr(0,2)?(g=c,k=b.substr(2)):(g=c.target,k=b)}return u.deepGet(g,k)});u.isArr(z)&&(z=function(b,d,f){var g=c[0],k=c[1];u.isFunc(k)&&(k=k(f.event,f.node,f.vm));var r=u.deepGet(g,k);b!==r&&(u.deepSet(g,k,b,d,f),u.isFunc(d)?d(f):!1!==d&&n.fire(f))});return function(b,c,n){var g={type:"sync",vm:n,node:c,event:b};z(k(b,c,n),d,g)}},fetch:c,get:function(b,d,f){f?b+=n.query(d):f=d;return c("get",
b,null,f)},"delete":function(b,d,f){f?b+=n.query(d):f=d;return c("delete",b,null,f)},post:function(b,d,f){return c("post",b,d,f)},put:function(b,d,f){return c("put",b,d,f)},patch:function(b,d,f){return c("patch",b,d,f)},query:function(b){if(!u.isObj(b))return"";var c=[],d=encodeURIComponent,k;for(k in b)c.push(d(k)+"="+d(b[k]));return c.length?"?"+c.join("&"):""}};return n}})(domvm);(function(y){function u(b,c,d,f,k,g){var n=null,r=null,p=null;if("/"==d[0]){p=d;r=!1;f={};g=p.split("#");c=g[0].split("?");n=c[0];g=g[1];c[1]&&(k={},c[1].split("&").map(function(b){b=b.split("=");k[b[0]]=null==b[1]?!0:b[1]}));var u,v;for(v in b){d=b[v];var t=d.path;if(u=n.match(d.regexPath)){r=v;-1!==t.indexOf(":")&&(f={},u.shift(),t.replace(/:([^\/]+)/g,function(b,c){f[c]=u.shift()}));break}}}else{r=d;d=b[r];var t=c+d.path,y=d.vars||{},p=-1!==t.indexOf(":")?n=t.replace(/:([^\/]+)/g,function(b,c){if((y[c]||
/^[^\/]+$/).test(f[c]))return f[c]+="";throw Error("Invalid value for route '"+t+"' segment '"+c+"': '"+f[c]+"'");}):n=t;if(k){var p=p+"?",G;for(G in k)p+=G+(!0!==k[G]?"="+k[G]:"")+"&";p=p.slice(0,-1)}p+=g?"#"+g:""}return{href:p,name:r,path:n,segs:f,hash:g,query:k}}function t(b,c){for(var d in b){var f=b[d];f.regexPath=new RegExp("^"+c+f.path.replace(/:([^\/]+)/g,function(b,c){var d=""+((f.vars||{})[c]||/[^\/]+/);return"("+d.substring(1,d.lastIndexOf("/"))+")"})+"$")}}var k=[],c=null,d=!1,n=null,
b=null,p=null,f="";y.route=function(x,y){function C(){var b=location,b=d?b.href.substr(b.origin.length):b.hash.substr(1)||"/";return u(g,f,b)}var D=null,w={href:function(b,c,k,n,p){var t=u(g,f,b,c,k,n);b=function(b){w["goto"](t,c,k,n,p);b.preventDefault()};b.href=(d?"":"#")+t.href;return b},config:function(c){(d=c.useHist)&&(f=c.root||"");n=c.willEnter||null;b=c.willExit||null;p=c.notFound||null;D=c.init||null},refresh:function(){w["goto"](C(),null,null,null,!0)},"goto":function(r,t,w,v,y,x){r.href||
(r=u(g,f,r,t,w,v));if(!1===r.name)p?p(r):console.log("Could not find route");else{t=null;for(v=0;v<k.length;v++)if(k[v].href===r.href){t=v;break}null===t&&(k.splice(c+1,1E4),k.push(r),t=k.length-1);r=k[c];v=k[t];var z=!0;w=!0;null!==c&&(b&&(z=x||b(r,v)),!1!==z&&(z=(z=g[r.name].onexit)?x||z.apply(null,(r?[r.segs,r.query,r.hash]:[]).concat(v)):!0));!1!==z&&(n&&(w=x||n(v,r)),!1!==w&&(w=g[v.name].onenter,w=x||w.apply(null,(v?[v.segs,v.query,v.hash]:[]).concat(r))),!1!==w&&(d?(E=!0,history[y?"replaceState":
"pushState"](null,"title",v.href)):(v="#"+v.href,location.hash!==v&&(E=!0,y?location.replace(v):location.hash=v)),c=t))}},route:function(b,d,f,g,n){if(null!=b)w["goto"](b,d,f,g,n,!0);else return null==c?C():k[c]}};w.location=w.route;var g=x(w,y);t(g,f);var E=!1;window.onhashchange=window.onpopstate=function(b){if(d||"popstate"!=b.type)!d&&E?E=!1:w["goto"](C(),null,null,null,!0)};D&&D();return w}})(domvm);
