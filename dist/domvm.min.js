/*
 https://github.com/leeoniya/domvm
*/
("undefined"!==typeof global?global:this).domvm={};(function(u){var w="undefined"==typeof window?{}:window,t={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,zoom:!0},c={TYPE_ELEM:1,TYPE_TEXT:2,isArr:function(b){return b instanceof
Array},isVal:function(b){b=typeof b;return"string"===b||"number"===b},isObj:function(b){return"object"===typeof b&&null!==b&&!c.isArr(b)},isFunc:function(b){return"function"===typeof b},isProm:function(b){return"object"===typeof b&&c.isFunc(b.then)},execAll:function(b,v){b&&(c.isArr(b)?b:[b]).forEach(function(b){return b.apply(null,v)})},insertArr:function(b,c,k,g){b.splice.apply(b,[k,g].concat(c))},isEvProp:function(b){return"on"===b.substr(0,2)},isDynProp:function(b,c){switch(b){case "input":case "textarea":case "select":case "option":switch(c){case "value":case "checked":case "selected":case "selectedIndex":return!0}}},
camelDash:function(b){return b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},autoPx:function(b,c){return isNaN(c)||t[b]?c:c+"px"},deepSet:function(b,c,k){c=c.split(".");var g=c.pop();c.forEach(function(g){b[g]||(b[g]={});b=b[g]});b[g]=k},indexOfKey:function(b,c,k,g){for(k=0;k<c.length;k++)if(c[k].key===b)return k;return-1},raft:function(b){function c(){k=0;b.apply(g,n)}if(!w.requestAnimationFrame)return b;var k,g,n;return function(){g=this;n=arguments;k||(k=w.requestAnimationFrame(c))}}};u.util=
c})(domvm);(function(u){function w(a,d){return!1===d?null:null==d&&null!=a?a:h.isVal(d)||h.isObj(d)||h.isArr(d)||h.isFunc(d)?d:null}function t(a,d,q,D,e,B){function C(a,d,e){if(e)a[d]=a[d]||[],a[d].push(e);else for(var q in d)a[q]=a[q]||[],a[q].push(d[q])}function l(a,d,q){e=a;B=d;p.update(q,!1);return f(0,!1)}function f(a,D){if(a){for(var l=p;a--&&l.parent;)l=l.parent;l.redraw(0,!0);return l.vm}(l=p.node)&&p.hooks&&h.execAll(p.hooks.willRedraw,[p]);p.refs={};var c=p.render.call(p.api,p,d,q),c=k(c,e,B,p);c.vm=
p;p.node=c;var C=h.isVal(q)&&"^"===q[0]?q.substr(1):h.isVal(c.ref)&&"^"===c.ref[0]?c.ref.substr(1):null;c.key=null!=q?q:c.key;for(var m=e;m;)m.vm&&(p.parent||(p.parent=m.vm),null!==C&&h.deepSet(m.vm.refs,C,c)),m=m.parent;if((C=l)&&(c.type!==l.type||c.tag!==l.tag))var C=null,x=!0;g(c,C);e&&(e.body[B]=c);!1!==D&&(l&&b(l),!l&&y||n(c,null,c.el),x&&(l.el.parentNode.replaceChild(c.el,l.el),l.el=null));l&&p.hooks&&Promise.resolve().then(function(){requestAnimationFrame(function(){h.execAll(p.hooks.didRedraw,
[p])})});return p}function x(a){p.hooks&&h.execAll(p.hooks.willUnmount);if(e)if(a){for(a=B+1;a<e.body.length;a++){var d=e.body[a];d.idx=a-1;d.vm&&d.vm.updIdx(d.idx)}e.body.splice(B,1)}else e.body[B]=null;b(p.node,!0);p.node.vm=null;p.hooks&&h.execAll(p.hooks.didUnmount)}var y=!e;h.isArr(a)&&(d=a[1],q=a[2],D=a[3],a=a[0]);q=w(d,q);var p={api:{},node:null,view:[a,q],model:d,opts:D||{},render:null,update:function(a,e){null==a||q===d&&!h.isVal(q)||(d=p.model=a);return!1!==e?f(0):p},on:function(a,d){C(p.events,
a,d)},hook:function(a,d){p.hooks=p.hooks||{};C(p.hooks,a,d)},events:{},hooks:null,redraw:I.useRaf?h.raft(f):f,patch:function(a,d){if(h.isObj(d)){var e={tag:a.tag,el:a.el,ns:a.ns,props:{"class":"class"in d?(null!=a["class"]?a["class"]+" ":"")+d["class"]:a.props["class"],style:"style"in d?d.style:a.props.style}};m(e,a);a.props["class"]=e.props["class"];a.props.style=e.props.style}else{var q=a.parent,e=g(k(d,q,a.idx,p),a);q.body[a.idx]=e}},emit:function(a){for(var d=Array.prototype.slice.call(arguments,
1),e=p;e;){if(e.events[a]){h.execAll(e.events[a],d);break}e=e.parent}},refs:{},parent:null,mount:function(a,d){var e=null;d&&(a.textContent="",e=a,a=null);n(p.node,e,null,a);return p},attach:function(a){c(p.node,a);return p},unmount:function(){z(p.hooks,"Unmount",x,[],[p])},moveTo:l,updIdx:function(a){B=a}};D&&D.hooks&&p.hook(D.hooks);h.execAll(G,[p]);p.render=a.call(p.api,p,d,q);return e?l(e,B):f(0)}function c(a,d){a.el=d;d._node=a;for(var q in a.props){var b=a.props[q],e=h.isEvProp(q)?q:"."===q[0]?
q.substr(1):null;null!==e&&(d[e]=b)}if(h.isArr(a.body))for(q=0;q<a.body.length;q++)c(a.body[q],d.childNodes[q])}function b(a,d){h.isArr(a.body)&&(a.body.forEach(function(a,d){a&&(a.vm&&!a.moved?a.vm.unmount():b(a,!0))}),a.body=null);a.vm=null;d&&a.el&&a.el.parentNode&&(a.removed=!0,a.hooks?z(a.hooks,"Remove",v,[a]):v(a))}function v(a){a.el.parentNode.removeChild(a.el);a.el=null}function k(a,d,q,b){var e=a;a={type:null,key:null,ref:null,idx:null,parent:null,moved:!1,removed:!1,hooks:null,tag:null,
"class":null,ns:null,guard:!1,raw:!1,props:null,el:null,hasKeys:!1,body:null};h.isFunc(e)&&(e=e());if(h.isArr(e)&&e.length){a.type=h.TYPE_ELEM;if(1<e.length){var c=1;h.isObj(e[1])&&(a.props=e[1],c=2);a.body=e.length==c+1?h.isVal(e[c])?e[c]:h.isFunc(e[c])?e[c]():e.slice(c):e.slice(c)}e=e[0];if(/[.#]/.test(e)){if(e=A(e),a.tag=e.tag,c=null!=e["class"],null!=e.id||c){var g=a.props||{};null==g.id&&(g.id=e.id);c&&(a["class"]=e["class"],g["class"]=e["class"]+(null!=g["class"]?" "+g["class"]:""));a.props=
g}}else a.tag=e;if(a.props){var e=a.props,l;for(l in e)h.isEvProp(l)?e[l]=x(e[l],b.opts.evctx||b.model||null,a,b):h.isFunc(e[l])&&("href"==l?(e.onclick=e[l],e.href=e[l].href):e[l]=e[l]()),h.isDynProp(a.tag,l)&&(e["."+l]=e[l]);if(h.isObj(e.style))for(var f in e.style)l=e.style[f],h.isFunc(l)&&(e.style[f]=l());h.isObj(e._hooks)&&(a.hooks=e._hooks,e._hooks=null);a.key=h.isVal(e._key)?e._key:h.isVal(e._ref)?e._ref:h.isVal(e.id)?e.id:h.isVal(e.name)?e.name:null;null!=e._ref&&(a.ref=e._ref);e._raw&&(a.raw=
!0);null!=e._data&&(a.data=e._data);e._guard&&(a.guard=!0);e._ref=e._key=e._raw=e._data=e._guard=null}}else h.isVal(e)&&(a.type=h.TYPE_TEXT,a.body=e);null!==a.ref&&h.deepSet(b.refs,a.ref,a);a.parent=d;a.idx=q;a.ns=d&&d.ns?d.ns:"svg"===a.tag||"math"===a.tag?a.tag:null;if(h.isArr(a.body))for(d=0,q=a.body.length;d<q;d++){f=a.body[d];e=l=null;g=c=!1;h.isFunc(f)&&(f=f());if(null==f)c=!0;else{var m=h.isArr(f),n=m?!1:h.isObj(f);if(m)f.length?h.isArr(f[0])?g=!0:h.isFunc(f[0])?l=w(f[1],f[2]):(e=k(f,a,d,b),
l=e.key):c=!0;else if(n)if(h.isFunc(f.redraw))f.moveTo(a,d),e=f.node,l=f.view[1];else{a.body[d--]=""+f;continue}else""===f?c=!0:0<d&&a.body[d-1].type===h.TYPE_TEXT?(a.body[d-1].body+=""+f,c=!0):e=k(""+f,a,d,b)}c||g?(g?h.insertArr(a.body,f,d,1):a.body.splice(d,1),q=a.body.length,d--):(null!==l&&(a.hasKeys=!0),a.body[d]=e||f)}return a}function g(a,d){d&&(a.hooks?z(a.hooks,"Recycle",r,[d,a]):r(d,a));if(h.isArr(a.body)){var c=0;a.body.forEach(function(b,e){var f=h.isArr(b);if(d){var m=y(b,a,d,c);if(null!==
m){var l=m[0],m=m[1];l===c&&c++;l=d.body[l];l.vm?f?2===m?l.vm.moveTo(a,e,b[1]):1===m&&t(b[0],b[1],b[2],b[3],a,e):b.vm&&2===m&&b.vm===l.vm&&l.vm.moveTo(a,e):a.body[e]=g(b,l);return}}f?t(b[0],b[1],b[2],b[3],a,e):a.body[e]=g(b)})}return a}function n(a,d,b,c){for(var e=!a.el;b&&b._node.removed;)b=b.nextSibling;e&&a.vm&&a.vm.hooks&&h.execAll(a.vm.hooks.willMount,[a.vm]);if(a.type==h.TYPE_ELEM)if(e&&(a.el=d||(a.ns?J.createElementNS(E[a.ns],a.tag):J.createElement(a.tag)),a.props&&m(a)),h.isArr(a.body)){d=
0;for(var g=a.el.firstChild;d<a.body.length;d++)g=n(a.body[d],null,g)}else h.isVal(a.body)&&(a.raw?a.el.innerHTML=a.body:e&&(a.el.textContent=a.body));else a.type==h.TYPE_TEXT&&e&&(a.el=J.createTextNode(a.body));a.el._node=a;d=a.parent;b!==a.el&&(c||d&&d.el)&&(a.hooks?z(a.hooks,e?"Insert":"Reinsert",f,[a,b,c]):f(a,b,c));e&&a.vm&&a.vm.hooks&&Promise.resolve().then(function(){!a.moved&&h.execAll(a.vm.hooks.didMount,[a.vm])});return b!==a.el?b:b.nextSibling}function f(a,d,b){(b||a.parent.el).insertBefore(a.el,
d)}function y(a,d,b,c,e){var g=h.isArr(a),f=g?w(a[1],a[2]):a.key,l=b.hasKeys,m=d.hasKeys;b=b.body;d=d.body;if(null!==f&&l)return a=h.indexOfKey(f,b),-1<a?[a,2]:null;c=c||0;if(c>b.length-1)return null;e=0===e?0:e||b.length-1;for(f=null;c<=e;c++)if(l=b[c],null!==l&&l.el)if(g&&l.vm){if(l.vm.view[0]===a[0]){if(l.vm.view[1]===w(a[1],a[2]))return[c,2];var n=!1;if(I.viewScan)for(var x=0;x<d.length;x++){var p=d[x];if(!p.el&&p.vm&&p.vm.view[0]===l.vm.view[0]&&p.vm.view[1]===l.vm.view[1]){n=!0;break}}n||f||
!m||-1!=h.indexOfKey(l.key,d)||(f=[c,1])}}else if(a.type===l.type&&(a.type===h.TYPE_TEXT||null!==a.tag&&a.tag===l.tag)&&(null===l.key||!m||-1==h.indexOfKey(l.key,d)))return[c,1];return f}function r(a,d){d.el=a.el;a.el=null;d.el&&(d.el._node=d);if(d.type===h.TYPE_TEXT&&d.body!==a.body)d.el.nodeValue=d.body;else{m(d,a);var b=!h.isArr(d.body),c=!h.isArr(a.body);b&&d.body!==a.body?c&&d.el.firstChild?d.el.firstChild.nodeValue=d.body:d.raw?d.el.innerHTML=d.body:d.el.textContent=d.body:c&&!b&&(d.el.textContent=
"");a.moved=!0}}function z(a,d,b,c,e,f){if(a){var g=a["will"+d];h.isArr(g)&&(g=g[0]);var l=a["did"+d];h.isArr(l)&&(l=l[0]);a=function(){b.apply(null,c);l&&l.apply(null,f||e||c)};g?(g=g.apply(null,e||c),h.isProm(g)?g.then(a):a()):a()}else b.apply(null,c)}function A(a){if(a in K)return K[a];var d={tag:null,id:null,"class":null};d.tag=a.replace(/^([\w\-]+)?(?:#([\w\-]+))?((?:\.[\w\-]+)+)?$/,function(a,b,e,c){e&&(d.id=e);c&&(d["class"]=c.replace(/\./g," ").trim());return b||"div"});return K[a]=d}function x(a,
d,b,c){return function(e){var b,g=e.target._node,f=null;if(h.isFunc(a))b=a.call(d,e,g,c);else if(h.isArr(a))f=a.slice(1),b=a[0].apply(d,f.concat(e,g,c));else if(h.isObj(a))for(var m in a){var q=a[m];e.target.matches(m)&&(h.isArr(q)?(f=q.slice(1),b=q[0].apply(d,f.concat(e,g,c))):h.isFunc(q)&&(b=q.call(d,e,g,c)))}!1===b&&(e.preventDefault(),e.stopPropagation());c.opts.hasOwnProperty("watch")&&c.opts.watch.fire({type:"event",vm:c,node:g,event:e,data:f})}}function m(a,d){var b=!d;d=d||{};if(d.props||
a.props){var c=d.props||{},e=a.props||{},g=c.style,f=e.style;if(h.isObj(g)||h.isObj(f))F(a.el,a.tag,g||{},f||{},M,N,a.ns,b),c.style=e.style=null;F(a.el,a.tag,c,e,L,H,a.ns,b);f&&(e.style=f)}}function F(a,d,b,c,e,g,f,h){for(var m in c)null!==c[m]&&("."===m[0]?a[m.substr(1)]!==c[m]:c[m]!==b[m])&&e(a,m,c[m],f,h);for(m in b)null!==b[m]&&null==c[m]&&g(a,m,f,h)}function M(a,d,b){a.style[d]=h.autoPx(d,b)}function N(a,d){a.style[d]=""}function L(a,d,b,c,e){"."===d[0]?(d=d.substr(1),"svg"===c?a[d].baseVal=
b:a[d]=b):"class"===d?a.className=b:"id"===d||h.isEvProp(d)?a[d]=b:!1===b?H(a,d,c,e):a.setAttribute(d,!0===b?"":b)}function H(a,d,b,c){c||("."===d[0]?(d=d.substr(1),"svg"===b?a[d].baseVal=null:a[d]=null):"class"===d?a.className="":"id"===d||h.isEvProp(d)?a[d]=null:a.removeAttribute(d))}var E={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},K={},J="undefined"==typeof document?{}:document,I={useRaf:!0,viewScan:!1,useDOM:!1};u.view=t;u.view.config=function(a){I=a};var G=null;
u.view.extend=function(a,d){G=!G||d?[]:G;G.push(a)};var h=u.util;return u})(domvm);(function(u){var w=/^(?:img|br|input|col|link|meta|area|base|command|embed|hr|keygen|param|source|track|wbr)$/,t=u.util;u.html=function(c){var b="";switch(c.type){case t.TYPE_ELEM:b+="<"+c.tag;if(c.props){var v=t.isVal(c.props.style)?c.props.style:"",k=t.isObj(c.props.style)?c.props.style:null;if(k)for(var g in k)null!==k[g]&&(v+=t.camelDash(g)+": "+t.autoPx(g,k[g])+"; ");for(g in c.props)t.isEvProp(g)||"."===g[0]||(k=c.props[g],t.isFunc(k)&&(k=k()),t.isObj(k)||(!0===k?b+=" "+g:!1!==k&&null!==k&&
"."!==g[0]&&(b+=" "+g+'="'+k+'"')));v.length&&(b+=' style="'+v.trim()+'"')}if(c.ns&&"svg"!==c.tag&&"math"!==c.tag&&!c.body)return b+"/>";b+=">";break;case t.TYPE_TEXT:return c.body}w.test(c.tag)||(t.isArr(c.body)?c.body.forEach(function(c){b+=u.html(c)}):b+=c.body||"",b+="</"+c.tag+">");return b}})(domvm);(function(u){var w=u.util;u.watch=function(t){function c(){}function b(b,n,f,y,r){r=r||{};r.method=b.toUpperCase();null!==f&&(w.isArr(f)||w.isObj(f)?(r.headers=r.headers||new Headers,r.headers.set("Content-Type","application/json"),r.body=JSON.stringify(f)):r.body=""+f);var z=y,A=c;y instanceof Array&&(z=y[0],y[1]&&(A=y[1]));var x={type:"fetch",fetch:{method:b,url:n,body:f}};y=fetch(n,r).then(function(b){if(200<=b.status&&300>b.status)return b;var c=Error(b.status+": "+b.statusText);c.data=b;return Promise.reject(c)}).then(function(b){switch(b.headers.get("Content-Type").split("; ")[0]){case "application/json":return b.json();
case "text/plain":return b.text();default:return b}}).then(z,A).then(function(b){!1!==b&&k.fire(x);return b},function(b){x.error=b;k.fire(x);return b});y._fetchArgs=[b,n,f,[z,A],r];return y}var v=[];w.isFunc(t)&&v.push(t);var k={on:function(b){v.push(b);return k},off:function(b){v.splice(v.indexOf(b),1);return k},fire:w.raft(function(){w.execAll(v,arguments);return k}),prop:function(g,n){var f=g,y=function(b,c){if(arguments.length&&b!==f){var g=f;f=b;!1!==c&&k.fire({type:"prop",prop:y,data:{old:g,
"new":b}})}return f};if(n&&n.then){y.update=c;if(n._fetchArgs){var r=n._fetchArgs[3];n._fetchArgs[3]=[function(b){return y(r[0]?r[0](b):b)},r[1]];y.update=function(){b.apply(null,n._fetchArgs)}}n.then(y)}return y.toString=y},sync:function(b,c,f){var k=b,r=c;"string"==typeof b&&(k=function(c){return"e."===b.substr(0,2)?c[b.substr(2)]:c.target[b]});return function(b,g,x){var m=this!==window?this:null;m&&"string"==typeof c&&(r=function(b,f){var g=m[c];m[c]=b;t&&b!==g&&!1!==f&&t()});r(k(b),f)}},fetch:b,
get:function(c,n,f){f?c+=k.query(n):f=n;return b("get",c,null,f)},"delete":function(c,n,f){f?c+=k.query(n):f=n;return b("delete",c,null,f)},post:function(c,k,f){return b("post",c,k,f)},put:function(c,k,f){return b("put",c,k,f)},patch:function(c,k,f){return b("patch",c,k,f)},query:function(b){if(!w.isObj(b))return"";var c=[],f=encodeURIComponent,k;for(k in b)c.push(f(k)+"="+f(b[k]));return c.length?"?"+c.join("&"):""}};return k}})(domvm);(function(u){function w(b,c,f,k,r,t){var v=null,x=null,m=null;if("/"==f[0]){m=f;x=!1;k={};t=m.split("#");c=t[0].split("?");v=c[0];t=t[1];c[1]&&(r={},c[1].split("&").map(function(b){b=b.split("=");r[b[0]]=null==b[1]?!0:b[1]}));var F,w;for(w in b){f=b[w];var u=f.path;if(F=v.match(f.regexPath)){x=w;-1!==u.indexOf(":")&&(k={},F.shift(),u.replace(/:([^\/]+)/g,function(b,c){k[c]=F.shift()}));break}}}else{x=f;f=b[x];var u=c+f.path,L=f.vars||{},H=/^[^\/]+$/,m=-1!==u.indexOf(":")?v=u.replace(/:([^\/]+)/g,
function(b,c){if((L[c]||H).test(k[c]))return k[c]+="";throw Error("Invalid value for route '"+u+"' segment '"+c+"': '"+k[c]+"'");}):v=u;if(r){var m=m+"?",E;for(E in r)m+=E+(!0!==r[E]?"="+r[E]:"")+"&";m=m.slice(0,-1)}m+=t?"#"+t:""}return{href:m,name:x,path:v,segs:k,hash:t,query:r}}function t(b,c){for(var f in b){var k=b[f];k.regexPath=new RegExp("^"+c+k.path.replace(/:([^\/]+)/g,function(b,c){var f=""+k.vars[c];return"("+f.substring(1,f.lastIndexOf("/"))+")"})+"$")}}var c=[],b=null,v=!1,k="";u.route=
function(g,n){function f(){var b=location,b=v?b.href.substr(b.origin.length):b.hash.substr(1)||"/";return w(A,k,b)}var u=null,r={href:function(b,c,f,g,t){var n=w(A,k,b,c,f,g);return v?(b=function(b){r["goto"](n,null,null,null,t);b.preventDefault()},b.href=n.href,b):"#"+n.href},config:function(b){(v=b.useHist)&&(k=b.root||"");u=b.init||null},refresh:function(){r["goto"](f(),null,null,null,!0)},"goto":function(f,g,n,r,t){t=t||z;f.href||(f=w(A,k,f,g,n,r));if(!1===f.name)console.log("Could not find route");
else{g=null;for(n=0;n<c.length;n++)if(c[n].href===f.href){g=n;break}null===g&&(c.splice(b+1,1E4),c.push(f),g=c.length-1);f=c[b];n=c[g];r=!0;null!==b&&(r=(r=A[f.name].onexit)?r.apply(null,(f?[f.segs,f.query,f.hash]:[]).concat(n)):!0);if(!1!==r&&!1!==A[n.name].onenter.apply(null,(n?[n.segs,n.query,n.hash]:[]).concat(f))){if(v)history[t?"replaceState":"pushState"](null,"title",n.href);b=g}z=!1}},location:function(){return z?f():c[b]}},z=!0,A=g(r,n);t(A,k);window.onhashchange=window.onpopstate=function(b){(v||
"popstate"!=b.type)&&r["goto"](f(),null,null,null,!0)};u&&u();return r}})(domvm);
