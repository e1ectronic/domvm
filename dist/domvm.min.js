/*
 https://github.com/leeoniya/domvm
*/
("undefined"!==typeof global?global:this).domvm={};(function(v){var x="undefined"==typeof window?{}:window,r={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,zoom:!0},n={TYPE_ELEM:1,TYPE_TEXT:2,isArr:function(b){return b instanceof
Array},isVal:function(b){b=typeof b;return"string"===b||"number"===b},isObj:function(b){return"object"===typeof b&&null!==b&&!n.isArr(b)},isFunc:function(b){return"function"===typeof b},isProm:function(b){return"object"===typeof b&&n.isFunc(b.then)},execAll:function(b,g){b&&(n.isArr(b)?b:[b]).forEach(function(b){return b.apply(null,g)})},insertArr:function(b,g,f,e){b.splice.apply(b,[f,e].concat(g))},isEvProp:function(b){return"on"===b.substr(0,2)},camelDash:function(b){return b.replace(/([a-z])([A-Z])/g,
"$1-$2").toLowerCase()},autoPx:function(b,g){return isNaN(g)||r[b]?g:g+"px"},indexOfKey:function(b,g,f,e){for(f=0;f<g.length;f++)if(g[f].key===b)return f;return-1},raft:function(b){function g(){f=0;b.apply(e,w)}if(!x.requestAnimationFrame)return b;var f,e,w;return function(){e=this;w=arguments;f||(f=x.requestAnimationFrame(g))}}};v.util=n})(domvm);(function(v){function x(a,c){return!1===c?null:null==a||null!=c&&!0!==c?c:a}function r(a,c,y,u,d,A){function k(a,c,d){if(d)a[c]=a[c]||[],a[c].push(d);else for(var b in c)a[b]=a[b]||[],a[b].push(c[b])}function h(a,c,b){d=a;A=c;m.update(b,!1);return p(0,!1)}function p(a,u){if(a){for(var h=m;a--&&h.parent;)h=h.parent;h.redraw(0,!0);return h.vm}m.hooks&&l.execAll(m.hooks.willRedraw);m.refs={};var h=m.node,k=m.render.call(m.api,m,c,y),k=f(k,d,A,m);k.vm=m;m.node=k;for(var g=l.isVal(y)&&"^"===y[0]?y.substr(1):
l.isVal(k.ref)&&"^"===k.ref[0]?k.ref.substr(1):null,t=d;t;)t.vm&&(m.parent||(m.parent=t.vm),null!==g&&(t.vm.refs[g]=k)),t=t.parent;if((g=h)&&(k.type!==h.type||k.tag!==h.tag))var g=null,q=!0;e(k,g);d&&(d.body[A]=k);!1!==u&&(h&&b(h),!h&&E||w(k,null,k.el),q&&(h.el.parentNode.replaceChild(k.el,h.el),h.el=null));Promise.resolve().then(function(){m.hooks&&l.execAll(m.hooks.didRedraw)});return m}function g(a){m.hooks&&l.execAll(m.hooks.willUnmount);if(d)if(a){for(a=A+1;a<d.body.length;a++){var c=d.body[a];
c.idx=a-1;c.vm&&c.vm.updIdx(c.idx)}d.body.splice(A,1)}else d.body[A]=null;b(m.node,!0);m.node.vm=null;m.hooks&&l.execAll(m.hooks.didUnmount)}var E=!d;l.isArr(a)&&(c=a[1],y=a[2],u=a[3],a=a[0]);y=x(c,y);var m={api:{},node:null,view:[a,y],model:c,opts:u||{},render:null,update:function(a,d){null==a||null!=y&&(l.isVal(y)||y===c)||(c=m.model=a);return!1!==d?p(0):m},on:function(a,c){k(m.events,a,c)},hook:function(a,c){m.hooks=m.hooks||{};k(m.hooks,a,c)},events:{},hooks:null,redraw:D.useRaf?l.raft(p):p,patch:function(a,
c){var d=a.parent,b=e(f(c,d,a.idx,m),a);d.body[a.idx]=b},emit:function(a){for(var c=Array.prototype.slice.call(arguments,1),d=m;d;){if(d.events[a]){l.execAll(d.events[a],c);break}d=d.parent}},refs:{},parent:null,mount:function(a,c){m.hooks&&l.execAll(m.hooks.willMount);c&&(a.textContent="");w(m.node,c?a:null);c||a.insertBefore(m.node.el,null);m.hooks&&l.execAll(m.hooks.didMount);return m},attach:function(a){n(m.node,a);return m},unmount:function(){z(m.hooks,"Unmount",g,[])},moveTo:h,updIdx:function(a){A=
a}};u&&u.hooks&&m.hook(u.hooks);l.execAll(C,[m]);m.render=a.call(m.api,m,c,y);return d?h(d,A):p(0)}function n(a,c){a.el=c;if(l.isArr(a.body))for(var b=0;b<a.body.length;b++)n(a.body[b],c.childNodes[b])}function b(a,c){l.isArr(a.body)&&(a.body.forEach(function(a,c){a&&(a.vm&&!a.moved?a.vm.unmount():b(a,!0))}),a.body=null);a.vm=null;c&&a.el&&a.el.parentNode&&z(a.hooks,"Remove",g,[a])}function g(a){a.el.parentNode.removeChild(a.el);a.el=null}function f(a,c,b,u){var d=a;a={type:null,key:null,ref:null,
idx:null,parent:null,moved:!1,hooks:null,tag:null,ns:null,guard:!1,raw:!1,props:null,el:null,hasKeys:!1,body:null};l.isFunc(d)&&(d=d());if(l.isArr(d)&&d.length){a.type=l.TYPE_ELEM;if(1<d.length){var e=1;l.isObj(d[1])&&(a.props=d[1],e=2);a.body=d.length==e+1?l.isVal(d[e])?d[e]:l.isFunc(d[e])?d[e]():d.slice(e):d.slice(e)}d=d[0];if(/[.#]/.test(d)){if(d=L(d),a.tag=d.tag,d.id||d["class"])a.props=a.props||{},a.props.id=d.id,a.props["class"]=d["class"]}else a.tag=d;if(a.props){var d=a.props,k;for(k in d)l.isEvProp(k)?
d[k]=E(d[k],u.opts.evctx||u.model||null,a,u):l.isFunc(d[k])&&("href"==k?(d.onclick=d[k],d.href=d[k].path):d[k]=d[k]());if(l.isObj(d.style))for(var h in d.style)k=d.style[h],l.isFunc(k)&&(d.style[h]=k());l.isObj(d._hooks)&&(a.hooks=d._hooks,d._hooks=null);a.key=l.isVal(d._key)?d._key:l.isVal(d._ref)?d._ref:l.isVal(d.id)?d.id:l.isVal(d.name)?d.name:null;d._ref&&(a.ref=d._ref);d._raw&&(a.raw=!0);d._data&&(a.data=d._data);d._guard&&(a.guard=!0);d._ref=d._key=d._raw=d._data=d._guard=null}}else l.isVal(d)&&
(a.type=l.TYPE_TEXT,a.body=d);null!==a.ref&&(u.refs[a.ref]=a);a.parent=c;a.idx=b;a.ns=c&&c.ns?c.ns:"svg"===a.tag||"math"===a.tag?a.tag:null;if(l.isArr(a.body))for(c=0,b=a.body.length;c<b;c++){h=a.body[c];var d=k=null,w=e=!1;l.isFunc(h)&&(h=h());if(null==h)e=!0;else{var g=l.isArr(h),p=g?!1:l.isObj(h);if(g)h.length?l.isArr(h[0])?w=!0:l.isFunc(h[0])?k=h[2]:(d=f(h,a,c,u),k=d.key):e=!0;else if(p)if(l.isFunc(h.redraw))h.moveTo(a,c),d=h.node,k=h.view[1];else{a.body[c--]=""+h;continue}else""===h?e=!0:0<c&&
a.body[c-1].type===l.TYPE_TEXT?(a.body[c-1].body+=""+h,e=!0):d=f(""+h,a,c,u)}e||w?(w?l.insertArr(a.body,h,c,1):a.body.splice(c,1),b=a.body.length,c--):(null!=k&&(a.hasKeys=!0),a.body[c]=d||h)}return a}function e(a,c){c&&z(a.hooks,"Recycle",t,[c,a]);if(l.isArr(a.body)){var b=0;a.body.forEach(function(u,d){var f=l.isArr(u);if(c){var k=q(u,a,c,b);if(null!==k){var h=k[0],k=k[1];h===b&&b++;h=c.body[h];f&&h.vm?2===k?h.vm.moveTo(a,d,u[1]):1===k&&r(u[0],u[1],u[2],u[3],a,d):a.body[d]=e(u,h);return}}f?r(u[0],
u[1],u[2],u[3],a,d):a.body[d]=e(u)})}return a}function w(a,c,b){var e=!a.el;if(a.type==l.TYPE_ELEM)if(e&&(a.el=c&&c.nodeName?c:a.ns?F.createElementNS(M[a.ns],a.tag):F.createElement(a.tag),a.props&&I(a)),l.isArr(a.body)){c=0;for(var d=a.el.firstChild;c<a.body.length;c++)d=w(a.body[c],null,d)?d:d.nextSibling||null}else l.isVal(a.body)&&(a.raw?a.el.innerHTML=a.body:e&&(a.el.textContent=a.body));else a.type==l.TYPE_TEXT&&e&&(a.el=F.createTextNode(a.body));a.el._node=a;if(b===a.el)return!1;if((c=a.parent)&&
c.el)return z(a.hooks,e?"Insert":"Reinsert",p,[a,b]),!0}function p(a,c){a.parent.el.insertBefore(a.el,c)}function q(a,c,b,e,d){var f=l.isArr(a),k=f?a[2]||null:a.key,h=b.hasKeys,w=c.hasKeys;b=b.body;c=c.body;if(null!==k&&h&&(k=l.indexOfKey(k,b),-1<k))return[k,2];e=e||0;if(e>b.length-1)return null;d=0===d?0:d||b.length-1;for(k=null;e<=d;e++)if(h=b[e],null!==h&&h.el)if(f&&h.vm){if(h.vm.view[0]===a[0]){if(h.vm.view[1]===x(a[1],a[2]))return[e,2];var g=!1;if(D.viewScan)for(var p=0;p<c.length;p++){var m=
c[p];if(!m.el&&m.vm&&m.vm.view[0]===h.vm.view[0]&&m.vm.view[1]===h.vm.view[1]){g=!0;break}}g||k||!w||-1!=l.indexOfKey(h.key,c)||(k=[e,1])}}else if(a.type===h.type&&(a.type===l.TYPE_TEXT||null!==a.tag&&a.tag===h.tag)&&(null===h.key||!w||-1==l.indexOfKey(h.key,c)))return[e,1];return k}function t(a,c){c.el=a.el;a.el=null;if(c.type===l.TYPE_TEXT&&c.body!==a.body)c.el.nodeValue=c.body;else{I(c,a);var b=!l.isArr(c.body),e=!l.isArr(a.body);b&&c.body!==a.body?e&&c.el.firstChild?c.el.firstChild.nodeValue=
c.body:c.raw?c.el.innerHTML=c.body:c.el.textContent=c.body:e&&!b&&(c.el.textContent="");a.moved=!0}}function z(a,c,b,e,d,f){if(a){var k=a["will"+c];l.isArr(k)&&(k=k[0]);var h=a["did"+c];l.isArr(h)&&(h=h[0]);a=function(){b.apply(null,e);h&&h.apply(null,f||d||e)};k?(k=k.apply(null,d||e),l.isProm(k)?k.then(a):a()):a()}else b.apply(null,e)}function L(a){if(a in G)return G[a];var c={tag:null,id:null,"class":null};c.tag=a.replace(/^([\w\-]+)?(?:#([\w\-]+))?((?:\.[\w\-]+)+)?$/,function(a,b,d,e){d&&(c.id=
d);e&&(c["class"]=e.replace(/\./g," ").trim());return b||"div"});return G[a]=c}function E(a,c,b,e){return function(d){var f;if(l.isFunc(a))f=a.call(c,d,b,e);else if(l.isObj(a))for(var k in a)d.target.matches(k)&&(f=a[k].call(c,d,b,e));!1===f&&(d.preventDefault(),d.stopPropagation());e.opts.hasOwnProperty("watch")&&e.opts.watch.fire({vm:e})}}function I(a,c){var b=!c;c=c||{};if(c.props||a.props){var e=c.props||{},d=a.props||{},f=e.style,k=d.style;if(l.isObj(f)||l.isObj(k))J(a.el,f||{},k||{},H,B,a.ns,
b),e.style=d.style=null;J(a.el,e,d,N,K,a.ns,b);k&&(d.style=k)}}function J(a,c,b,e,d,f,k){for(var h in b)null!==b[h]&&(h in c&&b[h]===c[h]||e(a,h,b[h],f,k));for(h in c)null!==c[h]&&(h in b||d(a,h,f,k))}function H(a,c,b){a.style[c]=l.autoPx(c,b)}function B(a,c){a.style[c]=""}function N(a,c,b,e,d){"."===c[0]?(c=c.substr(1),"svg"===e?a[c].baseVal=b:a[c]=b):"class"===c?a.className=b:"id"===c||l.isEvProp(c)?a[c]=b:!1===b?K(a,c,e,d):(!0===b&&(b=""),a.setAttribute(c,b))}function K(a,c,b,e){e||("."===c[0]?
(c=c.substr(1),"svg"===b?a[c].baseVal=null:a[c]=null):"class"===c?a.className="":"id"===c||l.isEvProp(c)?a[c]=null:a.removeAttribute(c))}var M={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},G={},F="undefined"==typeof document?{}:document,D={useRaf:!0,viewScan:!1,useDOM:!1};v.view=r;v.view.config=function(a){D=a};var C=null;v.view.extend=function(a,c){C=!C||c?[]:C;C.push(a)};var l=v.util;return v})(domvm);(function(v){var x=/^(?:img|br|input|col|link|meta|area|base|command|embed|hr|keygen|param|source|track|wbr)$/,r=v.util;v.html=function(n){var b="";switch(n.type){case r.TYPE_ELEM:b+="<"+n.tag;if(n.props){var g=r.isVal(n.props.style)?n.props.style:"",f=r.isObj(n.props.style)?n.props.style:null;if(f)for(var e in f)null!==f[e]&&(g+=r.camelDash(e)+": "+r.autoPx(e,f[e])+"; ");for(e in n.props)r.isEvProp(e)||(f=n.props[e],r.isFunc(f)&&(f=f()),r.isObj(f)||(!0===f?b+=" "+e:!1!==f&&null!==f&&"."!==e[0]&&
(b+=" "+e+'="'+f+'"')));g.length&&(b+=' style="'+g.trim()+'"')}if(n.ns&&"svg"!==n.tag&&"math"!==n.tag&&!n.body)return b+"/>";b+=">";break;case r.TYPE_TEXT:return n.body}x.test(n.tag)||(r.isArr(n.body)?n.body.forEach(function(e){b+=v.html(e)}):b+=n.body||"",b+="</"+n.tag+">");return b}})(domvm);(function(v){var x=v.util;v.watch=function(r){function n(){}function b(b,g,p,q,t){t=t||{};t.method=(t.method||b).toUpperCase();if(null!==p){var z=Object.prototype.toString.call(p);"[object Array]"===z||"[object Object]"===z?(t.headers=t.headers||new Headers,t.headers.set("Content-Type","application/json"),t.body=JSON.stringify(p)):t.body=""+p}var z=q,r=n;q instanceof Array&&(z=q[0],q[1]&&(r=q[1]));q=fetch(g,t).then(function(b){if(200<=b.status&&300>b.status)return b;var e=Error(b.status+": "+b.statusText);
e.data=b;return Promise.reject(e)}).then(function(b){switch(b.headers.get("Content-Type").split("; ")[0]){case "application/json":return b.json();case "text/plain":return b.text();default:return b}}).then(z,r).then(function(b){!1!==b&&f.fire();return b},function(b){f.fire();return b});q._fetchArgs=[b,g,p,[z,r],t];return q}var g=[];x.isFunc(r)&&g.push(r);var f={on:function(b){g.push(b);return f},off:function(b){g.splice(g.indexOf(b),1);return f},fire:x.raft(function(){x.execAll(g,arguments);return f}),
prop:function(e,g){var p=e,q=function(b,e){arguments.length&&b!==p&&(p=b,!1!==e&&f.fire());return p};if(g&&g.then){q.update=n;if(g._fetchArgs){var t=g._fetchArgs[3];g._fetchArgs[3]=[function(b){return q(t[0]?t[0](b):b)},t[1]];q.update=function(){b.apply(null,g._fetchArgs)}}g.then(q)}return q.toString=q},sync:function(b,f,g){var q=b,t=f;"string"==typeof b&&(q=function(f){return"e."===b.substr(0,2)?f[b.substr(2)]:f.target[b]});return function(b){var e=this!==window?this:null;e&&"string"==typeof f&&
(t=function(b,g){var p=e[f];e[f]=b;r&&b!==p&&!1!==g&&r()});t(q(b),g)}},get:function(e,f,g){return b("get",e,null,f,g)},"delete":function(e,f,g){return b("delete",e,null,f,g)},post:function(e,f,g,q){return b("post",e,f,g,q)},put:function(e,f,g,q){return b("put",e,f,g,q)},patch:function(e,f,g,q){return b("patch",e,f,g,q)}};return f}})(domvm);(function(v){function x(b,g,f){if("/"===g[0]){var e=g;g=null;var n,p;for(p in b)if(n=e.match(b[p].regexPath)){f=n.slice(1);g=p;break}null===g&&(g="_noMatch")}else e=r(b,g,f);return{name:g,route:b[g],params:f,path:e}}function r(b,g,f){var e=b[g];b=e.path;if(f&&-1!==b.indexOf(":")){f=f.slice();var n=!0;b=b.replace(/:([^\/]+)/g,function(b,g){var t=f.shift();if(e.params&&e.params[g]){if((""+t).match(e.params[g]))return t;n=!1}else return t});return n?b:n}return b}function n(b){for(var g in b){var f=b[g];
f.regexPath=new RegExp("^"+f.path.replace(/:([^\/]+)/g,function(b,g){var p=""+f.params[g];return"("+p.substring(1,p.lastIndexOf("/"))+")"})+"$")}}v.route=function(b,g){var f={href:function(b,e,g){var p=function(p){f["goto"](b,e,g);p.preventDefault()};p.path=r(q,b,e);return p},refresh:function(){f["goto"](window.location.pathname)},"goto":function(b,f,g){f=f||[];g=g||e;var n=x(q,b,f),r=n.path;b=n.name;f=n.params;if(!1===r)console.log("Could not find route");else{for(var n=null,v=0;v<p.length;v++)if(p[v].path===
r){n=v;break}null===n&&(p.splice(w+1,1E4),p.push({name:b,route:q[b],params:f,path:r}),n=p.length-1);var v=p[w],H=p[n];Array.prototype.slice.call(arguments);var B=!0;null!==w&&(B=(B=p[w].route.onexit)?B.apply(null,[{to:H}].concat(v?v.params:[])):!0);!1!==B&&!1!==p[n].route.onenter.apply(null,[{from:v}].concat(f))&&(history[g?"replaceState":"pushState"]([b,f],"title",r),w=n);e=!1}},current:function(){return e?x(q,window.location.pathname):p[w]}},e=!0,w=null,p=[],q=b(f,g);n(q);window.onpopstate=function(b){f["goto"].apply(null,
b.state.concat(!0))};return f}})(domvm);
