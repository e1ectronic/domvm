/*
 https://github.com/leeoniya/domvm
*/
("undefined"!==typeof global?global:this).domvm={};(function(u){var x="undefined"==typeof window?{}:window,t={TYPE_ELEM:1,TYPE_TEXT:2,isArr:function(b){return b instanceof Array},isVal:function(b){b=typeof b;return"string"===b||"number"===b},isObj:function(b){return"object"===typeof b&&null!==b&&!t.isArr(b)},isFunc:function(b){return"function"===typeof b},isProm:function(b){return"object"===typeof b&&t.isFunc(b.then)},execAll:function(b,k){b&&b.forEach(function(b){return b.apply(null,k)})},insertArr:function(b,k,r,m){b.splice.apply(b,[r,m].concat(k))},
isEvProp:function(b){return"on"===b.substr(0,2)},camelDash:function(b){return b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},raft:function(b){function k(){r=0;b.apply(m,g)}if(!x.requestAnimationFrame)return b;var r,m,g;return function(){m=this;g=arguments;r||(r=x.requestAnimationFrame(k))}}};u.util=t})(domvm);(function(u){function x(a,d,y,e,c,z,q){function h(a,c,d){if(d)a[c]=a[c]||[],a[c].push(d);else for(var e in c)a[e]=a[e]||[],a[e].push(c[e])}function f(a,c,d){z=a;q=c;return k(d,!1)}function k(a,c){p.hooks&&l.execAll(p.hooks.willRedraw);p.imp=null!=a?a:e;p.refs={};var h=p.node,f=p.render.call(d,p.imp),f=r(f,z,q,p);f.key=l.isVal(y)?y:f.key;f.vm=p;p.node=f;var n=h;if(h&&(f.type!==h.type||f.tag!==h.tag))var n=null,v=!0;m(f,n);z&&(z.body[q]=f);!1!==c&&(h&&b(h),!h&&A||g(f,null,f.el),v&&(h.el.parentNode.replaceChild(f.el,
h.el),h.el=null));Promise.resolve().then(function(){var a=p,c;for(c in a.refs)a.refs[c]=a.refs[c].el;p.hooks&&l.execAll(p.hooks.didRedraw)});return p}function n(a){p.hooks&&l.execAll(p.hooks.willUnmount);if(z)if(a){for(a=q+1;a<z.body.length;a++){var c=z.body[a];c.idx=a-1;c.vm&&c.vm.updIdx(c.idx)}z.body.splice(q,1)}else z.body[q]=null;b(p.node,!0);p.node.vm=null;p.hooks&&l.execAll(p.hooks.didUnmount)}function v(a){var c=null,d=a.split(":");2==d.length&&(a=d[0],c=+d[1]);var d=Array.prototype.slice.call(arguments,
1),e=p.node;if(null!==c){for(;c&&e.parent;)e=e.parent,e.vm&&c--;(c=(c=e.vm?e.vm.events:null)?c[a]:null)&&c.apply(null,d)}else for(;e&&(!e.vm||!(c=(c=e.vm.events)?c[a]:null)||!1!==c.apply(null,d));)e=e.parent}var A=!z;l.isArr(a)&&(d=a[1],y=a[2],e=a[3],c=a[4],a=a[0]);!1===y&&(e=d,y=d=null);var p={exp:{},imp:e||{},node:null,view:[a,d,y],opts:c||{},render:null,on:function(a,c){h(p.events,a,c)},hook:function(a,c){p.hooks=p.hooks||{};h(p.hooks,a,c)},events:{},hooks:null,redraw:C.useRaf?l.raft(k):k,patch:function(a,
c){var d=a.parent,e=m(r(c,d,a.idx,p),a);d.body[a.idx]=e;var h=e.key;l.isVal(h)&&(d.keyMap[h]=e)},emit:v,refs:{},mount:function(a,c){p.hooks&&l.execAll(p.hooks.willMount);c&&(a.textContent="");g(p.node,c?a:null);c||a.insertBefore(p.node.el,null);p.hooks&&l.execAll(p.hooks.didMount);return p},attach:function(a){t(p.node,a);return p},unmount:function(){w(p.hooks,"Unmount",n,[])},moveTo:f,updIdx:function(a){q=a}};p.events._redraw=p.redraw;p.render=a.call(p.exp,p,d,y,e);v.redraw=function(a){a=l.isVal(a)?
a:1E3;v("_redraw:"+a)};return z?f(z,q,e):k(e)}function t(a,d){a.el=d;if(l.isArr(a.body))for(var y=0;y<a.body.length;y++)t(a.body[y],d.childNodes[y])}function b(a,d){l.isArr(a.body)&&(a.body.forEach(function(a,d){a&&(a.vm&&!a.moved?a.vm.unmount():b(a,!0))}),a.body=null);a.vm=null;d&&a.el&&a.el.parentNode&&w(a.hooks,"Remove",k,[a])}function k(a){a.el.parentNode.removeChild(a.el);a.el=null}function r(a,d,y,e){var c=a;a={type:null,key:null,ref:null,idx:null,parent:null,moved:!1,hooks:null,tag:null,ns:null,
guard:!1,raw:!1,props:null,el:null,keyMap:null,body:null};l.isFunc(c)&&(c=c());if(l.isArr(c)&&c.length){a.type=l.TYPE_ELEM;if(1<c.length){var b=1;l.isObj(c[1])&&(a.props=c[1],b=2);a.body=c.length==b+1?l.isVal(c[b])?c[b]:l.isFunc(c[b])?c[b]():c.slice(b):c.slice(b)}c=c[0];if(/[.#]/.test(c)){if(c=A(c),a.tag=c.tag,c.id||c["class"])a.props=a.props||{},a.props.id=c.id,a.props["class"]=c["class"]}else a.tag=c;if(a.props){var c=a.props,q;for(q in c)l.isEvProp(q)?c[q]=H(c[q],e.opts.evctx||e.view[1]||e.imp||
null,a,e):l.isFunc(c[q])&&("href"==q?(c.onclick=c[q],c.href=c[q].url):c[q]=c[q]());if(l.isObj(c.style))for(var h in c.style)q=c.style[h],l.isFunc(q)&&(c.style[h]=q());l.isObj(c._hooks)&&(a.hooks=c._hooks,c._hooks=null);a.key=l.isVal(c._key)?c._key:l.isVal(c._ref)?c._ref:l.isVal(c.id)?c.id:l.isVal(c.name)?c.name:null;c._ref&&(a.ref=c._ref);c._raw&&(a.raw=!0);c._guard&&(a.guard=!0);c._ref=c._key=c._raw=c._guard=null}}else l.isVal(c)&&(a.type=l.TYPE_TEXT,a.body=c);null!==a.ref&&(e.refs[a.ref]=a);a.parent=
d;a.idx=y;a.ns=d&&d.ns?d.ns:"svg"===a.tag||"math"===a.tag?a.tag:null;if(l.isArr(a.body)){d={};y=!1;h=0;for(q=a.body.length;h<q;h++){var c=a.body[h],f=b=null,g=!1,k=!1;l.isFunc(c)&&(c=c());if(null==c)g=!0;else{var n=l.isArr(c),v=n?!1:l.isObj(c);if(n)c.length?l.isArr(c[0])?k=!0:l.isFunc(c[0])?b=c[2]:(f=r(c,a,h,e),b=f.key):g=!0;else if(v)if(l.isFunc(c.redraw))c.moveTo(a,h),f=c.node,b=c.view[2];else{a.body[h--]=""+c;continue}else""===c?g=!0:0<h&&a.body[h-1].type===l.TYPE_TEXT?(a.body[h-1].body+=""+c,
g=!0):f=r(""+c,a,h,e)}g||k?(k?l.insertArr(a.body,c,h,1):a.body.splice(h,1),q=a.body.length,h--):(l.isVal(b)&&(d[b]=h,y=!0),a.body[h]=f||c)}y&&(a.keyMap=d)}return a}function m(a,d){d&&w(a.hooks,"Recycle",f,[d,a]);if(l.isArr(a.body)){var b=0;a.body.forEach(function(e,c){var f=l.isArr(e);if(d){var q=n(e,a,d,b);if(null!==q){var h=q[0],q=q[1];h===b&&b++;h=d.body[h];f&&h.vm?2===q?h.vm.moveTo(a,c,e[3]):1===q&&x(e[0],e[1],e[2],e[3],e[4],a,c):a.body[c]=m(e,h);return}}f?x(e[0],e[1],e[2],e[3],e[4],a,c):a.body[c]=
m(e)})}return a}function g(a,d,b){var e=!a.el;if(a.type==l.TYPE_ELEM)if(e&&(a.el=d&&d.nodeName?d:a.ns?D.createElementNS(I[a.ns],a.tag):D.createElement(a.tag),a.props&&F(a)),l.isArr(a.body)){d=0;for(var c=a.el.firstChild;d<a.body.length;d++)c=g(a.body[d],null,c)?c:c.nextSibling||null}else e&&l.isVal(a.body)&&(a.raw?a.el.innerHTML=a.body:a.el.textContent=a.body);else a.type==l.TYPE_TEXT&&e&&(a.el=D.createTextNode(a.body));a.el._node=a;if(b===a.el)return!1;if((d=a.parent)&&d.el)return w(a.hooks,e?"Insert":
"Reinsert",v,[a,b]),!0}function v(a,d){a.parent.el.insertBefore(a.el,d)}function n(a,d,b,e,c){var f=l.isArr(a),q=f?a[2]||null:a.key,h=b.keyMap,g=d.keyMap;b=b.body;d=d.body;if(null!==q&&h&&l.isVal(h[q]))return[h[q],2];e=e||0;if(e>b.length-1)return null;c=0===c?0:c||b.length-1;for(q=null;e<=c;e++)if(h=b[e],null!==h&&h.el)if(f&&h.vm){if(h.vm.view[0]===a[0]){if(h.vm.view[1]===a[1])return[e,2];var k=!1;if(C.viewScan)for(var n=0;n<d.length;n++){var v=d[n];if(!v.el&&v.vm&&v.vm.view[0]===h.vm.view[0]&&v.vm.view[1]===
h.vm.view[1]){k=!0;break}}k||q||!g||l.isVal(g[h.key])||(q=[e,1])}}else if(!(a.type!==h.type||a.type!==l.TYPE_TEXT&&(null===a.tag||a.tag!==h.tag)||null!==h.key&&g&&l.isVal(g[h.key])))return[e,1];return q}function f(a,d){d.el=a.el;a.el=null;if(d.type===l.TYPE_TEXT&&d.body!==a.body)d.el.nodeValue=d.body;else{F(d,a);var b=!l.isArr(d.body),e=!l.isArr(a.body);b&&d.body!==a.body?e&&d.el.firstChild?d.el.firstChild.nodeValue=d.body:d.raw?d.el.innerHTML=d.body:d.el.textContent=d.body:e&&!b&&(d.el.textContent=
"");a.moved=!0}}function w(a,d,b,e,c,f){if(a){var g=a["will"+d];l.isArr(g)&&(g=g[0]);var h=a["did"+d];l.isArr(h)&&(h=h[0]);a=function(){b.apply(null,e);h&&h.apply(null,f||c||e)};g?(g=g.apply(null,c||e),l.isProm(g)?g.then(a):a()):a()}else b.apply(null,e)}function A(a){if(a in E)return E[a];var d={tag:null,id:null,"class":null};d.tag=a.replace(/^([\w\-]+)?(?:#([\w\-]+))?((?:\.[\w\-]+)+)?$/,function(a,b,c,g){c&&(d.id=c);g&&(d["class"]=g.replace(/\./g," ").trim());return b||"div"});return E[a]=d}function H(a,
d,b,e){return function(c){var g;if(l.isFunc(a))g=a.call(d,c,b,e);else if(l.isObj(a))for(var f in a)c.target.matches(f)&&(g=a[f].call(d,c,b,e));!1===g&&(c.preventDefault(),c.stopPropagation());e.opts.hasOwnProperty("watch")&&e.opts.watch.fire({vm:e})}}function F(a,d){var b=!d;d=d||{};if(d.props||a.props){var e=d.props||{},c=a.props||{},g=e.style,f=c.style;if(l.isObj(g)||l.isObj(f))B(a.el,g||{},f||{},J,K,a.ns,b),e.style=c.style=null;B(a.el,e,c,L,G,a.ns,b);f&&(c.style=f)}}function B(a,d,b,e,c,g,f){for(var h in b)null!==
b[h]&&(h in d&&b[h]===d[h]||e(a,h,b[h],g,f));for(h in d)null!==d[h]&&(h in b||c(a,h,g,f))}function J(a,d,b){a.style[d]=isNaN(b)||M[d]?b:b+"px"}function K(a,d){a.style[d]=""}function L(a,d,b,e,c){"."===d[0]?(d=d.substr(1),"svg"===e?a[d].baseVal=b:a[d]=b):"class"===d?a.className=b:"id"===d||l.isEvProp(d)?a[d]=b:!1===b?G(a,d,e,c):(!0===b&&(b=""),a.setAttribute(d,b))}function G(a,d,b,e){e||("."===d[0]?(d=d.substr(1),"svg"===b?a[d].baseVal=null:a[d]=null):"class"===d?a.className="":"id"===d||l.isEvProp(d)?
a[d]=null:a.removeAttribute(d))}var I={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},E={},D="undefined"==typeof document?{}:document,M={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,
transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,zoom:!0},C={useRaf:!0,viewScan:!1,useDOM:!1};u.view=x;u.config=function(a){C=a};var l=u.util;return u})(domvm);(function(u){var x=/^(?:img|br|input|col|link|meta|area|base|command|embed|hr|keygen|param|source|track|wbr)$/,t=u.util;u.html=function(b){var k="";switch(b.type){case t.TYPE_ELEM:k+="<"+b.tag;if(b.props){var r=t.isVal(b.props.style)?b.props.style:"",m=t.isObj(b.props.style)?b.props.style:null;if(m)for(var g in m)null!==m[g]&&(r+=t.camelDash(g)+": "+m[g]+";");for(g in b.props)t.isEvProp(g)||(m=b.props[g],t.isFunc(m)&&(m=m()),t.isObj(m)||(!0===m?k+=" "+g:!1!==m&&null!==m&&"."!==g[0]&&(k+=" "+g+'="'+
m+'"')));r.length&&(k+=' style="'+r+'"')}if(b.ns&&"svg"!==b.tag&&"math"!==b.tag&&!b.body)return k+"/>";k+=">";break;case t.TYPE_TEXT:return b.body}x.test(b.tag)||(t.isArr(b.body)?b.body.forEach(function(b){k+=u.html(b)}):k+=b.body||"",k+="</"+b.tag+">");return k}})(domvm);(function(u){var x=u.util;u.watch=function(t){function b(){}function k(g,k,n,f,w){w=w||{};w.method=(w.method||g).toUpperCase();if(null!==n){var A=Object.prototype.toString.call(n);"[object Array]"===A||"[object Object]"===A?(w.headers=w.headers||new Headers,w.headers.set("Content-Type","application/json"),w.body=JSON.stringify(n)):w.body=""+n}var A=f,r=b;f instanceof Array&&(A=f[0],f[1]&&(r=f[1]));f=fetch(k,w).then(function(b){if(200<=b.status&&300>b.status)return b;var g=Error(b.statusText);g.resp=
b;throw g;}).then(function(b){switch(b.headers.get("Content-Type").split("; ")[0]){case "application/json":return b.json();case "text/plain":return b.text();default:return b}}).then(A,r).then(function(b){!1!==b&&m.fire();return b},b);f._fetchArgs=[g,k,n,[A,r],w];return f}var r=[];x.isFunc(t)&&r.push(t);var m={on:function(b){r.push(b);return m},off:function(b){r.splice(r.indexOf(b),1);return m},fire:function(){x.execAll(r,arguments);return m},prop:function(g,v){var n=g,f=function(b,g){arguments.length&&
b!==n&&(n=b,!1!==g&&m.fire());return n};if(v&&v.then){f.update=b;if(v._fetchArgs){var w=v._fetchArgs[3];v._fetchArgs[3]=[function(b){return f(w[0]?w[0](b):b)},w[1]];f.update=function(){k.apply(null,v._fetchArgs)}}v.then(f)}return f.toString=f},sync:function(b,k,n){var f=b,m=k;"string"==typeof b&&(f=function(f){return"e."===b.substr(0,2)?f[b.substr(2)]:f.target[b]});return function(b){var g=this!==window?this:null;g&&"string"==typeof k&&(m=function(b,f){var n=g[k];g[k]=b;t&&b!==n&&!1!==f&&t()});m(f(b),
n)}},get:function(b,m,n){return k("get",b,null,m,n)},"delete":function(b,m,n){return k("delete",b,null,m,n)},post:function(b,m,n,f){return k("post",b,m,n,f)},put:function(b,m,n,f){return k("put",b,m,n,f)},patch:function(b,m,n,f){return k("patch",b,m,n,f)}};return m}})(domvm);(function(u){u.route=function(u,t){function b(b,f){var g=v[b],k=g.url;if(f&&-1!==k.indexOf(":")){f=f.slice();var m=!0,k=k.replace(/:([^\/]+)/g,function(b,k){var n=f.shift();if(g.params&&g.params[k]){if((""+n).match(g.params[k]))return n;m=!1}else return n});return m?k:m}return k}var k=!0,r={href:function(){var g=arguments,f=function(b){r["goto"].apply(null,g);b.preventDefault()};f.url=b.apply(null,g);return f},"goto":function(n,f,r){f=f||[];r=r||k;var t=b(n,f);if(!1===t)console.log("Could not find route");
else{for(var u=null,x=0;x<g.length;x++)if(g[x].url===t){u=x;break}null===u&&(g.splice(m+1,1E4),g.push({name:n,route:v[n],params:f,url:t}),u=g.length-1);x=g[u];Array.prototype.slice.call(arguments);var B=!0;null!==m&&(B=g[m].route.onexit.call(null,g[u].params.concat(x)));!1!==B&&!1!==g[u].route.onenter.apply(null,f.concat(g[m]))&&(history[r?"replaceState":"pushState"]([n,f],"title",t),m=u);k=!1}},current:function(){return g[m]}},m=null,g=[],v=u(r,t);window.onpopstate=function(b){r["goto"].apply(null,
b.state.concat(!0))};return r}})(domvm);
