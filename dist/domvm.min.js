/*
 https://github.com/leeoniya/domvm (1.x-dev)
*/
("undefined"!==typeof global?global:this).domvm={};(function(y){var w=("undefined"==typeof window?{}:window).requestAnimationFrame,u={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,zoom:!0},g={TYPE_ELEM:1,
TYPE_TEXT:2,isArr:function(c){return c instanceof Array},isVal:function(c){c=typeof c;return"string"===c||"number"===c},isObj:function(c){return"object"===typeof c&&null!==c&&!g.isArr(c)},isFunc:function(c){return"function"===typeof c},isProm:function(c){return"object"===typeof c&&g.isFunc(c.then)},isElem:function(c){return c instanceof HTMLElement},execAll:function(c,d,k,a,q,r){var z;c&&(g.isArr(c)?c:[c]).forEach(function(c){z=c.call(null,d,k,a,q,r)});return z},repaint:function(c){},insertArr:function(c,
d,k,a){c.splice.apply(c,[k,a].concat(d))},isEvProp:function(c){return"on"===c.substr(0,2)},isDynProp:function(c,d){switch(c){case "input":case "textarea":case "select":case "option":switch(d){case "value":case "checked":case "selected":case "selectedIndex":return!0}}},camelDash:function(c){return c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},autoPx:function(c,d){return isNaN(d)||u[c]?d:d+"px"},cmpArr:function(c,d){var k=c.length;if(k!=d.length)return!1;for(;k--;)if(c[k]!==d[k])return!1;return!0},
deepSet:function(c,d,k,a,q,r){d=d.split(".");var z=d.pop();d.forEach(function(a){c[a]||(c[a]={});c=c[a]});if(g.isFunc(c[z]))c[z](k,a,q,r);else c[z]=k},deepGet:function(c,d){var k=d.split(".");do c=c[k.shift()];while(k.length);return c},keyedIdx:function(c,d,k,a,q){for(a=0;a<d.length;a++)if(q=d[a],q.key===c)if(k){if(q.vm&&q.vm.ident[0]===k)return a}else return a;return-1},raft:function(c){function d(){k=0;c.apply(a,q)}if(!w)return c;var k,a,q;return function(){a=this;q=arguments;k||(k=w(d))}}};y.utils=
g})(domvm);(function(y){function w(b){for(I.repaint&&m.repaint(b);b=J.shift();)b[0].apply(null,b.slice(1))}function u(b,h){return!1===h?null:null==h&&null!=b?b:m.isVal(h)||m.isObj(h)||m.isArr(h)||m.isFunc(h)?h:null}function g(b,h,l,a,B,e){function f(b,h,e){if(e)b[h]=b[h]||[],b[h].push(e);else for(var l in h)b[l]=b[l]||[],b[l].push(h[l])}function n(b,h,l){B=b;e=h;p.update(l,!1);null!=p.node&&(B.body[e]=p.node);return g(0,!1)}function r(b){return null==b?"":b}function g(b,c){c=!1!==c;if(b){for(var a=p;b--&&a.parent;)a=
a.parent;a.redraw(0,!0);return a.vm}(a=p.node)&&d(p,"willRedraw",p);var E=p.refs,f=p.body;p.refs={};p.body=[];var M=p.render.call(p.api,p,h,l),n;if(!1===M||(n=q(M,B,e,p,!0))&&C(a,n))return a.moved=!0,a.wasSame=!0,p.refs=E,p.body=f,p;n.vm=p;p.node=n;E=m.isVal(l)&&"^"===l[0]?l.substr(1):m.isVal(n.ref)&&"^"===n.ref[0]?n.ref.substr(1):null;n.key=null!=l?l:n.key;for(f=B;f;)f.vm&&(p.parent||(p.parent=f.vm,f.vm.body.push(p)),null!==E&&m.deepSet(f.vm.refs,E,n)),f=f.parent;if((E=a)&&(n.type!==a.type||n.tag!==
a.tag))var E=null,v=!0,r=a.el.parentNode;z(n,E);B&&(B.body[e]=n);c&&(a&&k(a),!a&&A||t(n,null,n.el),v&&((r||n.parent.el).insertBefore(n.el,r.childNodes[a.idx]),p.node=n));a&&d(p,"didRedraw",p);c&&a&&J.length&&w(n);return p}var A=!B;m.isArr(b)&&(h=b[1],l=b[2],a=b[3],b=b[0]);l=u(h,l);var p={api:{},node:null,ident:[b,l],model:h,opts:a||{},render:null,update:function(b,e){null==b||l===h&&!m.isVal(l)||(d(p,"willUpdate",p,b),h=p.model=b);return!1!==e?g(0):p},on:function(b,h){f(p.events,b,h)},hook:function(b,
h){p.hooks=p.hooks||{};f(p.hooks,b,h)},events:{},hooks:null,redraw:I.debounce?m.raft(g):g,patch:function(b,h){var e=null!=b.el;if(m.isObj(h)){b.props=b.props||{};var l="class"in h?(r(b["class"])+" "+r(h["class"])).trim():b.props["class"],a="style"in h?h.style:b.props.style;e&&(e=Object.create(b.props),e["class"]=l,e.style=a,e={tag:b.tag,el:b.el,ns:b.ns,props:e},v(e,b));b.props["class"]=l;b.props.style=a}else l=b.parent,e=z(q(h,l,b.idx,p),b),l.body[b.idx]=e},emit:function(b){for(var h=Array.prototype.slice.call(arguments),
e=p,l;e;){if(l=e.events[b]){h[0]=l;m.execAll.apply(null,h);break}e=e.parent}},refs:{},parent:null,body:[],mount:function(b,h){var e=null;h&&(b.textContent="",e=b,b=null);t(p.node,e,null,b);w(p.node);return p},attach:function(b){c(p.node,b);return p},unmount:function(){k(p.node)},moveTo:n,updIdx:function(b){e=b}};a&&a.hooks&&p.hook(a.hooks);m.execAll(H,p);p.render=b.call(p.api,p,h,l);return B?n(B,e):g(0)}function c(b,h){b.el=h;h._node=b;for(var l in b.props){var a=b.props[l],B=m.isEvProp(l)?l:"."===
l[0]?l.substr(1):null;null!==B&&(h[B]=a)}if(m.isArr(b.body))for(l=0;l<b.body.length;l++)c(b.body[l],h.childNodes[l])}function d(b,h,l,a,B,e){if(b&&b.hooks&&(b=b.hooks[h]))if("did"==h.substr(0,3))J.push([m.execAll,b,l,a,B,e]);else return m.execAll(b,l,a,B,e)}function k(b,h){var l=b.el&&!b.moved;if(l){var c=d(b.vm,"willUnmount",b.vm),B=d(b,"willRemove",b),e=c||B;b.removed=!0}b.wasSame?b.wasSame=!1:(m.isArr(b.body)&&b.body.forEach(function(b,l){k(b,h||e)}),h||(e?e.then(function(){a(b,l,!0)}):a(b,l)));
b.moved=!1}function a(b,h,l){null!=b.el&&b.el.parentNode?h&&(b.el.parentNode.removeChild(b.el),b.el=null,f(b),d(b.vm,"didUnmount",b.vm),d(b,"didRemove",b),l&&w(b.parent)):f(b)}function q(b,h,l,a,B){var e=b;b=0<K.length?K.pop():{type:null,key:null,ref:null,idx:null,parent:null,moved:!1,wasSame:!1,removed:!1,hooks:null,tag:null,"class":null,ns:null,guard:!1,raw:!1,props:null,el:null,hasKeys:!1,body:null,data:null,diff:null};m.isFunc(e)&&(e=e());var c=e.length;if(m.isArr(e)&&c){b.type=m.TYPE_ELEM;if(1<
c){var n=1;!m.isObj(e[1])||e[1].redraw||m.isElem(e[1])||(b.props=e[1],n=2);b.body=c==n+1?m.isVal(e[n])?e[n]:m.isFunc(e[n])?e[n]():e.slice(n):e.slice(n)}e=e[0];c=N[e];c||(c=["",""],c={tag:(e.match(/^[-\w]+/)||["div"])[0],id:(e.match(/#([-\w]+)/)||c)[1],"class":(e.match(/\.([-\w.]+)/)||c)[1].replace(/\./g," ")},N[e]=c);b.tag=c.tag;if(c.id||c["class"])e=b.props||{},c.id&&null==e.id&&(e.id=c.id),c["class"]&&(b["class"]=c["class"],e["class"]=c["class"]+(null!=e["class"]?" "+e["class"]:"")),b.props=e;if(b.props){var e=
b.props,f;for(f in e)!m.isEvProp(f)&&m.isFunc(e[f])&&("href"==f?(e.onclick=e[f],e.href=e[f].href):e[f]=e[f]()),m.isDynProp(b.tag,f)&&(e["."+f]=e[f]);if(m.isObj(e.style))for(var d in e.style)f=e.style[d],m.isFunc(f)&&(e.style[d]=f());m.isObj(e._hooks)&&(b.hooks=e._hooks,e._hooks=null);b.key=m.isVal(e._key)?e._key:m.isVal(e._ref)?e._ref:m.isVal(e.id)?e.id:m.isVal(e.name)?e.name:null;null!=e._ref&&(b.ref=e._ref);e._raw&&(b.raw=!0);null!=e._data&&(b.data=e._data);e._diff&&(b.diff=e._diff);e._ref=e._key=
e._raw=e._data=e._diff=null}}else m.isVal(e)?(b.type=m.TYPE_TEXT,b.body=e):m.isElem(e)&&(b.type=m.TYPE_ELEM,b.el=e,b.tag=e.nodeName.toLowerCase());null!==b.ref&&m.deepSet(a.refs,b.ref,b);b.parent=h;b.idx=l;b.ns=h&&h.ns?h.ns:"svg"===b.tag||"math"===b.tag?b.tag:null;B||b.diff||!m.isArr(b.body)||r(b,a);return b}function r(b,h){for(var l=0,c=b.body.length;l<c;l++){var a=b.body[l],e=null,f=null,n=!1,d=!1;m.isFunc(a)&&(a=a());if(null==a)n=!0;else{var k=m.isArr(a),v=k?!1:m.isObj(a);if(k)a.length?a._expl?
d=!0:"string"==typeof a[0]&&""!==a[0]?(f=q(a,b,l,h),e=f.key):m.isFunc(a[0])?e=u(a[1],a[2]):d=!0:n=!0;else if(v)if(m.isFunc(a.redraw))a.moveTo(b,l),f=a.node,e=a.ident[1];else if(m.isElem(a))f=q(a,b,l,h);else{b.body[l--]=""+a;continue}else""===a?n=!0:0<l&&b.body[l-1].type===m.TYPE_TEXT?(b.body[l-1].body+=""+a,n=!0):f=q(""+a,b,l,h)}n||d?(d?m.insertArr(b.body,a,l,1):b.body.splice(l,1),c=b.body.length,l--):(null!==e&&(b.hasKeys=!0),b.body[l]=f||a)}b.body._init=!0}function z(b,h){if(C(h,b))return h.moved=
!0,h.wasSame=!0,h;h&&(d(b,"willRecycle",h,b),A(h,b),d(b,"didRecycle",h,b));if(m.isArr(b.body)){if(!b.body._init){for(var a=b;!a.vm;)a=a.parent;r(b,a.vm)}var c=0;b.body.forEach(function(a,e){var l=m.isArr(a);if(h){var f=D(a,b,h,c);if(null!==f){var d=f[0],f=f[1];d===c&&c++;d=h.body[d];d.vm?l?2===f?d.vm.moveTo(b,e,a[1]):1===f&&g(a[0],a[1],a[2],a[3],b,e):a.vm&&2===f&&a.vm===d.vm&&d.vm.moveTo(b,e):b.body[e]=z(a,d);return}}l?g(a[0],a[1],a[2],a[3],b,e):b.body[e]=z(a)})}return b}function t(b,h,a,c){for(var f=
!b.el;a&&a._node.removed;)a=a.nextSibling;f&&b.vm&&d(b.vm,"willMount",b.vm);if(b.type==m.TYPE_ELEM)if(f&&(b.el=h||(b.ns?L.createElementNS(F[b.ns],b.tag):L.createElement(b.tag)),b.props&&v(b)),m.isArr(b.body)){h=0;for(var e=b.el.firstChild;h<b.body.length;h++)e=t(b.body[h],null,e)}else m.isVal(b.body)&&(b.raw?b.el.innerHTML=b.body:f&&(b.el.textContent=b.body));else b.type==m.TYPE_TEXT&&f&&(b.el=L.createTextNode(b.body));b.el._node=b;h=b.parent;a!==b.el&&(c||h&&h.el)&&(h=f?"Insert":"Reinsert",d(b,"will"+
h,b),(c||b.parent.el).insertBefore(b.el,a),d(b,"did"+h,b));f&&b.vm&&b.vm.hooks&&!b.moved&&d(b.vm,"didMount",b.vm);return a!==b.el?a:a.nextSibling}function D(b,h,a,c,f){var e=m.isArr(b),d=e?u(b[1],b[2]):b.key,n=a.hasKeys,k=h.hasKeys;a=a.body;h=h.body;if(null!==d&&n)return b=m.keyedIdx(d,a,e?b[0]:null),-1<b?[b,2]:null;c=c||0;if(c>a.length-1)return null;f=0===f?0:f||a.length-1;for(d=null;c<=f;c++)if(n=a[c],null!==n&&n.el)if(e&&n.vm){if(n.vm.ident[0]===b[0]){if(n.vm.ident[1]===u(b[1],b[2]))return[c,2];
!d&&k&&-1==m.keyedIdx(n.key,h,n.vm.ident[0])&&(d=[c,1])}}else if(b.type===n.type&&(b.type===m.TYPE_TEXT||null!==b.tag&&b.tag===n.tag)&&(null===n.key||!k||-1==m.keyedIdx(n.key,h,n.vm?n.vm.ident[0]:null)))return[c,1];return d}function C(b,a){if(b&&b.diff&&a.diff&&b.diff[0]===a.diff[0]){var c=b.diff.slice(1).concat(a.diff.slice(1));return!a.diff[0].apply(null,c)}return!1}function A(b,a){if(b.el)if(a.el=b.el,b.el=null,a.el&&(a.el._node=a),a.type===m.TYPE_TEXT&&a.body!==b.body)a.el.nodeValue=a.body;else{v(a,
b);var c=!m.isArr(a.body),f=!m.isArr(b.body);c&&a.body!==b.body?f&&a.el.firstChild?a.el.firstChild.nodeValue=a.body:a.raw?a.el.innerHTML=a.body:a.el.textContent=a.body:f&&!c&&(a.el.textContent="");b.moved=!0}}function f(b){b.removed&&b.vm&&(b.vm.node=null);b.el=b.key=b.ref=b.data=b.diff=b.vm=b.body=b.props=null;b.raw=b.moved=b.wasSame=b.removed=!1;K.push(b)}function G(b,a,c,f){return function(c){var e,l=c.target._node,d=null;if(m.isFunc(b))e=b.call(a,c,l,f);else if(m.isArr(b))d=b.slice(1),e=b[0].apply(a,
d.concat(c,l,f));else if(m.isObj(b))for(var k in b){var q=b[k];null!=q&&"_"!=k[0]&&c.target.matches(k)&&(m.isArr(q)?(d=q.slice(1),e=q[0].apply(a,d.concat(c,l,f))):m.isFunc(q)&&(e=q.call(a,c,l,f)))}!1===e&&(c.preventDefault(),c.stopPropagation());f.opts.hasOwnProperty("watch")&&f.opts.watch.fire({type:"event",vm:f,node:l,event:c,data:d})}}function v(b,a){var c=!a;a=a||{};if(a.props||b.props){var f=a.props||{},d=b.props||{},e=f.style,k=d.style;if(m.isObj(e)||m.isObj(k))O(b.el,b.tag,e||{},k||{},Q,x,
b.ns,c,b),f.style=d.style=null;O(b.el,b.tag,f,d,R,P,b.ns,c,b);k&&(d.style=k)}}function O(b,a,c,f,d,e,k,q,v){for(var r in f)if(a=f[r],null!==a){var g="."===r[0]?b[r.substr(1)]:c[r];a===g||m.isArr(a)&&m.isArr(g)&&m.cmpArr(a,g)||d(b,r,a,k,q,v)}for(r in c)null!==c[r]&&null==f[r]&&e(b,r,k,q)}function Q(b,a,c){b.style[a]=m.autoPx(a,c)}function x(b,a){b.style[a]=""}function R(b,a,c,f,d,e){if("."===a[0])a=a.substr(1),"svg"===f?b[a].baseVal=c:b[a]=c;else if("class"===a)b.className=c;else if("id"===a)b[a]=
c;else if(m.isEvProp(a)){for(f=e;!f.vm;)f=f.parent;b[a]=G(c,f.vm.opts.evctx||f.vm.model||null,e,f.vm)}else!1===c?P(b,a,f,d):b.setAttribute(a,!0===c?"":c)}function P(b,a,c,f){f||("."===a[0]?(a=a.substr(1),"svg"===c?b[a].baseVal=null:b[a]=null):"class"===a?b.className="":"id"===a||m.isEvProp(a)?b[a]=null:b.removeAttribute(a))}var F={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},L="undefined"==typeof document?{}:document,N={},K=[],J=[],I={debounce:!0,repaint:!0};y.view=
g;y.view.config=function(b){for(var a in b)I[a]=b[a]};var H=null;y.view.extend=function(b,a){H=!H||a?[]:H;H.push(b)};var m=y.utils;return y})(domvm);(function(y){var w=/^(?:img|br|input|col|link|meta|area|base|command|embed|hr|keygen|param|source|track|wbr)$/,u=y.utils;y.html=function(g){var c="";switch(g.type){case u.TYPE_ELEM:c+="<"+g.tag;if(g.props){var d=u.isVal(g.props.style)?g.props.style:"",k=u.isObj(g.props.style)?g.props.style:null;if(k)for(var a in k)null!==k[a]&&(d+=u.camelDash(a)+": "+u.autoPx(a,k[a])+"; ");for(a in g.props)u.isEvProp(a)||"."===a[0]||(k=g.props[a],u.isFunc(k)&&(k=k()),u.isObj(k)||(!0===k?c+=" "+a:!1!==k&&null!==k&&
"."!==a[0]&&(c+=" "+a+'="'+k+'"')));d.length&&(c+=' style="'+d.trim()+'"')}if(g.ns&&"svg"!==g.tag&&"math"!==g.tag&&!g.body)return c+"/>";c+=">";break;case u.TYPE_TEXT:return g.body}w.test(g.tag)||(u.isArr(g.body)?g.body.forEach(function(a){c+=y.html(a)}):c+=g.body||"",c+="</"+g.tag+">");return c}})(domvm);(function(y){var w=y.utils;y.watch=function(u){function g(){}function c(a,c,d,g,t){t=t||{};t.method=a.toUpperCase();"credentials"in t||(t.credentials="same-origin");null!==d&&(w.isArr(d)||w.isObj(d)?(t.headers=t.headers||new Headers,t.headers.set("Content-Type","application/json"),t.body=JSON.stringify(d)):t.body=""+d);var D=g,C=function(a){return Promise.reject(a)};g instanceof Array&&(D=g[0],g[1]&&(C=g[1]));var A={type:"fetch",fetch:{method:a,url:c,body:d}};g=fetch(c,t).then(function(a){if(200<=
a.status&&300>a.status)return a;var c=Error(a.status+": "+a.statusText);c.data=a;return Promise.reject(c)}).then(function(a){switch(a.headers.get("Content-Type").split("; ")[0]){case "application/json":return a.json();case "text/plain":return a.text();default:return a}}).then(D,C).then(function(a){!1!==a&&k.fire(A);return a},function(a){A.error=a;k.fire(A);return Promise.reject(a)});g._fetchArgs=[a,c,d,[D,C],t];return g}var d=[];w.isFunc(u)&&d.push(u);var k={on:function(a){d.push(a);return k},off:function(a){d.splice(d.indexOf(a),
1);return k},fire:w.raft(function(a){w.execAll(d,a);return k}),prop:function(a,d,r){var z=a,t=function(a,c,f){if(arguments.length&&a!==z){f=f||{type:"prop",prop:t,data:{old:z,"new":a}};r&&(a=r(f));if("undefined"==typeof a||a===z)return z;z=f.data["new"]=a;w.isFunc(c)?c(f):!1!==c&&k.fire(f)}return z};t._prop=!0;if(d&&d.then){t.update=g;if(d._fetchArgs){var D=d._fetchArgs[3];d._fetchArgs[3]=[function(a){return t(D[0]?D[0](a):a)},D[1]];t.update=function(){c.apply(null,d._fetchArgs)}}d.then(t)}return t.toString=
t},sync:function(a,c,d){var g=a,t=c;w.isFunc(g)||(g=function(c,d,k){if("string"==typeof a){var f,g;"e."==a.substr(0,2)?(f=c,g=a.substr(2)):(f=c.target,g=a)}return w.deepGet(f,g)});w.isArr(t)&&(t=function(a,d,g){var f=c[0],r=c[1];w.isFunc(r)&&(r=r(g.event,g.node,g.vm));var v=w.deepGet(f,r);a!==v&&(w.deepSet(f,r,a,d,g),w.isFunc(d)?d(g):!1!==d&&k.fire(g))});return function(a,c,k){var f={type:"sync",vm:k,node:c,event:a};t(g(a,c,k),d,f)}},fetch:c,get:function(a,d,g){g?a+=k.query(d):g=d;return c("get",
a,null,g)},"delete":function(a,d,g){g?a+=k.query(d):g=d;return c("delete",a,null,g)},post:function(a,d,g){return c("post",a,d,g)},put:function(a,d,g){return c("put",a,d,g)},patch:function(a,d,g){return c("patch",a,d,g)},query:function(a){if(!w.isObj(a))return"";var c=[],d=encodeURIComponent,g;for(g in a)c.push(d(g)+"="+d(a[g]));return c.length?"?"+c.join("&"):""}};return k}})(domvm);(function(y){function w(a,c,d,g,k,f){var r=null,v=null,q=null;if("/"==d[0]){q=d;v=!1;g={};f=q.split("#");c=f[0].split("?");r=c[0];f=f[1];c[1]&&(k={},c[1].split("&").map(function(a){a=a.split("=");k[a[0]]=null==a[1]?!0:a[1]}));var w,x;for(x in a){d=a[x];var u=d.path;if(w=r.match(d.regexPath)){v=x;-1!==u.indexOf(":")&&(g={},w.shift(),u.replace(/:([^\/]+)/g,function(a,c){g[c]=w.shift()}));break}}}else{v=d;d=a[v];var u=c+d.path,y=d.vars||{},q=-1!==u.indexOf(":")?r=u.replace(/:([^\/]+)/g,function(a,c){if((y[c]||
/^[^\/]+$/).test(g[c]))return g[c]+="";throw Error("Invalid value for route '"+u+"' segment '"+c+"': '"+g[c]+"'");}):r=u;if(k){var q=q+"?",F;for(F in k)q+=F+(!0!==k[F]?"="+k[F]:"")+"&";q=q.slice(0,-1)}q+=f?"#"+f:""}return{href:q,name:v,path:r,segs:g,hash:f,query:k}}function u(a,c){for(var d in a){var g=a[d];g.regexPath=new RegExp("^"+c+g.path.replace(/:([^\/]+)/g,function(a,c){var d=""+((g.vars||{})[c]||/[^\/]+/);return"("+d.substring(1,d.lastIndexOf("/"))+")"})+"$")}}var g=[],c=null,d=!1,k=null,
a=null,q=null,r="";y.route=function(z,t){function y(){var a=location,a=d?a.href.substr(a.origin.length):a.hash.substr(1)||"/";return w(f,r,a)}var C=null,A={href:function(a,c,g,k,q){var t=w(f,r,a,c,g,k);a=function(a){A["goto"](t,c,g,k,q);a.preventDefault()};a.href=(d?"":"#")+t.href;return a},config:function(c){(d=c.useHist)&&(r=c.root||"");k=c.willEnter||null;a=c.willExit||null;q=c.notFound||null;C=c.init||null},refresh:function(){A["goto"](y(),null,null,null,!0)},"goto":function(v,t,u,x,y,z){v.href||
(v=w(f,r,v,t,u,x));if(!1===v.name)q?q(v):console.log("Could not find route");else{t=null;for(x=0;x<g.length;x++)if(g[x].href===v.href){t=x;break}null===t&&(g.splice(c+1,1E4),g.push(v),t=g.length-1);v=g[c];x=g[t];var A=!0;u=!0;null!==c&&(a&&(A=z||a(v,x)),!1!==A&&(A=(A=f[v.name].onexit)?z||A.apply(null,(v?[v.segs,v.query,v.hash]:[]).concat(x)):!0));!1!==A&&(k&&(u=z||k(x,v)),!1!==u&&(u=f[x.name].onenter,u=z||u.apply(null,(x?[x.segs,x.query,x.hash]:[]).concat(v))),!1!==u&&(d?(G=!0,history[y?"replaceState":
"pushState"](null,"title",x.href)):(x="#"+x.href,location.hash!==x&&(G=!0,y?location.replace(x):location.hash=x)),c=t))}},route:function(a,d,f,k,q){if(null!=a)A["goto"](a,d,f,k,q,!0);else return null==c?y():g[c]}};A.location=A.route;var f=z(A,t);u(f,r);var G=!1;window.onhashchange=window.onpopstate=function(a){if(d||"popstate"!=a.type)!d&&G?G=!1:A["goto"](y(),null,null,null,!0)};C&&C();return A}})(domvm);
