/*
 https://github.com/leeoniya/domvm
*/
("undefined"!==typeof global?global:this).domvm={};(function(x){var y="undefined"==typeof window?{}:window,q={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,zoom:!0},c={TYPE_ELEM:1,TYPE_TEXT:2,isArr:function(b){return b instanceof
Array},isVal:function(b){b=typeof b;return"string"===b||"number"===b},isObj:function(b){return"object"===typeof b&&null!==b&&!c.isArr(b)},isFunc:function(b){return"function"===typeof b},isProm:function(b){return"object"===typeof b&&c.isFunc(b.then)},execAll:function(b,A){b&&(c.isArr(b)?b:[b]).forEach(function(b){return b.apply(null,A)})},insertArr:function(b,c,l,g){b.splice.apply(b,[l,g].concat(c))},isEvProp:function(b){return"on"===b.substr(0,2)},isDynProp:function(b,c){switch(b){case "input":case "textarea":case "select":case "option":switch(c){case "value":case "checked":case "selected":case "selectedIndex":return!0}}},
camelDash:function(b){return b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},autoPx:function(b,c){return isNaN(c)||q[b]?c:c+"px"},indexOfKey:function(b,c,l,g){for(l=0;l<c.length;l++)if(c[l].key===b)return l;return-1},raft:function(b){function c(){l=0;b.apply(g,B)}if(!y.requestAnimationFrame)return b;var l,g,B;return function(){g=this;B=arguments;l||(l=y.requestAnimationFrame(c))}}};x.util=c})(domvm);(function(x){function y(a,d){return!1===d?null:null==d&&null!=a?a:f.isVal(d)||f.isObj(d)||f.isArr(d)||f.isFunc(d)?d:null}function q(a,d,r,t,e,u){function k(a,d,e){if(e)a[d]=a[d]||[],a[d].push(e);else for(var r in d)a[r]=a[r]||[],a[r].push(d[r])}function h(a,d,r){e=a;u=d;n.update(r,!1);return z(0,!1)}function z(a,t){if(a){for(var h=n;a--&&h.parent;)h=h.parent;h.redraw(0,!0);return h.vm}var k=n.node;k&&n.hooks&&f.execAll(n.hooks.willRedraw,[n]);n.refs={};var c=n.render.call(n.api,n,d,r),c=l(c,e,u,n);
c.vm=n;n.node=c;var m=f.isVal(r)&&"^"===r[0]?r.substr(1):f.isVal(c.ref)&&"^"===c.ref[0]?c.ref.substr(1):null;c.key=null!=r?r:c.key;for(var w=e;w;)w.vm&&(n.parent||(n.parent=w.vm),null!==m&&(w.vm.refs[m]=c)),w=w.parent;!(m=k)||c.type===k.type&&c.tag===k.tag||(m=null,h=!0);g(c,m);e&&(e.body[u]=c);!1!==t&&(k&&b(k),!k&&v||B(c,null,c.el),h&&(k.el.parentNode.replaceChild(c.el,k.el),k.el=null));Promise.resolve().then(function(){k&&n.hooks&&f.execAll(n.hooks.didRedraw,[n])});return n}function m(a){n.hooks&&
f.execAll(n.hooks.willUnmount);if(e)if(a){for(a=u+1;a<e.body.length;a++){var d=e.body[a];d.idx=a-1;d.vm&&d.vm.updIdx(d.idx)}e.body.splice(u,1)}else e.body[u]=null;b(n.node,!0);n.node.vm=null;n.hooks&&f.execAll(n.hooks.didUnmount)}var v=!e;f.isArr(a)&&(d=a[1],r=a[2],t=a[3],a=a[0]);r=y(d,r);var n={api:{},node:null,view:[a,r],model:d,opts:t||{},render:null,update:function(a,e){null==a||r===d&&!f.isVal(r)||(d=n.model=a);return!1!==e?z(0):n},on:function(a,d){k(n.events,a,d)},hook:function(a,d){n.hooks=
n.hooks||{};k(n.hooks,a,d)},events:{},hooks:null,redraw:H.useRaf?f.raft(z):z,patch:function(a,d){var e=a.parent,r=g(l(d,e,a.idx,n),a);e.body[a.idx]=r},emit:function(a){for(var d=Array.prototype.slice.call(arguments,1),e=n;e;){if(e.events[a]){f.execAll(e.events[a],d);break}e=e.parent}},refs:{},parent:null,mount:function(a,d){var e=null;d&&(a.textContent="",e=a,a=null);B(n.node,e,null,a);return n},attach:function(a){c(n.node,a);return n},unmount:function(){w(n.hooks,"Unmount",m,[],[n])},moveTo:h,updIdx:function(a){u=
a}};t&&t.hooks&&n.hook(t.hooks);f.execAll(E,[n]);n.render=a.call(n.api,n,d,r);return e?h(e,u):z(0)}function c(a,d){a.el=d;d._node=a;for(var r in a.props){var t=a.props[r],e=f.isEvProp(r)?r:"."===r[0]?r.substr(1):null;null!==e&&(d[e]=t)}if(f.isArr(a.body))for(r=0;r<a.body.length;r++)c(a.body[r],d.childNodes[r])}function b(a,d){f.isArr(a.body)&&(a.body.forEach(function(a,d){a&&(a.vm&&!a.moved?a.vm.unmount():b(a,!0))}),a.body=null);a.vm=null;d&&a.el&&a.el.parentNode&&(a.removed=!0,w(a.hooks,"Remove",
A,[a]))}function A(a){a.el.parentNode.removeChild(a.el);a.el=null}function l(a,d,r,t){var e=a;a={type:null,key:null,ref:null,idx:null,parent:null,moved:!1,removed:!1,hooks:null,tag:null,ns:null,guard:!1,raw:!1,props:null,el:null,hasKeys:!1,body:null};f.isFunc(e)&&(e=e());if(f.isArr(e)&&e.length){a.type=f.TYPE_ELEM;if(1<e.length){var b=1;f.isObj(e[1])&&(a.props=e[1],b=2);a.body=e.length==b+1?f.isVal(e[b])?e[b]:f.isFunc(e[b])?e[b]():e.slice(b):e.slice(b)}e=e[0];if(/[.#]/.test(e)){if(e=F(e),a.tag=e.tag,
e.id||e["class"])a.props=a.props||{},a.props.id=e.id,a.props["class"]=e["class"]}else a.tag=e;if(a.props){var e=a.props,k;for(k in e)f.isEvProp(k)?e[k]=u(e[k],t.opts.evctx||t.model||null,a,t):f.isFunc(e[k])&&("href"==k?(e.onclick=e[k],e.href=e[k].href):e[k]=e[k]()),f.isDynProp(a.tag,k)&&(e["."+k]=e[k]);if(f.isObj(e.style))for(var h in e.style)k=e.style[h],f.isFunc(k)&&(e.style[h]=k());f.isObj(e._hooks)&&(a.hooks=e._hooks,e._hooks=null);a.key=f.isVal(e._key)?e._key:f.isVal(e._ref)?e._ref:f.isVal(e.id)?
e.id:f.isVal(e.name)?e.name:null;e._ref&&(a.ref=e._ref);e._raw&&(a.raw=!0);e._data&&(a.data=e._data);e._guard&&(a.guard=!0);e._ref=e._key=e._raw=e._data=e._guard=null}}else f.isVal(e)&&(a.type=f.TYPE_TEXT,a.body=e);null!==a.ref&&(t.refs[a.ref]=a);a.parent=d;a.idx=r;a.ns=d&&d.ns?d.ns:"svg"===a.tag||"math"===a.tag?a.tag:null;if(f.isArr(a.body))for(d=0,r=a.body.length;d<r;d++){h=a.body[d];var e=k=null,c=b=!1;f.isFunc(h)&&(h=h());if(null==h)b=!0;else{var g=f.isArr(h),m=g?!1:f.isObj(h);if(g)h.length?f.isArr(h[0])?
c=!0:f.isFunc(h[0])?k=y(h[1],h[2]):(e=l(h,a,d,t),k=e.key):b=!0;else if(m)if(f.isFunc(h.redraw))h.moveTo(a,d),e=h.node,k=h.view[1];else{a.body[d--]=""+h;continue}else""===h?b=!0:0<d&&a.body[d-1].type===f.TYPE_TEXT?(a.body[d-1].body+=""+h,b=!0):e=l(""+h,a,d,t)}b||c?(c?f.insertArr(a.body,h,d,1):a.body.splice(d,1),r=a.body.length,d--):(null!==k&&(a.hasKeys=!0),a.body[d]=e||h)}return a}function g(a,d){d&&w(a.hooks,"Recycle",p,[d,a]);if(f.isArr(a.body)){var b=0;a.body.forEach(function(t,e){var c=f.isArr(t);
if(d){var k=m(t,a,d,b);if(null!==k){var h=k[0],k=k[1];h===b&&b++;h=d.body[h];h.vm?c?2===k?h.vm.moveTo(a,e,t[1]):1===k&&q(t[0],t[1],t[2],t[3],a,e):t.vm&&2===k&&t.vm===h.vm&&h.vm.moveTo(a,e):a.body[e]=g(t,h);return}}c?q(t[0],t[1],t[2],t[3],a,e):a.body[e]=g(t)})}return a}function B(a,d,b,t){for(var e=!a.el;b&&b._node.removed;)b=b.nextSibling;e&&a.vm&&a.vm.hooks&&f.execAll(a.vm.hooks.willMount,[a.vm]);if(a.type==f.TYPE_ELEM)if(e&&(a.el=d||(a.ns?I.createElementNS(C[a.ns],a.tag):I.createElement(a.tag)),
a.props&&z(a)),f.isArr(a.body)){d=0;for(var c=a.el.firstChild;d<a.body.length;d++)c=B(a.body[d],null,c)}else f.isVal(a.body)&&(a.raw?a.el.innerHTML=a.body:e&&(a.el.textContent=a.body));else a.type==f.TYPE_TEXT&&e&&(a.el=I.createTextNode(a.body));a.el._node=a;d=a.parent;b!==a.el&&(t||d&&d.el)&&w(a.hooks,e?"Insert":"Reinsert",v,[a,b,t]);e&&a.vm&&a.vm.hooks&&Promise.resolve().then(function(){f.execAll(a.vm.hooks.didMount,[a.vm])});return b!==a.el?b:b.nextSibling}function v(a,d,b){(b||a.parent.el).insertBefore(a.el,
d)}function m(a,d,b,c,e){var g=f.isArr(a),k=g?y(a[1],a[2]):a.key,h=b.hasKeys,u=d.hasKeys;b=b.body;d=d.body;if(null!==k&&h)return a=f.indexOfKey(k,b),-1<a?[a,2]:null;c=c||0;if(c>b.length-1)return null;e=0===e?0:e||b.length-1;for(k=null;c<=e;c++)if(h=b[c],null!==h&&h.el)if(g&&h.vm){if(h.vm.view[0]===a[0]){if(h.vm.view[1]===y(a[1],a[2]))return[c,2];var m=!1;if(H.viewScan)for(var z=0;z<d.length;z++){var n=d[z];if(!n.el&&n.vm&&n.vm.view[0]===h.vm.view[0]&&n.vm.view[1]===h.vm.view[1]){m=!0;break}}m||k||
!u||-1!=f.indexOfKey(h.key,d)||(k=[c,1])}}else if(a.type===h.type&&(a.type===f.TYPE_TEXT||null!==a.tag&&a.tag===h.tag)&&(null===h.key||!u||-1==f.indexOfKey(h.key,d)))return[c,1];return k}function p(a,d){d.el=a.el;a.el=null;if(d.type===f.TYPE_TEXT&&d.body!==a.body)d.el.nodeValue=d.body;else{z(d,a);var b=!f.isArr(d.body),c=!f.isArr(a.body);b&&d.body!==a.body?c&&d.el.firstChild?d.el.firstChild.nodeValue=d.body:d.raw?d.el.innerHTML=d.body:d.el.textContent=d.body:c&&!b&&(d.el.textContent="");a.moved=!0}}
function w(a,d,b,c,e,g){if(a){var k=a["will"+d];f.isArr(k)&&(k=k[0]);var h=a["did"+d];f.isArr(h)&&(h=h[0]);a=function(){b.apply(null,c);h&&h.apply(null,g||e||c)};k?(k=k.apply(null,e||c),f.isProm(k)?k.then(a):a()):a()}else b.apply(null,c)}function F(a){if(a in J)return J[a];var d={tag:null,id:null,"class":null};d.tag=a.replace(/^([\w\-]+)?(?:#([\w\-]+))?((?:\.[\w\-]+)+)?$/,function(a,b,e,c){e&&(d.id=e);c&&(d["class"]=c.replace(/\./g," ").trim());return b||"div"});return J[a]=d}function u(a,d,b,c){return function(e){var b,
k=e.target._node,h=null;if(f.isFunc(a))b=a.call(d,e,k,c);else if(f.isArr(a))h=a.slice(1),b=a[0].apply(d,h.concat(e,k,c));else if(f.isObj(a))for(var g in a){var u=a[g];e.target.matches(g)&&(f.isArr(u)?(h=u.slice(1),b=u[0].apply(d,h.concat(e,k,c))):f.isFunc(u)&&(b=u.call(d,e,k,c)))}!1===b&&(e.preventDefault(),e.stopPropagation());c.opts.hasOwnProperty("watch")&&c.opts.watch.fire({type:"event",vm:c,node:k,event:e,data:h})}}function z(a,d){var b=!d;d=d||{};if(d.props||a.props){var c=d.props||{},e=a.props||
{},g=c.style,k=e.style;if(f.isObj(g)||f.isObj(k))D(a.el,a.tag,g||{},k||{},K,L,a.ns,b),c.style=e.style=null;D(a.el,a.tag,c,e,M,G,a.ns,b);k&&(e.style=k)}}function D(a,d,b,c,e,f,k,h){for(var g in c)null!==c[g]&&("."===g[0]?a[g.substr(1)]!==c[g]:c[g]!==b[g])&&e(a,g,c[g],k,h);for(g in b)null!==b[g]&&null==c[g]&&f(a,g,k,h)}function K(a,d,b){a.style[d]=f.autoPx(d,b)}function L(a,d){a.style[d]=""}function M(a,d,b,c,e){"."===d[0]?(d=d.substr(1),"svg"===c?a[d].baseVal=b:a[d]=b):"class"===d?a.className=b:"id"===
d||f.isEvProp(d)?a[d]=b:!1===b?G(a,d,c,e):a.setAttribute(d,!0===b?"":b)}function G(a,d,b,c){c||("."===d[0]?(d=d.substr(1),"svg"===b?a[d].baseVal=null:a[d]=null):"class"===d?a.className="":"id"===d||f.isEvProp(d)?a[d]=null:a.removeAttribute(d))}var C={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},J={},I="undefined"==typeof document?{}:document,H={useRaf:!0,viewScan:!1,useDOM:!1};x.view=q;x.view.config=function(a){H=a};var E=null;x.view.extend=function(a,d){E=!E||d?[]:
E;E.push(a)};var f=x.util;return x})(domvm);(function(x){var y=/^(?:img|br|input|col|link|meta|area|base|command|embed|hr|keygen|param|source|track|wbr)$/,q=x.util;x.html=function(c){var b="";switch(c.type){case q.TYPE_ELEM:b+="<"+c.tag;if(c.props){var A=q.isVal(c.props.style)?c.props.style:"",l=q.isObj(c.props.style)?c.props.style:null;if(l)for(var g in l)null!==l[g]&&(A+=q.camelDash(g)+": "+q.autoPx(g,l[g])+"; ");for(g in c.props)q.isEvProp(g)||"."===g[0]||(l=c.props[g],q.isFunc(l)&&(l=l()),q.isObj(l)||(!0===l?b+=" "+g:!1!==l&&null!==l&&
"."!==g[0]&&(b+=" "+g+'="'+l+'"')));A.length&&(b+=' style="'+A.trim()+'"')}if(c.ns&&"svg"!==c.tag&&"math"!==c.tag&&!c.body)return b+"/>";b+=">";break;case q.TYPE_TEXT:return c.body}y.test(c.tag)||(q.isArr(c.body)?c.body.forEach(function(c){b+=x.html(c)}):b+=c.body||"",b+="</"+c.tag+">");return b}})(domvm);(function(x){var y=x.util;x.watch=function(q){function c(){}function b(b,B,v,m,p){p=p||{};p.method=(p.method||b).toUpperCase();if(null!==v){var w=Object.prototype.toString.call(v);"[object Array]"===w||"[object Object]"===w?(p.headers=p.headers||new Headers,p.headers.set("Content-Type","application/json"),p.body=JSON.stringify(v)):p.body=""+v}var w=m,F=c;m instanceof Array&&(w=m[0],m[1]&&(F=m[1]));var u={type:"fetch",fetch:{method:b,url:B,body:v}};m=fetch(B,p).then(function(b){if(200<=b.status&&300>
b.status)return b;var c=Error(b.status+": "+b.statusText);c.data=b;return Promise.reject(c)}).then(function(b){switch(b.headers.get("Content-Type").split("; ")[0]){case "application/json":return b.json();case "text/plain":return b.text();default:return b}}).then(w,F).then(function(b){!1!==b&&l.fire(u);return b},function(b){u.error=b;l.fire(u);return b});m._fetchArgs=[b,B,v,[w,F],p];return m}var A=[];y.isFunc(q)&&A.push(q);var l={on:function(b){A.push(b);return l},off:function(b){A.splice(A.indexOf(b),
1);return l},fire:y.raft(function(){y.execAll(A,arguments);return l}),prop:function(g,B){var v=g,m=function(b,c){if(arguments.length&&b!==v){var g=v;v=b;!1!==c&&l.fire({type:"prop",prop:m,data:{old:g,"new":b}})}return v};if(B&&B.then){m.update=c;if(B._fetchArgs){var p=B._fetchArgs[3];B._fetchArgs[3]=[function(b){return m(p[0]?p[0](b):b)},p[1]];m.update=function(){b.apply(null,B._fetchArgs)}}B.then(m)}return m.toString=m},sync:function(b,c,l){var m=b,p=c;"string"==typeof b&&(m=function(c){return"e."===
b.substr(0,2)?c[b.substr(2)]:c.target[b]});return function(b,g){var u=this!==window?this:null;u&&"string"==typeof c&&(p=function(b,g){var m=u[c];u[c]=b;q&&b!==m&&!1!==g&&q()});p(m(g),l)}},get:function(c,l,v){return b("get",c,null,l,v)},"delete":function(c,l,v){return b("delete",c,null,l,v)},post:function(c,l,v,m){return b("post",c,l,v,m)},put:function(c,l,v,m){return b("put",c,l,v,m)},patch:function(c,l,v,m){return b("patch",c,l,v,m)}};return l}})(domvm);(function(x){function y(b,c,l,m,p,w){var q=null,u=null,z=null;if("/"==l[0]){z=l;u=!1;m={};w=z.split("#");c=w[0].split("?");q=c[0];w=w[1];c[1]&&(p={},c[1].split("&").map(function(b){b=b.split("=");p[b[0]]=null==b[1]?!0:b[1]}));var D,A;for(A in b){l=b[A];var y=l.path;if(D=q.match(l.regexPath)){u=A;-1!==y.indexOf(":")&&(m={},D.shift(),y.replace(/:([^\/]+)/g,function(b,c){m[c]=D.shift()}));break}}}else{u=l;l=b[u];var y=c+l.path,x=l.vars||{},G=/^[^\/]+$/,z=-1!==y.indexOf(":")?q=y.replace(/:([^\/]+)/g,
function(b,c){if((x[c]||G).test(m[c]))return m[c]+="";throw Error("Invalid value for route '"+y+"' segment '"+c+"': '"+m[c]+"'");}):q=y;if(p){var z=z+"?",C;for(C in p)z+=C+(!0!==p[C]?"="+p[C]:"")+"&";z=z.slice(0,-1)}z+=w?"#"+w:""}return{href:z,name:u,path:q,segs:m,hash:w,query:p}}function q(b,c){for(var l in b){var m=b[l];m.regexPath=new RegExp("^"+c+m.path.replace(/:([^\/]+)/g,function(b,c){var l=""+m.vars[c];return"("+l.substring(1,l.lastIndexOf("/"))+")"})+"$")}}var c=[],b=null,A=!1,l="";x.route=
function(g,B){function v(){var b=location,b=A?b.href.substr(b.origin.length):b.hash.substr(1)||"/";return y(x,l,b)}var m=null,p={href:function(b,c,g,m,w){var q=y(x,l,b,c,g,m);return A?(b=function(b){p["goto"](q,null,null,null,w);b.preventDefault()},b.href=q.href,b):"#"+q.href},config:function(b){(A=b.useHist)&&(l=b.root||"");m=b.init||null},refresh:function(){p["goto"](v(),null,null,null,!0)},"goto":function(g,m,p,q,v){v=v||w;g.href||(g=y(x,l,g,m,p,q));if(!1===g.name)console.log("Could not find route");
else{m=null;for(p=0;p<c.length;p++)if(c[p].path===g.path){m=p;break}null===m&&(c.splice(b+1,1E4),c.push(g),m=c.length-1);g=c[b];p=c[m];q=!0;null!==b&&(q=(q=x[g.name].onexit)?q.apply(null,(g?[g.segs,g.query,g.hash]:[]).concat(p)):!0);if(!1!==q&&!1!==x[p.name].onenter.apply(null,(p?[p.segs,p.query,p.hash]:[]).concat(g))){if(A)history[v?"replaceState":"pushState"](null,"title",p.href);b=m}w=!1}},location:function(){return w?v():c[b]}},w=!0,x=g(p,B);q(x,l);window.onhashchange=window.onpopstate=function(b){(A||
"popstate"!=b.type)&&p["goto"](v(),null,null,null,!0)};m&&m();return p}})(domvm);
