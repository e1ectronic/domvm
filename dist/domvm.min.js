/*
 https://github.com/leeoniya/domvm
*/
("undefined"!==typeof global?global:this).domvm={};(function(u){var v="undefined"==typeof window?{}:window,t={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,zoom:!0},n={TYPE_ELEM:1,TYPE_TEXT:2,isArr:function(a){return a instanceof
Array},isVal:function(a){a=typeof a;return"string"===a||"number"===a},isObj:function(a){return"object"===typeof a&&null!==a&&!n.isArr(a)},isFunc:function(a){return"function"===typeof a},isProm:function(a){return"object"===typeof a&&n.isFunc(a.then)},execAll:function(a,h,m,g,f,w){var c;a&&(n.isArr(a)?a:[a]).forEach(function(a){c=a.call(null,h,m,g,f,w)});return c},insertArr:function(a,h,m,g){a.splice.apply(a,[m,g].concat(h))},isEvProp:function(a){return"on"===a.substr(0,2)},isDynProp:function(a,h){switch(a){case "input":case "textarea":case "select":case "option":switch(h){case "value":case "checked":case "selected":case "selectedIndex":return!0}}},
camelDash:function(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},autoPx:function(a,h){return isNaN(h)||t[a]?h:h+"px"},deepSet:function(a,h,m){h=h.split(".");var g=h.pop();h.forEach(function(g){a[g]||(a[g]={});a=a[g]});a[g]=m},keyedIdx:function(a,h,m,g,f){for(g=0;g<h.length;g++)if(f=h[g],f.key===a)if(m){if(f.vm&&f.vm.view[0]===m)return g}else return g;return-1},raft:function(a){function h(){m=0;a.apply(g,f)}if(!v.requestAnimationFrame)return a;var m,g,f;return function(){g=this;f=arguments;
m||(m=v.requestAnimationFrame(h))}}};u.util=n})(domvm);(function(u){function v(b,e){return!1===e?null:null==e&&null!=b?b:l.isVal(e)||l.isObj(e)||l.isArr(e)||l.isFunc(e)?e:null}function t(b,e,x,C,d,D){function q(b,e,d){if(d)b[e]=b[e]||[],b[e].push(d);else for(var a in e)b[a]=b[a]||[],b[a].push(e[a])}function k(b,e,a){d=b;D=e;c.update(a,!1);return r(0,!1)}function r(b,C){if(b){for(var k=c;b--&&k.parent;)k=k.parent;k.redraw(0,!0);return k.vm}(k=c.node)&&a(c,"willRedraw",c);c.refs={};var r=c.render.call(c.api,c,e,x),r=g(r,d,D,c);r.vm=c;c.node=r;var q=l.isVal(x)&&
"^"===x[0]?x.substr(1):l.isVal(r.ref)&&"^"===r.ref[0]?r.ref.substr(1):null;r.key=null!=x?x:r.key;for(var p=d;p;)p.vm&&(c.parent||(c.parent=p.vm),null!==q&&l.deepSet(p.vm.refs,q,r)),p=p.parent;if((q=k)&&(r.type!==k.type||r.tag!==k.tag))var q=null,K=!0,n=k.el.parentNode;f(r,q);d&&(d.body[D]=r);!1!==C&&(k&&h(k),!k&&m||w(r,null,r.el),K&&(n||r.parent.el).insertBefore(r.el,n.childNodes[k.idx]));k&&c.hooks&&Promise.resolve().then(function(){requestAnimationFrame(function(){a(c,"didRedraw",c)})});return c}
var m=!d;l.isArr(b)&&(e=b[1],x=b[2],C=b[3],b=b[0]);x=v(e,x);var c={api:{},node:null,view:[b,x],model:e,opts:C||{},render:null,update:function(b,d){null==b||x===e&&!l.isVal(x)||(e=c.model=b);return!1!==d?r(0):c},on:function(b,e){q(c.events,b,e)},hook:function(b,e){c.hooks=c.hooks||{};q(c.hooks,b,e)},events:{},hooks:null,redraw:J.useRaf?l.raft(r):r,patch:function(b,e){if(l.isObj(e)){var d={tag:b.tag,el:b.el,ns:b.ns,props:{"class":"class"in e?(null!=b["class"]?b["class"]+" ":"")+e["class"]:b.props["class"],
style:"style"in e?e.style:b.props.style}};p(d,b);b.props["class"]=d.props["class"];b.props.style=d.props.style}else{var a=b.parent,d=f(g(e,a,b.idx,c),b);a.body[b.idx]=d}},emit:function(b){for(var e=Array.prototype.slice.call(arguments),d=c,a;d;){if(a=d.events[b]){e[0]=a;l.execAll.apply(null,e);break}d=d.parent}},refs:{},parent:null,mount:function(b,e){var d=null;e&&(b.textContent="",d=b,b=null);w(c.node,d,null,b);return c},attach:function(b){n(c.node,b);return c},unmount:function(){h(c.node)},moveTo:k,
updIdx:function(b){D=b}};C&&C.hooks&&c.hook(C.hooks);l.execAll(E,c);c.render=b.call(c.api,c,e,x);return d?k(d,D):r(0)}function n(b,e){b.el=e;e._node=b;for(var a in b.props){var c=b.props[a],d=l.isEvProp(a)?a:"."===a[0]?a.substr(1):null;null!==d&&(e[d]=c)}if(l.isArr(b.body))for(a=0;a<b.body.length;a++)n(b.body[a],e.childNodes[a])}function a(b,e,a,c,d,g){if(b&&b.hooks&&(b=b.hooks[e]))return l.execAll(b,a,c,d,g)}function h(b,e){var c=b.el&&!b.moved;if(c){var g=a(b.vm,"willUnmount",b.vm),d=a(b,"willRemove",
b),f=g||d;b.removed=!0}l.isArr(b.body)&&b.body.forEach(function(b,d){b.vm&&b.moved||h(b,e||f)});e||(f?f.then(function(){m(b,c)}):m(b,c))}function m(b,e){null!=b.el&&b.el.parentNode&&(e&&(b.el.parentNode.removeChild(b.el),b.el=null,a(b.vm,"didUnmount",b.vm),a(b,"didRemove",b)),l.isArr(b.body)&&b.body.forEach(function(b,e){m(b,!0)}))}function g(b,e,a,c){var d=b;b={type:null,key:null,ref:null,idx:null,parent:null,moved:!1,removed:!1,hooks:null,tag:null,"class":null,ns:null,guard:!1,raw:!1,props:null,
el:null,hasKeys:!1,body:null};l.isFunc(d)&&(d=d());if(l.isArr(d)&&d.length){b.type=l.TYPE_ELEM;if(1<d.length){var f=1;l.isObj(d[1])&&(b.props=d[1],f=2);b.body=d.length==f+1?l.isVal(d[f])?d[f]:l.isFunc(d[f])?d[f]():d.slice(f):d.slice(f)}d=d[0];if(/[.#]/.test(d)){if(d=z(d),b.tag=d.tag,f=null!=d["class"],null!=d.id||f){var q=b.props||{};null==q.id&&(q.id=d.id);f&&(b["class"]=d["class"],q["class"]=d["class"]+(null!=q["class"]?" "+q["class"]:""));b.props=q}}else b.tag=d;if(b.props){var d=b.props,k;for(k in d)l.isEvProp(k)?
d[k]=y(d[k],c.opts.evctx||c.model||null,b,c):l.isFunc(d[k])&&("href"==k?(d.onclick=d[k],d.href=d[k].href):d[k]=d[k]()),l.isDynProp(b.tag,k)&&(d["."+k]=d[k]);if(l.isObj(d.style))for(var r in d.style)k=d.style[r],l.isFunc(k)&&(d.style[r]=k());l.isObj(d._hooks)&&(b.hooks=d._hooks,d._hooks=null);b.key=l.isVal(d._key)?d._key:l.isVal(d._ref)?d._ref:l.isVal(d.id)?d.id:l.isVal(d.name)?d.name:null;null!=d._ref&&(b.ref=d._ref);d._raw&&(b.raw=!0);null!=d._data&&(b.data=d._data);d._guard&&(b.guard=!0);d._ref=
d._key=d._raw=d._data=d._guard=null}}else l.isVal(d)&&(b.type=l.TYPE_TEXT,b.body=d);null!==b.ref&&l.deepSet(c.refs,b.ref,b);b.parent=e;b.idx=a;b.ns=e&&e.ns?e.ns:"svg"===b.tag||"math"===b.tag?b.tag:null;if(l.isArr(b.body))for(e=0,a=b.body.length;e<a;e++){r=b.body[e];d=k=null;q=f=!1;l.isFunc(r)&&(r=r());if(null==r)f=!0;else{var p=l.isArr(r),w=p?!1:l.isObj(r);if(p)r.length?l.isArr(r[0])?q=!0:l.isFunc(r[0])?k=v(r[1],r[2]):(d=g(r,b,e,c),k=d.key):f=!0;else if(w)if(l.isFunc(r.redraw))r.moveTo(b,e),d=r.node,
k=r.view[1];else{b.body[e--]=""+r;continue}else""===r?f=!0:0<e&&b.body[e-1].type===l.TYPE_TEXT?(b.body[e-1].body+=""+r,f=!0):d=g(""+r,b,e,c)}f||q?(q?l.insertArr(b.body,r,e,1):b.body.splice(e,1),a=b.body.length,e--):(null!==k&&(b.hasKeys=!0),b.body[e]=d||r)}return b}function f(b,e){e&&(a(b,"willRecycle",e,b),B(e,b),a(b,"didRecycle",e,b));if(l.isArr(b.body)){var g=0;b.body.forEach(function(a,d){var q=l.isArr(a);if(e){var p=c(a,b,e,g);if(null!==p){var k=p[0],p=p[1];k===g&&g++;k=e.body[k];k.vm?q?2===
p?k.vm.moveTo(b,d,a[1]):1===p&&t(a[0],a[1],a[2],a[3],b,d):a.vm&&2===p&&a.vm===k.vm&&k.vm.moveTo(b,d):b.body[d]=f(a,k);return}}q?t(a[0],a[1],a[2],a[3],b,d):b.body[d]=f(a)})}return b}function w(b,e,c,g){for(var d=!b.el;c&&c._node.removed;)c=c.nextSibling;d&&a(b.vm,"willMount",b.vm);if(b.type==l.TYPE_ELEM)if(d&&(b.el=e||(b.ns?H.createElementNS(I[b.ns],b.tag):H.createElement(b.tag)),b.props&&p(b)),l.isArr(b.body)){e=0;for(var f=b.el.firstChild;e<b.body.length;e++)f=w(b.body[e],null,f)}else l.isVal(b.body)&&
(b.raw?b.el.innerHTML=b.body:d&&(b.el.textContent=b.body));else b.type==l.TYPE_TEXT&&d&&(b.el=H.createTextNode(b.body));b.el._node=b;e=b.parent;c!==b.el&&(g||e&&e.el)&&(e=d?"Insert":"Reinsert",a(b,"will"+e,b),(g||b.parent.el).insertBefore(b.el,c),a(b,"did"+e,b));d&&b.vm&&b.vm.hooks&&Promise.resolve().then(function(){!b.moved&&a(b.vm,"didMount",b.vm)});return c!==b.el?c:c.nextSibling}function c(b,e,a,c,d){var g=l.isArr(b),f=g?v(b[1],b[2]):b.key,k=a.hasKeys,q=e.hasKeys;a=a.body;e=e.body;if(null!==f&&
k)return b=l.keyedIdx(f,a,g?b[0]:null),-1<b?[b,2]:null;c=c||0;if(c>a.length-1)return null;d=0===d?0:d||a.length-1;for(f=null;c<=d;c++)if(k=a[c],null!==k&&k.el)if(g&&k.vm){if(k.vm.view[0]===b[0]){if(k.vm.view[1]===v(b[1],b[2]))return[c,2];!f&&q&&-1==l.keyedIdx(k.key,e,k.vm.view[0])&&(f=[c,1])}}else if(b.type===k.type&&(b.type===l.TYPE_TEXT||null!==b.tag&&b.tag===k.tag)&&(null===k.key||!q||-1==l.keyedIdx(k.key,e,k.vm?k.vm.view[0]:null)))return[c,1];return f}function B(b,e){e.el=b.el;b.el=null;e.el&&
(e.el._node=e);if(e.type===l.TYPE_TEXT&&e.body!==b.body)e.el.nodeValue=e.body;else{p(e,b);var a=!l.isArr(e.body),c=!l.isArr(b.body);a&&e.body!==b.body?c&&e.el.firstChild?e.el.firstChild.nodeValue=e.body:e.raw?e.el.innerHTML=e.body:e.el.textContent=e.body:c&&!a&&(e.el.textContent="");b.moved=!0}}function z(b){if(b in A)return A[b];var e={tag:null,id:null,"class":null};e.tag=b.replace(/^([\w\-]+)?(?:#([\w\-]+))?((?:\.[\w\-]+)+)?$/,function(b,a,d,c){d&&(e.id=d);c&&(e["class"]=c.replace(/\./g," ").trim());
return a||"div"});return A[b]=e}function y(b,e,a,c){return function(a){var g,f=a.target._node,k=null;if(l.isFunc(b))g=b.call(e,a,f,c);else if(l.isArr(b))k=b.slice(1),g=b[0].apply(e,k.concat(a,f,c));else if(l.isObj(b))for(var q in b){var p=b[q];a.target.matches(q)&&(l.isArr(p)?(k=p.slice(1),g=p[0].apply(e,k.concat(a,f,c))):l.isFunc(p)&&(g=p.call(e,a,f,c)))}!1===g&&(a.preventDefault(),a.stopPropagation());c.opts.hasOwnProperty("watch")&&c.opts.watch.fire({type:"event",vm:c,node:f,event:a,data:k})}}
function p(b,e){var a=!e;e=e||{};if(e.props||b.props){var c=e.props||{},d=b.props||{},g=c.style,f=d.style;if(l.isObj(g)||l.isObj(f))q(b.el,b.tag,g||{},f||{},F,L,b.ns,a),c.style=d.style=null;q(b.el,b.tag,c,d,M,G,b.ns,a);f&&(d.style=f)}}function q(b,e,a,c,d,g,f,q){for(var p in c)null!==c[p]&&("."===p[0]?b[p.substr(1)]!==c[p]:c[p]!==a[p])&&d(b,p,c[p],f,q);for(p in a)null!==a[p]&&null==c[p]&&g(b,p,f,q)}function F(b,a,c){b.style[a]=l.autoPx(a,c)}function L(b,a){b.style[a]=""}function M(b,a,c,g,d){"."===
a[0]?(a=a.substr(1),"svg"===g?b[a].baseVal=c:b[a]=c):"class"===a?b.className=c:"id"===a||l.isEvProp(a)?b[a]=c:!1===c?G(b,a,g,d):b.setAttribute(a,!0===c?"":c)}function G(b,a,c,g){g||("."===a[0]?(a=a.substr(1),"svg"===c?b[a].baseVal=null:b[a]=null):"class"===a?b.className="":"id"===a||l.isEvProp(a)?b[a]=null:b.removeAttribute(a))}var I={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},A={},H="undefined"==typeof document?{}:document,J={useRaf:!0};u.view=t;u.view.config=function(b){J=
b};var E=null;u.view.extend=function(b,a){E=!E||a?[]:E;E.push(b)};var l=u.util;return u})(domvm);(function(u){var v=/^(?:img|br|input|col|link|meta|area|base|command|embed|hr|keygen|param|source|track|wbr)$/,t=u.util;u.html=function(n){var a="";switch(n.type){case t.TYPE_ELEM:a+="<"+n.tag;if(n.props){var h=t.isVal(n.props.style)?n.props.style:"",m=t.isObj(n.props.style)?n.props.style:null;if(m)for(var g in m)null!==m[g]&&(h+=t.camelDash(g)+": "+t.autoPx(g,m[g])+"; ");for(g in n.props)t.isEvProp(g)||"."===g[0]||(m=n.props[g],t.isFunc(m)&&(m=m()),t.isObj(m)||(!0===m?a+=" "+g:!1!==m&&null!==m&&
"."!==g[0]&&(a+=" "+g+'="'+m+'"')));h.length&&(a+=' style="'+h.trim()+'"')}if(n.ns&&"svg"!==n.tag&&"math"!==n.tag&&!n.body)return a+"/>";a+=">";break;case t.TYPE_TEXT:return n.body}v.test(n.tag)||(t.isArr(n.body)?n.body.forEach(function(g){a+=u.html(g)}):a+=n.body||"",a+="</"+n.tag+">");return a}})(domvm);(function(u){var v=u.util;u.watch=function(t){function n(){}function a(a,f,w,c,h){h=h||{};h.method=a.toUpperCase();null!==w&&(v.isArr(w)||v.isObj(w)?(h.headers=h.headers||new Headers,h.headers.set("Content-Type","application/json"),h.body=JSON.stringify(w)):h.body=""+w);var z=c,y=n;c instanceof Array&&(z=c[0],c[1]&&(y=c[1]));var p={type:"fetch",fetch:{method:a,url:f,body:w}};c=fetch(f,h).then(function(a){if(200<=a.status&&300>a.status)return a;var c=Error(a.status+": "+a.statusText);c.data=a;return Promise.reject(c)}).then(function(a){switch(a.headers.get("Content-Type").split("; ")[0]){case "application/json":return a.json();
case "text/plain":return a.text();default:return a}}).then(z,y).then(function(a){!1!==a&&m.fire(p);return a},function(a){p.error=a;m.fire(p);return a});c._fetchArgs=[a,f,w,[z,y],h];return c}var h=[];v.isFunc(t)&&h.push(t);var m={on:function(a){h.push(a);return m},off:function(a){h.splice(h.indexOf(a),1);return m},fire:v.raft(function(){v.execAll(h,arguments);return m}),prop:function(g,f){var w=g,c=function(a,g){if(arguments.length&&a!==w){var f=w;w=a;!1!==g&&m.fire({type:"prop",prop:c,data:{old:f,
"new":a}})}return w};if(f&&f.then){c.update=n;if(f._fetchArgs){var h=f._fetchArgs[3];f._fetchArgs[3]=[function(a){return c(h[0]?h[0](a):a)},h[1]];c.update=function(){a.apply(null,f._fetchArgs)}}f.then(c)}return c.toString=c},sync:function(a,f,h){var c=a,m=f;"string"==typeof a&&(c=function(c){return"e."===a.substr(0,2)?c[a.substr(2)]:c.target[a]});return function(a,g,p){var q=this!==window?this:null;q&&"string"==typeof f&&(m=function(a,c){var g=q[f];q[f]=a;t&&a!==g&&!1!==c&&t()});m(c(a),h)}},fetch:a,
get:function(g,f,h){h?g+=m.query(f):h=f;return a("get",g,null,h)},"delete":function(g,f,h){h?g+=m.query(f):h=f;return a("delete",g,null,h)},post:function(g,f,h){return a("post",g,f,h)},put:function(g,f,h){return a("put",g,f,h)},patch:function(g,f,h){return a("patch",g,f,h)},query:function(a){if(!v.isObj(a))return"";var f=[],h=encodeURIComponent,c;for(c in a)f.push(h(c)+"="+h(a[c]));return f.length?"?"+f.join("&"):""}};return m}})(domvm);(function(u){function v(a,f,h,c,m,n){var t=null,p=null,q=null;if("/"==h[0]){q=h;p=!1;c={};n=q.split("#");f=n[0].split("?");t=f[0];n=n[1];f[1]&&(m={},f[1].split("&").map(function(a){a=a.split("=");m[a[0]]=null==a[1]?!0:a[1]}));var F,v;for(v in a){h=a[v];var u=h.path;if(F=t.match(h.regexPath)){p=v;-1!==u.indexOf(":")&&(c={},F.shift(),u.replace(/:([^\/]+)/g,function(a,f){c[f]=F.shift()}));break}}}else{p=h;h=a[p];var u=f+h.path,G=h.vars||{},I=/^[^\/]+$/,q=-1!==u.indexOf(":")?t=u.replace(/:([^\/]+)/g,
function(a,f){if((G[f]||I).test(c[f]))return c[f]+="";throw Error("Invalid value for route '"+u+"' segment '"+f+"': '"+c[f]+"'");}):t=u;if(m){var q=q+"?",A;for(A in m)q+=A+(!0!==m[A]?"="+m[A]:"")+"&";q=q.slice(0,-1)}q+=n?"#"+n:""}return{href:q,name:p,path:t,segs:c,hash:n,query:m}}function t(a,f){for(var h in a){var c=a[h];c.regexPath=new RegExp("^"+f+c.path.replace(/:([^\/]+)/g,function(a,f){var g=""+c.vars[f];return"("+g.substring(1,g.lastIndexOf("/"))+")"})+"$")}}var n=[],a=null,h=!1,m="";u.route=
function(g,f){function u(){var a=location,a=h?a.href.substr(a.origin.length):a.hash.substr(1)||"/";return v(y,m,a)}var c=null,B={href:function(a,c,f,g,n){var t=v(y,m,a,c,f,g);return h?(a=function(a){B["goto"](t,null,null,null,n);a.preventDefault()},a.href=t.href,a):"#"+t.href},config:function(a){(h=a.useHist)&&(m=a.root||"");c=a.init||null},refresh:function(){B["goto"](u(),null,null,null,!0)},"goto":function(c,f,g,t,u){u=u||z;c.href||(c=v(y,m,c,f,g,t));if(!1===c.name)console.log("Could not find route");
else{f=null;for(g=0;g<n.length;g++)if(n[g].href===c.href){f=g;break}null===f&&(n.splice(a+1,1E4),n.push(c),f=n.length-1);c=n[a];g=n[f];t=!0;null!==a&&(t=(t=y[c.name].onexit)?t.apply(null,(c?[c.segs,c.query,c.hash]:[]).concat(g)):!0);if(!1!==t&&!1!==y[g.name].onenter.apply(null,(g?[g.segs,g.query,g.hash]:[]).concat(c))){if(h)history[u?"replaceState":"pushState"](null,"title",g.href);a=f}z=!1}},location:function(){return z?u():n[a]}},z=!0,y=g(B,f);t(y,m);window.onhashchange=window.onpopstate=function(a){(h||
"popstate"!=a.type)&&B["goto"](u(),null,null,null,!0)};c&&c();return B}})(domvm);
