/*
 https://github.com/leeoniya/domvm (1.x-dev)
*/
("undefined"!==typeof global?global:this).domvm={};(function(u){var t=("undefined"==typeof window?{}:window).requestAnimationFrame,w={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,zoom:!0},l={TYPE_ELEM:1,
TYPE_TEXT:2,isArr:function(a){return a instanceof Array},isVal:function(a){a=typeof a;return"string"===a||"number"===a},isObj:function(a){return"object"===typeof a&&null!==a&&!l.isArr(a)},isFunc:function(a){return"function"===typeof a},isProm:function(a){return"object"===typeof a&&l.isFunc(a.then)},isElem:function(a){return a instanceof HTMLElement},execAll:function(a,f,p,c,g,v){var y;a&&(l.isArr(a)?a:[a]).forEach(function(a){y=a.call(null,f,p,c,g,v)});return y},repaint:function(a){},insertArr:function(a,
f,p,c){a.splice.apply(a,[p,c].concat(f))},isEvProp:function(a){return"on"===a.substr(0,2)},isDynProp:function(a,f){switch(a){case "input":case "textarea":case "select":case "option":switch(f){case "value":case "checked":case "selected":case "selectedIndex":return!0}}},camelDash:function(a){return a.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},autoPx:function(a,f){return isNaN(f)||w[a]?f:f+"px"},cmpArr:function(a,f){var p=a.length;if(p!=f.length)return!1;for(;p--;)if(a[p]!==f[p])return!1;return!0},
deepSet:function(a,f,p,c,g,v){f=f.split(".");var y=f.pop();f.forEach(function(c){a[c]||(a[c]={});a=a[c]});if(l.isFunc(a[y]))a[y](p,c,g,v);else a[y]=p},deepGet:function(a,f){var p=f.split(".");do a=a[p.shift()];while(p.length);return a},keyedIdx:function(a,f,p,c,g){for(c=0;c<f.length;c++)if(g=f[c],g.key===a)if(p){if(g.vm&&g.vm.view[0]===p)return c}else return c;return-1},raft:function(a){function f(){p=0;a.apply(c,g)}if(!t)return a;var p,c,g;return function(){c=this;g=arguments;p||(p=t(f))}}};u.utils=
l})(domvm);(function(u){function t(b){for(G.repaint&&n.repaint(b);b=H.shift();)b[0].apply(null,b.slice(1))}function w(b,h){return!1===h?null:null==h&&null!=b?b:n.isVal(h)||n.isObj(h)||n.isArr(h)||n.isFunc(h)?h:null}function l(b,h,m,c,z,d){function k(b,h,d){if(d)b[h]=b[h]||[],b[h].push(d);else for(var m in h)b[m]=b[m]||[],b[m].push(h[m])}function e(b,h,m){z=b;d=h;r.update(m,!1);null!=r.node&&(z.body[d]=r.node);return l(0,!1)}function v(b){return null==b?"":b}function l(b,a){a=!1!==a;if(b){for(var c=r;b--&&c.parent;)c=
c.parent;c.redraw(0,!0);return c.vm}(c=r.node)&&f(r,"willRedraw",r);var D=r.refs;r.refs={};r.body=[];var k=r.render.call(r.api,r,h,m),e;if(!1===k||(e=g(k,z,d,r,!0))&&C(c,e))return c.moved=!0,c.wasSame=!0,r.refs=D,r;e.vm=r;r.node=e;D=n.isVal(m)&&"^"===m[0]?m.substr(1):n.isVal(e.ref)&&"^"===e.ref[0]?e.ref.substr(1):null;e.key=null!=m?m:e.key;for(k=z;k;)k.vm&&(r.parent||(r.parent=k.vm,k.vm.body.push(r)),null!==D&&n.deepSet(k.vm.refs,D,e)),k=k.parent;if((D=c)&&(e.type!==c.type||e.tag!==c.tag))var D=null,
O=!0,v=c.el.parentNode;y(e,D);z&&(z.body[d]=e);a&&(c&&p(c),!c&&A||q(e,null,e.el),O&&(v||e.parent.el).insertBefore(e.el,v.childNodes[c.idx]));c&&f(r,"didRedraw",r);a&&c&&H.length&&t(e);return r}var A=!z;n.isArr(b)&&(h=b[1],m=b[2],c=b[3],b=b[0]);m=w(h,m);var r={api:{},node:null,view:[b,m],model:h,opts:c||{},render:null,update:function(b,d){null==b||m===h&&!n.isVal(m)||(h=r.model=b);return!1!==d?l(0):r},on:function(b,h){k(r.events,b,h)},hook:function(b,h){r.hooks=r.hooks||{};k(r.hooks,b,h)},events:{},
hooks:null,redraw:G.debounce?n.raft(l):l,patch:function(b,h){var d=null!=b.el;if(n.isObj(h)){b.props=b.props||{};var m="class"in h?(v(b["class"])+" "+v(h["class"])).trim():b.props["class"],c="style"in h?h.style:b.props.style;d&&(d=Object.create(b.props),d["class"]=m,d.style=c,d={tag:b.tag,el:b.el,ns:b.ns,props:d},I(d,b));b.props["class"]=m;b.props.style=c}else m=b.parent,d=y(g(h,m,b.idx,r),b),m.body[b.idx]=d},emit:function(b){for(var h=Array.prototype.slice.call(arguments),d=r,m;d;){if(m=d.events[b]){h[0]=
m;n.execAll.apply(null,h);break}d=d.parent}},refs:{},parent:null,body:[],mount:function(b,h){var d=null;h&&(b.textContent="",d=b,b=null);q(r.node,d,null,b);t(r.node);return r},attach:function(b){a(r.node,b);return r},unmount:function(){p(r.node)},moveTo:e,updIdx:function(b){d=b}};c&&c.hooks&&r.hook(c.hooks);n.execAll(F,r);r.render=b.call(r.api,r,h,m);return z?e(z,d):l(0)}function a(b,h){b.el=h;h._node=b;for(var m in b.props){var c=b.props[m],z=n.isEvProp(m)?m:"."===m[0]?m.substr(1):null;null!==z&&
(h[z]=c)}if(n.isArr(b.body))for(m=0;m<b.body.length;m++)a(b.body[m],h.childNodes[m])}function f(b,h,m,c,a,d){if(b&&b.hooks&&(b=b.hooks[h]))if("did"==h.substr(0,3))H.push([n.execAll,b,m,c,a,d]);else return n.execAll(b,m,c,a,d)}function p(b,h){var m=b.el&&!b.moved;if(m){var a=f(b.vm,"willUnmount",b.vm),z=f(b,"willRemove",b),d=a||z;b.removed=!0}b.wasSame?b.wasSame=!1:(n.isArr(b.body)&&b.body.forEach(function(b,m){p(b,h||d)}),h||(d?d.then(function(){c(b,m,!0)}):c(b,m)));b.moved=!1}function c(b,h,m){null!=
b.el&&b.el.parentNode?h&&(b.el.parentNode.removeChild(b.el),b.el=null,e(b),f(b.vm,"didUnmount",b.vm),f(b,"didRemove",b),m&&t(b.parent)):e(b)}function g(b,h,m,c,a){var d=b;b=0<J.length?J.pop():{type:null,key:null,ref:null,idx:null,parent:null,moved:!1,wasSame:!1,removed:!1,hooks:null,tag:null,"class":null,ns:null,guard:!1,raw:!1,props:null,el:null,hasKeys:!1,body:null,data:null,diff:null};n.isFunc(d)&&(d=d());var e=d.length;if(n.isArr(d)&&e){b.type=n.TYPE_ELEM;if(1<e){var k=1;!n.isObj(d[1])||d[1].redraw||
n.isElem(d[1])||(b.props=d[1],k=2);b.body=e==k+1?n.isVal(d[k])?d[k]:n.isFunc(d[k])?d[k]():d.slice(k):d.slice(k)}d=d[0];e=M[d];e||(e=["",""],e={tag:(d.match(/^[-\w]+/)||["div"])[0],id:(d.match(/#([-\w]+)/)||e)[1],"class":(d.match(/\.([-\w.]+)/)||e)[1].replace(/\./g," ")},M[d]=e);b.tag=e.tag;if(e.id||e["class"])d=b.props||{},e.id&&null==d.id&&(d.id=e.id),e["class"]&&(b["class"]=e["class"],d["class"]=e["class"]+(null!=d["class"]?" "+d["class"]:"")),b.props=d;if(b.props){var d=b.props,g;for(g in d)!n.isEvProp(g)&&
n.isFunc(d[g])&&("href"==g?(d.onclick=d[g],d.href=d[g].href):d[g]=d[g]()),n.isDynProp(b.tag,g)&&(d["."+g]=d[g]);if(n.isObj(d.style))for(var f in d.style)g=d.style[f],n.isFunc(g)&&(d.style[f]=g());n.isObj(d._hooks)&&(b.hooks=d._hooks,d._hooks=null);b.key=n.isVal(d._key)?d._key:n.isVal(d._ref)?d._ref:n.isVal(d.id)?d.id:n.isVal(d.name)?d.name:null;null!=d._ref&&(b.ref=d._ref);d._raw&&(b.raw=!0);null!=d._data&&(b.data=d._data);d._diff&&(b.diff=d._diff);d._ref=d._key=d._raw=d._data=d._diff=null}}else n.isVal(d)?
(b.type=n.TYPE_TEXT,b.body=d):n.isElem(d)&&(b.type=n.TYPE_ELEM,b.el=d,b.tag=d.nodeName.toLowerCase());null!==b.ref&&n.deepSet(c.refs,b.ref,b);b.parent=h;b.idx=m;b.ns=h&&h.ns?h.ns:"svg"===b.tag||"math"===b.tag?b.tag:null;a||b.diff||!n.isArr(b.body)||v(b,c);return b}function v(b,h){for(var m=0,c=b.body.length;m<c;m++){var a=b.body[m],d=null,e=null,k=!1,f=!1;n.isFunc(a)&&(a=a());if(null==a)k=!0;else{var p=n.isArr(a),v=p?!1:n.isObj(a);if(p)a.length?"string"==typeof a[0]&&""!==a[0]?(e=g(a,b,m,h),d=e.key):
n.isFunc(a[0])?d=w(a[1],a[2]):f=!0:k=!0;else if(v)if(n.isFunc(a.redraw))a.moveTo(b,m),e=a.node,d=a.view[1];else if(n.isElem(a))e=g(a,b,m,h);else{b.body[m--]=""+a;continue}else""===a?k=!0:0<m&&b.body[m-1].type===n.TYPE_TEXT?(b.body[m-1].body+=""+a,k=!0):e=g(""+a,b,m,h)}k||f?(f?n.insertArr(b.body,a,m,1):b.body.splice(m,1),c=b.body.length,m--):(null!==d&&(b.hasKeys=!0),b.body[m]=e||a)}b.body._init=!0}function y(b,h){if(C(h,b))return h.moved=!0,h.wasSame=!0,h;h&&(f(b,"willRecycle",h,b),A(h,b),f(b,"didRecycle",
h,b));if(n.isArr(b.body)){if(!b.body._init){for(var a=b;!a.vm;)a=a.parent;v(b,a.vm)}var c=0;b.body.forEach(function(a,d){var m=n.isArr(a);if(h){var e=B(a,b,h,c);if(null!==e){var k=e[0],e=e[1];k===c&&c++;k=h.body[k];k.vm?m?2===e?k.vm.moveTo(b,d,a[1]):1===e&&l(a[0],a[1],a[2],a[3],b,d):a.vm&&2===e&&a.vm===k.vm&&k.vm.moveTo(b,d):b.body[d]=y(a,k);return}}m?l(a[0],a[1],a[2],a[3],b,d):b.body[d]=y(a)})}return b}function q(b,h,a,c){for(var e=!b.el;a&&a._node.removed;)a=a.nextSibling;e&&b.vm&&f(b.vm,"willMount",
b.vm);if(b.type==n.TYPE_ELEM)if(e&&(b.el=h||(b.ns?K.createElementNS(P[b.ns],b.tag):K.createElement(b.tag)),b.props&&I(b)),n.isArr(b.body)){h=0;for(var d=b.el.firstChild;h<b.body.length;h++)d=q(b.body[h],null,d)}else n.isVal(b.body)&&(b.raw?b.el.innerHTML=b.body:e&&(b.el.textContent=b.body));else b.type==n.TYPE_TEXT&&e&&(b.el=K.createTextNode(b.body));b.el._node=b;h=b.parent;a!==b.el&&(c||h&&h.el)&&(h=e?"Insert":"Reinsert",f(b,"will"+h,b),(c||b.parent.el).insertBefore(b.el,a),f(b,"did"+h,b));e&&b.vm&&
b.vm.hooks&&!b.moved&&f(b.vm,"didMount",b.vm);return a!==b.el?a:a.nextSibling}function B(b,h,a,c,e){var d=n.isArr(b),k=d?w(b[1],b[2]):b.key,g=a.hasKeys,f=h.hasKeys;a=a.body;h=h.body;if(null!==k&&g)return b=n.keyedIdx(k,a,d?b[0]:null),-1<b?[b,2]:null;c=c||0;if(c>a.length-1)return null;e=0===e?0:e||a.length-1;for(k=null;c<=e;c++)if(g=a[c],null!==g&&g.el)if(d&&g.vm){if(g.vm.view[0]===b[0]){if(g.vm.view[1]===w(b[1],b[2]))return[c,2];!k&&f&&-1==n.keyedIdx(g.key,h,g.vm.view[0])&&(k=[c,1])}}else if(b.type===
g.type&&(b.type===n.TYPE_TEXT||null!==b.tag&&b.tag===g.tag)&&(null===g.key||!f||-1==n.keyedIdx(g.key,h,g.vm?g.vm.view[0]:null)))return[c,1];return k}function C(b,a){if(b&&b.diff&&a.diff&&b.diff[0]===a.diff[0]){var c=b.diff.slice(1).concat(a.diff.slice(1));return!a.diff[0].apply(null,c)}return!1}function A(b,a){if(b.el)if(a.el=b.el,b.el=null,a.el&&(a.el._node=a),a.type===n.TYPE_TEXT&&a.body!==b.body)a.el.nodeValue=a.body;else{I(a,b);var c=!n.isArr(a.body),e=!n.isArr(b.body);c&&a.body!==b.body?e&&a.el.firstChild?
a.el.firstChild.nodeValue=a.body:a.raw?a.el.innerHTML=a.body:a.el.textContent=a.body:e&&!c&&(a.el.textContent="");b.moved=!0}}function e(b){b.removed&&b.vm&&(b.vm.node=null);b.el=b.key=b.ref=b.data=b.diff=b.vm=b.body=b.props=null;b.raw=b.moved=b.wasSame=b.removed=!1;J.push(b)}function k(b,a,c,e){return function(c){var d,k=c.target._node,m=null;if(n.isFunc(b))d=b.call(a,c,k,e);else if(n.isArr(b))m=b.slice(1),d=b[0].apply(a,m.concat(c,k,e));else if(n.isObj(b))for(var g in b){var f=b[g];null!=f&&"_"!=
g[0]&&c.target.matches(g)&&(n.isArr(f)?(m=f.slice(1),d=f[0].apply(a,m.concat(c,k,e))):n.isFunc(f)&&(d=f.call(a,c,k,e)))}!1===d&&(c.preventDefault(),c.stopPropagation());e.opts.hasOwnProperty("watch")&&e.opts.watch.fire({type:"event",vm:e,node:k,event:c,data:m})}}function I(b,a){var c=!a;a=a||{};if(a.props||b.props){var e=a.props||{},k=b.props||{},d=e.style,g=k.style;if(n.isObj(d)||n.isObj(g))N(b.el,b.tag,d||{},g||{},x,Q,b.ns,c,b),e.style=k.style=null;N(b.el,b.tag,e,k,L,E,b.ns,c,b);g&&(k.style=g)}}
function N(b,a,c,e,k,d,g,f,p){for(var v in e)if(a=e[v],null!==a){var l="."===v[0]?b[v.substr(1)]:c[v];a===l||n.isArr(a)&&n.isArr(l)&&n.cmpArr(a,l)||k(b,v,a,g,f,p)}for(v in c)null!==c[v]&&null==e[v]&&d(b,v,g,f)}function x(b,a,c){b.style[a]=n.autoPx(a,c)}function Q(b,a){b.style[a]=""}function L(b,a,c,e,g,d){if("."===a[0])a=a.substr(1),"svg"===e?b[a].baseVal=c:b[a]=c;else if("class"===a)b.className=c;else if("id"===a)b[a]=c;else if(n.isEvProp(a)){for(e=d;!e.vm;)e=e.parent;b[a]=k(c,e.vm.opts.evctx||e.vm.model||
null,d,e.vm)}else!1===c?E(b,a,e,g):b.setAttribute(a,!0===c?"":c)}function E(b,a,c,e){e||("."===a[0]?(a=a.substr(1),"svg"===c?b[a].baseVal=null:b[a]=null):"class"===a?b.className="":"id"===a||n.isEvProp(a)?b[a]=null:b.removeAttribute(a))}var P={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},K="undefined"==typeof document?{}:document,M={},J=[],H=[],G={debounce:!0,repaint:!0};u.view=l;u.view.config=function(b){for(var a in b)G[a]=b[a]};var F=null;u.view.extend=function(b,
a){F=!F||a?[]:F;F.push(b)};var n=u.utils;return u})(domvm);(function(u){var t=/^(?:img|br|input|col|link|meta|area|base|command|embed|hr|keygen|param|source|track|wbr)$/,w=u.utils;u.html=function(l){var a="";switch(l.type){case w.TYPE_ELEM:a+="<"+l.tag;if(l.props){var f=w.isVal(l.props.style)?l.props.style:"",p=w.isObj(l.props.style)?l.props.style:null;if(p)for(var c in p)null!==p[c]&&(f+=w.camelDash(c)+": "+w.autoPx(c,p[c])+"; ");for(c in l.props)w.isEvProp(c)||"."===c[0]||(p=l.props[c],w.isFunc(p)&&(p=p()),w.isObj(p)||(!0===p?a+=" "+c:!1!==p&&null!==p&&
"."!==c[0]&&(a+=" "+c+'="'+p+'"')));f.length&&(a+=' style="'+f.trim()+'"')}if(l.ns&&"svg"!==l.tag&&"math"!==l.tag&&!l.body)return a+"/>";a+=">";break;case w.TYPE_TEXT:return l.body}t.test(l.tag)||(w.isArr(l.body)?l.body.forEach(function(c){a+=u.html(c)}):a+=l.body||"",a+="</"+l.tag+">");return a}})(domvm);(function(u){var t=u.utils;u.watch=function(w){function l(){}function a(a,g,f,l,q){q=q||{};q.method=a.toUpperCase();"credentials"in q||(q.credentials="same-origin");null!==f&&(t.isArr(f)||t.isObj(f)?(q.headers=q.headers||new Headers,q.headers.set("Content-Type","application/json"),q.body=JSON.stringify(f)):q.body=""+f);var B=l,C=function(a){return Promise.reject(a)};l instanceof Array&&(B=l[0],l[1]&&(C=l[1]));var A={type:"fetch",fetch:{method:a,url:g,body:f}};l=fetch(g,q).then(function(a){if(200<=
a.status&&300>a.status)return a;var c=Error(a.status+": "+a.statusText);c.data=a;return Promise.reject(c)}).then(function(a){switch(a.headers.get("Content-Type").split("; ")[0]){case "application/json":return a.json();case "text/plain":return a.text();default:return a}}).then(B,C).then(function(a){!1!==a&&p.fire(A);return a},function(a){A.error=a;p.fire(A);return Promise.reject(a)});l._fetchArgs=[a,g,f,[B,C],q];return l}var f=[];t.isFunc(w)&&f.push(w);var p={on:function(a){f.push(a);return p},off:function(a){f.splice(f.indexOf(a),
1);return p},fire:t.raft(function(a){t.execAll(f,a);return p}),prop:function(c,g,f){var y=c,q=function(a,c,e){if(arguments.length&&a!==y){e=e||{type:"prop",prop:q,data:{old:y,"new":a}};f&&(a=f(e));if("undefined"==typeof a||a===y)return y;y=e.data["new"]=a;t.isFunc(c)?c(e):!1!==c&&p.fire(e)}return y};q._prop=!0;if(g&&g.then){q.update=l;if(g._fetchArgs){var B=g._fetchArgs[3];g._fetchArgs[3]=[function(a){return q(B[0]?B[0](a):a)},B[1]];q.update=function(){a.apply(null,g._fetchArgs)}}g.then(q)}return q.toString=
q},sync:function(a,g,f){var l=a,q=g;t.isFunc(l)||(l=function(g,f,l){if("string"==typeof a){var e,k;"e."==a.substr(0,2)?(e=g,k=a.substr(2)):(e=g.target,k=a)}return t.deepGet(e,k)});t.isArr(q)&&(q=function(a,c,f){var e=g[0],k=g[1];t.isFunc(k)&&(k=k(f.event,f.node,f.vm));var l=t.deepGet(e,k);a!==l&&(t.deepSet(e,k,a,c,f),t.isFunc(c)?c(f):!1!==c&&p.fire(f))});return function(a,c,g){var e={type:"sync",vm:g,node:c,event:a};q(l(a,c,g),f,e)}},fetch:a,get:function(c,g,f){f?c+=p.query(g):f=g;return a("get",
c,null,f)},"delete":function(c,g,f){f?c+=p.query(g):f=g;return a("delete",c,null,f)},post:function(c,g,f){return a("post",c,g,f)},put:function(c,f,l){return a("put",c,f,l)},patch:function(c,f,l){return a("patch",c,f,l)},query:function(a){if(!t.isObj(a))return"";var f=[],l=encodeURIComponent,p;for(p in a)f.push(l(p)+"="+l(a[p]));return f.length?"?"+f.join("&"):""}};return p}})(domvm);(function(u){function t(a,c,f,g,l,p){var e=null,k=null,t=null;if("/"==f[0]){t=f;k=!1;g={};p=t.split("#");c=p[0].split("?");e=c[0];p=p[1];c[1]&&(l={},c[1].split("&").map(function(a){a=a.split("=");l[a[0]]=null==a[1]?!0:a[1]}));var w,x;for(x in a){f=a[x];var u=f.path;if(w=e.match(f.regexPath)){k=x;-1!==u.indexOf(":")&&(g={},w.shift(),u.replace(/:([^\/]+)/g,function(a,c){g[c]=w.shift()}));break}}}else{k=f;f=a[k];var u=c+f.path,L=f.vars||{},t=-1!==u.indexOf(":")?e=u.replace(/:([^\/]+)/g,function(a,c){if((L[c]||
/^[^\/]+$/).test(g[c]))return g[c]+="";throw Error("Invalid value for route '"+u+"' segment '"+c+"': '"+g[c]+"'");}):e=u;if(l){var t=t+"?",E;for(E in l)t+=E+(!0!==l[E]?"="+l[E]:"")+"&";t=t.slice(0,-1)}t+=p?"#"+p:""}return{href:t,name:k,path:e,segs:g,hash:p,query:l}}function w(a,c){for(var f in a){var g=a[f];g.regexPath=new RegExp("^"+c+g.path.replace(/:([^\/]+)/g,function(a,c){var e=""+((g.vars||{})[c]||/[^\/]+/);return"("+e.substring(1,e.lastIndexOf("/"))+")"})+"$")}}var l=[],a=null,f=!1,p=null,
c=null,g="";u.route=function(v,u){function q(){var a=location,a=f?a.href.substr(a.origin.length):a.hash.substr(1)||"/";return t(A,g,a)}var B=null,C={href:function(a,c,e,l,p){var q=t(A,g,a,c,e,l);return f?(a=function(a){C["goto"](q,null,null,null,p);a.preventDefault()},a.href=q.href,a):"#"+q.href},config:function(a){(f=a.useHist)&&(g=a.root||"");p=a.willEnter||null;c=a.willExit||null;B=a.init||null},refresh:function(){C["goto"](q(),null,null,null,!0)},"goto":function(k,q,u,x,w){k.href||(k=t(A,g,k,
q,u,x));if(!1===k.name)console.log("Could not find route");else{q=null;for(x=0;x<l.length;x++)if(l[x].href===k.href){q=x;break}null===q&&(l.splice(a+1,1E4),l.push(k),q=l.length-1);k=l[a];x=l[q];var v=!0;u=!0;null!==a&&(c&&(v=c(k,x)),!1!==v&&(v=(v=A[k.name].onexit)?v.apply(null,(k?[k.segs,k.query,k.hash]:[]).concat(x)):!0));!1!==v&&(p&&(u=p(x,k)),!1!==u&&(u=A[x.name].onenter.apply(null,(x?[x.segs,x.query,x.hash]:[]).concat(k))),!1!==u&&(f?(e=!0,history[w?"replaceState":"pushState"](null,"title",x.href)):
(x="#"+x.href,location.hash!==x&&(e=!0,w?location.replace(x):location.hash=x)),a=q))}},location:function(){return null==a?q():l[a]}},A=v(C,u);w(A,g);var e=!1;window.onhashchange=window.onpopstate=function(a){if(f||"popstate"!=a.type)!f&&e?e=!1:C["goto"](q(),null,null,null,!0)};B&&B();return C}})(domvm);
