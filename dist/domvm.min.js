/*
 https://github.com/leeoniya/domvm
*/
("undefined"!==typeof global?global:this).domvm={};(function(u){var z="undefined"==typeof window?{}:window,r={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,zoom:!0},e={TYPE_ELEM:1,TYPE_TEXT:2,isArr:function(b){return b instanceof
Array},isVal:function(b){b=typeof b;return"string"===b||"number"===b},isObj:function(b){return"object"===typeof b&&null!==b&&!e.isArr(b)},isFunc:function(b){return"function"===typeof b},isProm:function(b){return"object"===typeof b&&e.isFunc(b.then)},execAll:function(b,v){b&&(e.isArr(b)?b:[b]).forEach(function(b){return b.apply(null,v)})},insertArr:function(b,e,k,g){b.splice.apply(b,[k,g].concat(e))},isEvProp:function(b){return"on"===b.substr(0,2)},isDynProp:function(b,e){switch(b){case "input":case "textarea":case "select":case "option":switch(e){case "value":case "checked":case "selected":case "selectedIndex":return!0}}},
camelDash:function(b){return b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},autoPx:function(b,e){return isNaN(e)||r[b]?e:e+"px"},indexOfKey:function(b,e,k,g){for(k=0;k<e.length;k++)if(e[k].key===b)return k;return-1},raft:function(b){function e(){k=0;b.apply(g,x)}if(!z.requestAnimationFrame)return b;var k,g,x;return function(){g=this;x=arguments;k||(k=z.requestAnimationFrame(e))}}};u.util=e})(domvm);(function(u){function z(a,c){return!1===c?null:null==c&&null!=a?a:l.isVal(c)||l.isObj(c)||l.isArr(c)||l.isFunc(c)?c:null}function r(a,c,C,B,d,n){function f(a,c,d){if(d)a[c]=a[c]||[],a[c].push(d);else for(var n in c)a[n]=a[n]||[],a[n].push(c[n])}function m(a,c,b){d=a;n=c;p.update(b,!1);return E(0,!1)}function E(a,B){if(a){for(var f=p;a--&&f.parent;)f=f.parent;f.redraw(0,!0);return f.vm}p.hooks&&l.execAll(p.hooks.willRedraw);p.refs={};var f=p.node,m=p.render.call(p.api,p,c,C),m=k(m,d,n,p);m.vm=p;p.node=
m;var y=l.isVal(C)&&"^"===C[0]?C.substr(1):l.isVal(m.ref)&&"^"===m.ref[0]?m.ref.substr(1):null;m.key=l.isVal(C)?C:m.key;for(var e=d;e;)e.vm&&(p.parent||(p.parent=e.vm),null!==y&&(e.vm.refs[y]=m)),e=e.parent;if((y=f)&&(m.type!==f.type||m.tag!==f.tag))var y=null,E=!0;g(m,y);d&&(d.body[n]=m);!1!==B&&(f&&b(f),!f&&t||x(m,null,m.el),E&&(f.el.parentNode.replaceChild(m.el,f.el),f.el=null));Promise.resolve().then(function(){p.hooks&&l.execAll(p.hooks.didRedraw)});return p}function h(a){p.hooks&&l.execAll(p.hooks.willUnmount);
if(d)if(a){for(a=n+1;a<d.body.length;a++){var c=d.body[a];c.idx=a-1;c.vm&&c.vm.updIdx(c.idx)}d.body.splice(n,1)}else d.body[n]=null;b(p.node,!0);p.node.vm=null;p.hooks&&l.execAll(p.hooks.didUnmount)}var t=!d;l.isArr(a)&&(c=a[1],C=a[2],B=a[3],a=a[0]);C=z(c,C);var p={api:{},node:null,view:[a,C],model:c,opts:B||{},render:null,update:function(a,d){null!=a&&C!==c&&(c=p.model=a);return!1!==d?E(0):p},on:function(a,c){f(p.events,a,c)},hook:function(a,c){p.hooks=p.hooks||{};f(p.hooks,a,c)},events:{},hooks:null,
redraw:J.useRaf?l.raft(E):E,patch:function(a,c){var d=a.parent,n=g(k(c,d,a.idx,p),a);d.body[a.idx]=n},emit:function(a){for(var c=Array.prototype.slice.call(arguments,1),d=p;d;){if(d.events[a]){l.execAll(d.events[a],c);break}d=d.parent}},refs:{},parent:null,mount:function(a,c){p.hooks&&l.execAll(p.hooks.willMount);c&&(a.textContent="");x(p.node,c?a:null);c||a.insertBefore(p.node.el,null);p.hooks&&l.execAll(p.hooks.didMount);return p},attach:function(a){e(p.node,a);return p},unmount:function(){w(p.hooks,
"Unmount",h,[])},moveTo:m,updIdx:function(a){n=a}};B&&B.hooks&&p.hook(B.hooks);l.execAll(H,[p]);p.render=a.call(p.api,p,c,C);return d?m(d,n):E(0)}function e(a,c){a.el=c;if(l.isArr(a.body))for(var f=0;f<a.body.length;f++)e(a.body[f],c.childNodes[f])}function b(a,c){l.isArr(a.body)&&(a.body.forEach(function(a,c){a&&(a.vm&&!a.moved?a.vm.unmount():b(a,!0))}),a.body=null);a.vm=null;c&&a.el&&a.el.parentNode&&w(a.hooks,"Remove",v,[a])}function v(a){a.el.parentNode.removeChild(a.el);a.el=null}function k(a,
c,b,B){var d=a,n={type:null,key:null,ref:null,idx:null,parent:null,moved:!1,hooks:null,tag:null,ns:null,guard:!1,raw:!1,props:null,el:null,hasKeys:!1,body:null};l.isFunc(d)&&(d=d());if(l.isArr(d)&&d.length){n.type=l.TYPE_ELEM;if(1<d.length){var y=1;l.isObj(d[1])&&(n.props=d[1],y=2);n.body=d.length==y+1?l.isVal(d[y])?d[y]:l.isFunc(d[y])?d[y]():d.slice(y):d.slice(y)}d=d[0];if(/[.#]/.test(d)){if(d=D(d),n.tag=d.tag,d.id||d["class"])n.props=n.props||{},n.props.id=d.id,n.props["class"]=d["class"]}else n.tag=
d;if(n.props){var d=n.props,m;for(m in d)l.isEvProp(m)?d[m]=f(d[m],B.opts.evctx||B.model||null,n,B):l.isFunc(d[m])&&("href"==m?(d.onclick=d[m],d.href=d[m].href):d[m]=d[m]()),l.isDynProp(n.tag,m)&&(d["."+m]=d[m]);if(l.isObj(d.style))for(var e in d.style)m=d.style[e],l.isFunc(m)&&(d.style[e]=m());l.isObj(d._hooks)&&(n.hooks=d._hooks,d._hooks=null);n.key=l.isVal(d._key)?d._key:l.isVal(d._ref)?d._ref:l.isVal(d.id)?d.id:l.isVal(d.name)?d.name:null;d._ref&&(n.ref=d._ref);d._raw&&(n.raw=!0);d._data&&(n.data=
d._data);d._guard&&(n.guard=!0);d._ref=d._key=d._raw=d._data=d._guard=null}}else l.isVal(d)&&(n.type=l.TYPE_TEXT,n.body=d);null!==n.ref&&(B.refs[n.ref]=n);n.parent=c;n.idx=b;n.ns=c&&c.ns?c.ns:"svg"===n.tag||"math"===n.tag?n.tag:null;if(l.isArr(n.body))for(c=0,b=n.body.length;c<b;c++){e=n.body[c];var d=m=null,g=y=!1;l.isFunc(e)&&(e=e());if(null==e)y=!0;else{var h=l.isArr(e),p=h?!1:l.isObj(e);if(h)e.length?l.isArr(e[0])?g=!0:l.isFunc(e[0])?m=z(a[1],a[2]):(d=k(e,n,c,B),m=d.key):y=!0;else if(p)if(l.isFunc(e.redraw))e.moveTo(n,
c),d=e.node,m=e.view[1];else{n.body[c--]=""+e;continue}else""===e?y=!0:0<c&&n.body[c-1].type===l.TYPE_TEXT?(n.body[c-1].body+=""+e,y=!0):d=k(""+e,n,c,B)}y||g?(g?l.insertArr(n.body,e,c,1):n.body.splice(c,1),b=n.body.length,c--):(null!==m&&(n.hasKeys=!0),n.body[c]=d||e)}return n}function g(a,c){c&&w(a.hooks,"Recycle",q,[c,a]);if(l.isArr(a.body)){var e=0;a.body.forEach(function(f,d){var n=l.isArr(f);if(c){var b=h(f,a,c,e);if(null!==b){var m=b[0],b=b[1];m===e&&e++;m=c.body[m];n&&m.vm?2===b?m.vm.moveTo(a,
d,f[1]):1===b&&r(f[0],f[1],f[2],f[3],a,d):a.body[d]=g(f,m);return}}n?r(f[0],f[1],f[2],f[3],a,d):a.body[d]=g(f)})}return a}function x(a,c,f){var b=!a.el;if(a.type==l.TYPE_ELEM)if(b&&(a.el=c&&c.nodeName?c:a.ns?K.createElementNS(F[a.ns],a.tag):K.createElement(a.tag),a.props&&A(a)),l.isArr(a.body)){c=0;for(var d=a.el.firstChild;c<a.body.length;c++)d=x(a.body[c],null,d)?d:d.nextSibling||null}else l.isVal(a.body)&&(a.raw?a.el.innerHTML=a.body:b&&(a.el.textContent=a.body));else a.type==l.TYPE_TEXT&&b&&(a.el=
K.createTextNode(a.body));a.el._node=a;if(f===a.el)return!1;if((c=a.parent)&&c.el)return w(a.hooks,b?"Insert":"Reinsert",t,[a,f]),!0}function t(a,c){a.parent.el.insertBefore(a.el,c)}function h(a,c,f,b,d){var e=l.isArr(a),g=e?a[2]||null:a.key,m=f.hasKeys,h=c.hasKeys;f=f.body;c=c.body;if(null!==g&&m&&(g=l.indexOfKey(g,f),-1<g))return[g,2];b=b||0;if(b>f.length-1)return null;d=0===d?0:d||f.length-1;for(g=null;b<=d;b++)if(m=f[b],null!==m&&m.el)if(e&&m.vm){if(m.vm.view[0]===a[0]){if(m.vm.view[1]===z(a[1],
a[2]))return[b,2];var k=!1;if(J.viewScan)for(var x=0;x<c.length;x++){var p=c[x];if(!p.el&&p.vm&&p.vm.view[0]===m.vm.view[0]&&p.vm.view[1]===m.vm.view[1]){k=!0;break}}k||g||!h||-1!=l.indexOfKey(m.key,c)||(g=[b,1])}}else if(a.type===m.type&&(a.type===l.TYPE_TEXT||null!==a.tag&&a.tag===m.tag)&&(null===m.key||!h||-1==l.indexOfKey(m.key,c)))return[b,1];return g}function q(a,c){c.el=a.el;a.el=null;if(c.type===l.TYPE_TEXT&&c.body!==a.body)c.el.nodeValue=c.body;else{A(c,a);var f=!l.isArr(c.body),b=!l.isArr(a.body);
f&&c.body!==a.body?b&&c.el.firstChild?c.el.firstChild.nodeValue=c.body:c.raw?c.el.innerHTML=c.body:c.el.textContent=c.body:b&&!f&&(c.el.textContent="");a.moved=!0}}function w(a,c,f,b,d,e){if(a){var g=a["will"+c];l.isArr(g)&&(g=g[0]);var m=a["did"+c];l.isArr(m)&&(m=m[0]);a=function(){f.apply(null,b);m&&m.apply(null,e||d||b)};g?(g=g.apply(null,d||b),l.isProm(g)?g.then(a):a()):a()}else f.apply(null,b)}function D(a){if(a in L)return L[a];var c={tag:null,id:null,"class":null};c.tag=a.replace(/^([\w\-]+)?(?:#([\w\-]+))?((?:\.[\w\-]+)+)?$/,
function(a,f,d,b){d&&(c.id=d);b&&(c["class"]=b.replace(/\./g," ").trim());return f||"div"});return L[a]=c}function f(a,c,f,b){return function(d){var f,e=d.target._node;if(l.isFunc(a))f=a.call(c,d,e);else if(l.isArr(a))f=a[0].apply(c,a.slice(1).concat(d,e));else if(l.isObj(a))for(var g in a){var h=a[g];d.target.matches(g)&&(l.isArr(h)?f=h[0].apply(c,h.slice(1).concat(d,e)):l.isFunc(h)&&(f=h.call(c,d,e)))}!1===f&&(d.preventDefault(),d.stopPropagation());b.opts.hasOwnProperty("watch")&&b.opts.watch.fire({vm:b,
node:e})}}function A(a,c){var f=!c;c=c||{};if(c.props||a.props){var b=c.props||{},d=a.props||{},e=b.style,g=d.style;if(l.isObj(e)||l.isObj(g))G(a.el,a.tag,e||{},g||{},M,N,a.ns,f),b.style=d.style=null;G(a.el,a.tag,b,d,O,I,a.ns,f);g&&(d.style=g)}}function G(a,c,f,b,d,e,g,l){for(var h in b)null!==b[h]&&(b[h]===f[h]&&"."!==h[0]||d(a,h,b[h],g,l));for(h in f)null!==f[h]&&null==b[h]&&e(a,h,g,l)}function M(a,c,f){a.style[c]=l.autoPx(c,f)}function N(a,c){a.style[c]=""}function O(a,c,f,b,d){"."===c[0]?(c=c.substr(1),
"svg"===b?a[c].baseVal=f:a[c]=f):"class"===c?a.className=f:"id"===c||l.isEvProp(c)?a[c]=f:!1===f?I(a,c,b,d):a.setAttribute(c,!0===f?"":f)}function I(a,c,f,b){b||("."===c[0]?(c=c.substr(1),"svg"===f?a[c].baseVal=null:a[c]=null):"class"===c?a.className="":"id"===c||l.isEvProp(c)?a[c]=null:a.removeAttribute(c))}var F={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},L={},K="undefined"==typeof document?{}:document,J={useRaf:!0,viewScan:!1,useDOM:!1};u.view=r;u.view.config=function(a){J=
a};var H=null;u.view.extend=function(a,c){H=!H||c?[]:H;H.push(a)};var l=u.util;return u})(domvm);(function(u){var z=/^(?:img|br|input|col|link|meta|area|base|command|embed|hr|keygen|param|source|track|wbr)$/,r=u.util;u.html=function(e){var b="";switch(e.type){case r.TYPE_ELEM:b+="<"+e.tag;if(e.props){var v=r.isVal(e.props.style)?e.props.style:"",k=r.isObj(e.props.style)?e.props.style:null;if(k)for(var g in k)null!==k[g]&&(v+=r.camelDash(g)+": "+r.autoPx(g,k[g])+"; ");for(g in e.props)r.isEvProp(g)||"."===g[0]||(k=e.props[g],r.isFunc(k)&&(k=k()),r.isObj(k)||(!0===k?b+=" "+g:!1!==k&&null!==k&&
"."!==g[0]&&(b+=" "+g+'="'+k+'"')));v.length&&(b+=' style="'+v.trim()+'"')}if(e.ns&&"svg"!==e.tag&&"math"!==e.tag&&!e.body)return b+"/>";b+=">";break;case r.TYPE_TEXT:return e.body}z.test(e.tag)||(r.isArr(e.body)?e.body.forEach(function(e){b+=u.html(e)}):b+=e.body||"",b+="</"+e.tag+">");return b}})(domvm);(function(u){var z=u.util;u.watch=function(r){function e(){}function b(b,x,t,h,q){q=q||{};q.method=(q.method||b).toUpperCase();if(null!==t){var w=Object.prototype.toString.call(t);"[object Array]"===w||"[object Object]"===w?(q.headers=q.headers||new Headers,q.headers.set("Content-Type","application/json"),q.body=JSON.stringify(t)):q.body=""+t}var w=h,D=e;h instanceof Array&&(w=h[0],h[1]&&(D=h[1]));h=fetch(x,q).then(function(f){if(200<=f.status&&300>f.status)return f;var b=Error(f.status+": "+f.statusText);
b.data=f;return Promise.reject(b)}).then(function(f){switch(f.headers.get("Content-Type").split("; ")[0]){case "application/json":return f.json();case "text/plain":return f.text();default:return f}}).then(w,D).then(function(f){!1!==f&&k.fire();return f},function(f){k.fire();return f});h._fetchArgs=[b,x,t,[w,D],q];return h}var v=[];z.isFunc(r)&&v.push(r);var k={on:function(b){v.push(b);return k},off:function(b){v.splice(v.indexOf(b),1);return k},fire:z.raft(function(){z.execAll(v,arguments);return k}),
prop:function(g,x){var t=g,h=function(b,e){arguments.length&&b!==t&&(t=b,!1!==e&&k.fire());return t};if(x&&x.then){h.update=e;if(x._fetchArgs){var q=x._fetchArgs[3];x._fetchArgs[3]=[function(b){return h(q[0]?q[0](b):b)},q[1]];h.update=function(){b.apply(null,x._fetchArgs)}}x.then(h)}return h.toString=h},sync:function(b,e,k){var h=b,q=e;"string"==typeof b&&(h=function(e){return"e."===b.substr(0,2)?e[b.substr(2)]:e.target[b]});return function(b){var g=this!==window?this:null;g&&"string"==typeof e&&
(q=function(b,h){var k=g[e];g[e]=b;r&&b!==k&&!1!==h&&r()});q(h(b),k)}},get:function(e,k,t){return b("get",e,null,k,t)},"delete":function(e,k,t){return b("delete",e,null,k,t)},post:function(e,k,t,h){return b("post",e,k,t,h)},put:function(e,k,t,h){return b("put",e,k,t,h)},patch:function(e,k,t,h){return b("patch",e,k,t,h)}};return k}})(domvm);(function(u){function z(b,e,k,h,q,w){var r=null,f=null,A=null;if("/"==k[0]){A=k;f=!1;h={};w=A.split("#");e=w[0].split("?");r=e[0];w=w[1];e[1]&&(q={},e[1].split("&").map(function(b){b=b.split("=");q[b[0]]=null==b[1]?!0:b[1]}));var G,v;for(v in b){k=b[v];var u=k.path;if(G=r.match(k.regexPath)){f=v;-1!==u.indexOf(":")&&(h={},G.shift(),u.replace(/:([^\/]+)/g,function(b,f){h[f]=G.shift()}));break}}}else{f=k;k=b[f];var u=e+k.path,z=k.vars||{},I=/^[^\/]+$/,A=-1!==u.indexOf(":")?r=u.replace(/:([^\/]+)/g,
function(b,f){if((z[f]||I).test(h[f]))return h[f]+="";throw Error("Invalid value for route '"+u+"' segment '"+f+"': '"+h[f]+"'");}):r=u;if(q){var A=A+"?",F;for(F in q)A+=F+(!0!==q[F]?"="+q[F]:"")+"&";A=A.slice(0,-1)}A+=w?"#"+w:""}return{href:A,name:f,path:r,segs:h,hash:w,query:q}}function r(b,e){for(var k in b){var h=b[k];h.regexPath=new RegExp("^"+e+h.path.replace(/:([^\/]+)/g,function(b,e){var k=""+h.vars[e];return"("+k.substring(1,k.lastIndexOf("/"))+")"})+"$")}}var e=[],b=null,v=!1,k="";u.route=
function(g,u){function t(){var b=location,b=v?b.href.substr(b.origin.length):b.hash.substr(1)||"/";return z(D,k,b)}var h=null,q={href:function(b,e,h,g,r){var t=z(D,k,b,e,h,g);return v?(b=function(b){q["goto"](t,null,null,null,r);b.preventDefault()},b.href=t.href,b):"#"+t.href},config:function(b){(v=b.useHist)&&(k=b.root||"");h=b.init||null},refresh:function(){q["goto"](t(),null,null,null,!0)},"goto":function(f,h,g,q,r){r=r||w;f.href||(f=z(D,k,f,h,g,q));if(!1===f.name)console.log("Could not find route");
else{h=null;for(g=0;g<e.length;g++)if(e[g].path===f.path){h=g;break}null===h&&(e.splice(b+1,1E4),e.push(f),h=e.length-1);f=e[b];g=e[h];q=!0;null!==b&&(q=(q=D[f.name].onexit)?q.apply(null,[{to:g}].concat(f?[f.segs,f.query,f.hash]:[])):!0);if(!1!==q&&!1!==D[g.name].onenter.apply(null,[{from:f}].concat(g?[g.segs,g.query,g.hash]:[]))){if(v)history[r?"replaceState":"pushState"](null,"title",g.href);b=h}w=!1}},current:function(){return w?t():e[b]}},w=!0,D=g(q,u);r(D,k);onhashchange=onpopstate=function(b){(v||
"popstate"!=b.type)&&q["goto"](t(),null,null,null,!0)};h&&h();return q}})(domvm);
