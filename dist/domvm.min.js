/*
 https://github.com/leeoniya/domvm
*/
("undefined"!==typeof global?global:this).domvm={};(function(u){var v=("undefined"==typeof window?{}:window).requestAnimationFrame,n={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,zoom:!0},m={TYPE_ELEM:1,
TYPE_TEXT:2,isArr:function(c){return c instanceof Array},isVal:function(c){c=typeof c;return"string"===c||"number"===c},isObj:function(c){return"object"===typeof c&&null!==c&&!m.isArr(c)},isFunc:function(c){return"function"===typeof c},isProm:function(c){return"object"===typeof c&&m.isFunc(c.then)},execAll:function(c,f,l,b,h,g){var z;c&&(m.isArr(c)?c:[c]).forEach(function(c){z=c.call(null,f,l,b,h,g)});return z},tick:function(c,f){f&&v?v&&v(function(){m.tick(c,f-1)}):m.isArr(c)?c[0].apply(null,c.slice(1)):
c()},insertArr:function(c,f,l,b){c.splice.apply(c,[l,b].concat(f))},isEvProp:function(c){return"on"===c.substr(0,2)},isDynProp:function(c,f){switch(c){case "input":case "textarea":case "select":case "option":switch(f){case "value":case "checked":case "selected":case "selectedIndex":return!0}}},camelDash:function(c){return c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},autoPx:function(c,f){return isNaN(f)||n[c]?f:f+"px"},deepSet:function(c,f,l){f=f.split(".");var b=f.pop();f.forEach(function(b){c[b]||
(c[b]={});c=c[b]});c[b]=l},keyedIdx:function(c,f,l,b,h){for(b=0;b<f.length;b++)if(h=f[b],h.key===c)if(l){if(h.vm&&h.vm.view[0]===l)return b}else return b;return-1},raft:function(c){function f(){l=0;c.apply(b,h)}if(!v)return c;var l,b,h;return function(){b=this;h=arguments;l||(l=v(f))}}};u.utils=m})(domvm);(function(u){function v(){for(var a;a=N.pop();)a[0].apply(null,a.slice(1))}function n(a,e){return!1===e?null:null==e&&null!=a?a:k.isVal(e)||k.isObj(e)||k.isArr(e)||k.isFunc(e)?e:null}function m(a,e,A,b,d,G){function y(a,e,d){if(d)a[e]=a[e]||[],a[e].push(d);else for(var c in e)a[c]=a[c]||[],a[c].push(e[c])}function r(a,e,c){d=a;G=e;t.update(c,!1);return p(0,!1)}function p(a,c){if(a){for(var b=t;a--&&b.parent;)b=b.parent;b.redraw(0,!0);return b.vm}(b=t.node)&&f(t,"willRedraw",t);t.refs={};var x=t.render.call(t.api,
t,e,A),x=h(x,d,G,t);x.vm=t;t.node=x;var r=k.isVal(A)&&"^"===A[0]?A.substr(1):k.isVal(x.ref)&&"^"===x.ref[0]?x.ref.substr(1):null;x.key=null!=A?A:x.key;for(var p=d;p;)p.vm&&(t.parent||(t.parent=p.vm),null!==r&&k.deepSet(p.vm.refs,r,x)),p=p.parent;if((r=b)&&(x.type!==b.type||x.tag!==b.tag))var r=null,q=!0,y=b.el.parentNode;g(x,r);d&&(d.body[G]=x);!1!==c&&(b&&l(b),!b&&m||z(x,null,x.el),q&&(y||x.parent.el).insertBefore(x.el,y.childNodes[b.idx]));b&&f(t,"didRedraw",t);!1!==c&&k.tick(v,2);return t}var m=
!d;k.isArr(a)&&(e=a[1],A=a[2],b=a[3],a=a[0]);A=n(e,A);var t={api:{},node:null,view:[a,A],model:e,opts:b||{},render:null,update:function(a,d){null==a||A===e&&!k.isVal(A)||(e=t.model=a);return!1!==d?p(0):t},on:function(a,e){y(t.events,a,e)},hook:function(a,e){t.hooks=t.hooks||{};y(t.hooks,a,e)},events:{},hooks:null,redraw:J.useRaf?k.raft(p):p,patch:function(a,e){var d=null!=a.el;if(k.isObj(e)){var b="class"in e?(null!=a["class"]?a["class"]+" ":"")+e["class"]:a.props["class"],c="style"in e?e.style:a.props.style;
d&&(d={tag:a.tag,el:a.el,ns:a.ns,props:{"class":b,style:c}},q(d,a));a.props["class"]=b;a.props.style=c}else b=a.parent,d=g(h(e,b,a.idx,t),a),b.body[a.idx]=d},emit:function(a){for(var e=Array.prototype.slice.call(arguments),d=t,b;d;){if(b=d.events[a]){e[0]=b;k.execAll.apply(null,e);break}d=d.parent}},refs:{},parent:null,mount:function(a,e){var d=null;e&&(a.textContent="",d=a,a=null);z(t.node,d,null,a);return t},attach:function(a){c(t.node,a);return t},unmount:function(){l(t.node)},moveTo:r,updIdx:function(a){G=
a}};b&&b.hooks&&t.hook(b.hooks);k.execAll(H,t);t.render=a.call(t.api,t,e,A);return d?r(d,G):p(0)}function c(a,e){a.el=e;e._node=a;for(var b in a.props){var x=a.props[b],d=k.isEvProp(b)?b:"."===b[0]?b.substr(1):null;null!==d&&(e[d]=x)}if(k.isArr(a.body))for(b=0;b<a.body.length;b++)c(a.body[b],e.childNodes[b])}function f(a,e,b,c,d,h){if(a&&a.hooks&&(a=a.hooks[e]))if(J.useRaf&&"did"==e.substr(0,3))N.push([k.execAll,a,b,c,d,h]);else return k.execAll(a,b,c,d,h)}function l(a,e){var c=a.el&&!a.moved;if(c){var x=
f(a.vm,"willUnmount",a.vm),d=f(a,"willRemove",a),h=x||d;a.removed=!0}k.isArr(a.body)&&a.body.forEach(function(a,d){l(a,e||h)});e||(h?h.then(function(){b(a,c)}):b(a,c))}function b(a,e){null!=a.el&&a.el.parentNode&&(e&&(a.el.parentNode.removeChild(a.el),a.el=null,f(a.vm,"didUnmount",a.vm),f(a,"didRemove",a)),k.isArr(a.body)&&a.body.forEach(function(a,e){b(a,!0)}),a.vm=a.body=null)}function h(a,e,b,c){var d=a;a={type:null,key:null,ref:null,idx:null,parent:null,moved:!1,removed:!1,hooks:null,tag:null,
"class":null,ns:null,guard:!1,raw:!1,props:null,el:null,hasKeys:!1,body:null};k.isFunc(d)&&(d=d());if(k.isArr(d)&&d.length){a.type=k.TYPE_ELEM;if(1<d.length){var g=1;k.isObj(d[1])&&(a.props=d[1],g=2);a.body=d.length==g+1?k.isVal(d[g])?d[g]:k.isFunc(d[g])?d[g]():d.slice(g):d.slice(g)}d=d[0];if(/[.#]/.test(d)){if(d=D(d),a.tag=d.tag,g=null!=d["class"],null!=d.id||g){var f=a.props||{};null==f.id&&(f.id=d.id);g&&(a["class"]=d["class"],f["class"]=d["class"]+(null!=f["class"]?" "+f["class"]:""));a.props=
f}}else a.tag=d;if(a.props){var d=a.props,r;for(r in d)k.isEvProp(r)?d[r]=y(d[r],c.opts.evctx||c.model||null,a,c):k.isFunc(d[r])&&("href"==r?(d.onclick=d[r],d.href=d[r].href):d[r]=d[r]()),k.isDynProp(a.tag,r)&&(d["."+r]=d[r]);if(k.isObj(d.style))for(var p in d.style)r=d.style[p],k.isFunc(r)&&(d.style[p]=r());k.isObj(d._hooks)&&(a.hooks=d._hooks,d._hooks=null);a.key=k.isVal(d._key)?d._key:k.isVal(d._ref)?d._ref:k.isVal(d.id)?d.id:k.isVal(d.name)?d.name:null;null!=d._ref&&(a.ref=d._ref);d._raw&&(a.raw=
!0);null!=d._data&&(a.data=d._data);d._guard&&(a.guard=!0);d._ref=d._key=d._raw=d._data=d._guard=null}}else k.isVal(d)&&(a.type=k.TYPE_TEXT,a.body=d);null!==a.ref&&k.deepSet(c.refs,a.ref,a);a.parent=e;a.idx=b;a.ns=e&&e.ns?e.ns:"svg"===a.tag||"math"===a.tag?a.tag:null;if(k.isArr(a.body))for(e=0,b=a.body.length;e<b;e++){p=a.body[e];d=r=null;f=g=!1;k.isFunc(p)&&(p=p());if(null==p)g=!0;else{var q=k.isArr(p),z=q?!1:k.isObj(p);if(q)p.length?k.isArr(p[0])?f=!0:k.isFunc(p[0])?r=n(p[1],p[2]):(d=h(p,a,e,c),
r=d.key):g=!0;else if(z)if(k.isFunc(p.redraw))p.moveTo(a,e),d=p.node,r=p.view[1];else{a.body[e--]=""+p;continue}else""===p?g=!0:0<e&&a.body[e-1].type===k.TYPE_TEXT?(a.body[e-1].body+=""+p,g=!0):d=h(""+p,a,e,c)}g||f?(f?k.insertArr(a.body,p,e,1):a.body.splice(e,1),b=a.body.length,e--):(null!==r&&(a.hasKeys=!0),a.body[e]=d||p)}return a}function g(a,e){e&&(f(a,"willRecycle",e,a),B(e,a),f(a,"didRecycle",e,a));if(k.isArr(a.body)){var b=0;a.body.forEach(function(c,d){var h=k.isArr(c);if(e){var f=w(c,a,e,
b);if(null!==f){var r=f[0],f=f[1];r===b&&b++;r=e.body[r];r.vm?h?2===f?r.vm.moveTo(a,d,c[1]):1===f&&m(c[0],c[1],c[2],c[3],a,d):c.vm&&2===f&&c.vm===r.vm&&r.vm.moveTo(a,d):a.body[d]=g(c,r);return}}h?m(c[0],c[1],c[2],c[3],a,d):a.body[d]=g(c)})}return a}function z(a,e,b,c){for(var d=!a.el;b&&b._node.removed;)b=b.nextSibling;d&&f(a.vm,"willMount",a.vm);if(a.type==k.TYPE_ELEM)if(d&&(a.el=e||(a.ns?K.createElementNS(E[a.ns],a.tag):K.createElement(a.tag)),a.props&&q(a)),k.isArr(a.body)){e=0;for(var g=a.el.firstChild;e<
a.body.length;e++)g=z(a.body[e],null,g)}else k.isVal(a.body)&&(a.raw?a.el.innerHTML=a.body:d&&(a.el.textContent=a.body));else a.type==k.TYPE_TEXT&&d&&(a.el=K.createTextNode(a.body));a.el._node=a;e=a.parent;b!==a.el&&(c||e&&e.el)&&(e=d?"Insert":"Reinsert",f(a,"will"+e,a),(c||a.parent.el).insertBefore(a.el,b),f(a,"did"+e,a));d&&a.vm&&a.vm.hooks&&!a.moved&&f(a.vm,"didMount",a.vm);return b!==a.el?b:b.nextSibling}function w(a,e,b,c,d){var g=k.isArr(a),f=g?n(a[1],a[2]):a.key,h=b.hasKeys,p=e.hasKeys;b=b.body;
e=e.body;if(null!==f&&h)return a=k.keyedIdx(f,b,g?a[0]:null),-1<a?[a,2]:null;c=c||0;if(c>b.length-1)return null;d=0===d?0:d||b.length-1;for(f=null;c<=d;c++)if(h=b[c],null!==h&&h.el)if(g&&h.vm){if(h.vm.view[0]===a[0]){if(h.vm.view[1]===n(a[1],a[2]))return[c,2];!f&&p&&-1==k.keyedIdx(h.key,e,h.vm.view[0])&&(f=[c,1])}}else if(a.type===h.type&&(a.type===k.TYPE_TEXT||null!==a.tag&&a.tag===h.tag)&&(null===h.key||!p||-1==k.keyedIdx(h.key,e,h.vm?h.vm.view[0]:null)))return[c,1];return f}function B(a,e){e.el=
a.el;a.el=null;e.el&&(e.el._node=e);if(e.type===k.TYPE_TEXT&&e.body!==a.body)e.el.nodeValue=e.body;else{q(e,a);var b=!k.isArr(e.body),c=!k.isArr(a.body);b&&e.body!==a.body?c&&e.el.firstChild?e.el.firstChild.nodeValue=e.body:e.raw?e.el.innerHTML=e.body:e.el.textContent=e.body:c&&!b&&(e.el.textContent="");a.moved=!0}}function D(a){if(a in L)return L[a];var e={tag:null,id:null,"class":null};e.tag=a.replace(O,function(a,b,d,c){d&&(e.id=d);c&&(e["class"]=c.replace(/\./g," ").trim());return b||"div"});
return L[a]=e}function y(a,e,b,c){return function(b){var h,g=b.target._node,f=null;if(k.isFunc(a))h=a.call(e,b,g,c);else if(k.isArr(a))f=a.slice(1),h=a[0].apply(e,f.concat(b,g,c));else if(k.isObj(a))for(var p in a){var q=a[p];b.target.matches(p)&&(k.isArr(q)?(f=q.slice(1),h=q[0].apply(e,f.concat(b,g,c))):k.isFunc(q)&&(h=q.call(e,b,g,c)))}!1===h&&(b.preventDefault(),b.stopPropagation());c.opts.hasOwnProperty("watch")&&c.opts.watch.fire({type:"event",vm:c,node:g,event:b,data:f})}}function q(a,e){var b=
!e;e=e||{};if(e.props||a.props){var c=e.props||{},d=a.props||{},h=c.style,g=d.style;if(k.isObj(h)||k.isObj(g))F(a.el,a.tag,h||{},g||{},P,C,a.ns,b),c.style=d.style=null;F(a.el,a.tag,c,d,M,I,a.ns,b);g&&(d.style=g)}}function F(a,b,c,h,d,g,f,k){for(var q in h)null!==h[q]&&("."===q[0]?a[q.substr(1)]!==h[q]:h[q]!==c[q])&&d(a,q,h[q],f,k);for(q in c)null!==c[q]&&null==h[q]&&g(a,q,f,k)}function P(a,b,c){a.style[b]=k.autoPx(b,c)}function C(a,b){a.style[b]=""}function M(a,b,c,h,d){"."===b[0]?(b=b.substr(1),
"svg"===h?a[b].baseVal=c:a[b]=c):"class"===b?a.className=c:"id"===b||k.isEvProp(b)?a[b]=c:!1===c?I(a,b,h,d):a.setAttribute(b,!0===c?"":c)}function I(a,b,c,h){h||("."===b[0]?(b=b.substr(1),"svg"===c?a[b].baseVal=null:a[b]=null):"class"===b?a.className="":"id"===b||k.isEvProp(b)?a[b]=null:a.removeAttribute(b))}var E={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},O=/^([\w\-]+)?(?:#([\w\-]+))?((?:\.[\w\-]+)+)?$/,L={},K="undefined"==typeof document?{}:document,N=[],J={useRaf:!0};
u.view=m;u.view.config=function(a){J=a};var H=null;u.view.extend=function(a,b){H=!H||b?[]:H;H.push(a)};var k=u.utils;return u})(domvm);(function(u){var v=/^(?:img|br|input|col|link|meta|area|base|command|embed|hr|keygen|param|source|track|wbr)$/,n=u.utils;u.html=function(m){var c="";switch(m.type){case n.TYPE_ELEM:c+="<"+m.tag;if(m.props){var f=n.isVal(m.props.style)?m.props.style:"",l=n.isObj(m.props.style)?m.props.style:null;if(l)for(var b in l)null!==l[b]&&(f+=n.camelDash(b)+": "+n.autoPx(b,l[b])+"; ");for(b in m.props)n.isEvProp(b)||"."===b[0]||(l=m.props[b],n.isFunc(l)&&(l=l()),n.isObj(l)||(!0===l?c+=" "+b:!1!==l&&null!==l&&
"."!==b[0]&&(c+=" "+b+'="'+l+'"')));f.length&&(c+=' style="'+f.trim()+'"')}if(m.ns&&"svg"!==m.tag&&"math"!==m.tag&&!m.body)return c+"/>";c+=">";break;case n.TYPE_TEXT:return m.body}v.test(m.tag)||(n.isArr(m.body)?m.body.forEach(function(b){c+=u.html(b)}):c+=m.body||"",c+="</"+m.tag+">");return c}})(domvm);(function(u){var v=u.utils;u.watch=function(n){function m(){}function c(b,c,g,f,w){w=w||{};w.method=b.toUpperCase();null!==g&&(v.isArr(g)||v.isObj(g)?(w.headers=w.headers||new Headers,w.headers.set("Content-Type","application/json"),w.body=JSON.stringify(g)):w.body=""+g);var B=f,n=m;f instanceof Array&&(B=f[0],f[1]&&(n=f[1]));var y={type:"fetch",fetch:{method:b,url:c,body:g}};f=fetch(c,w).then(function(b){if(200<=b.status&&300>b.status)return b;var c=Error(b.status+": "+b.statusText);c.data=b;return Promise.reject(c)}).then(function(b){switch(b.headers.get("Content-Type").split("; ")[0]){case "application/json":return b.json();
case "text/plain":return b.text();default:return b}}).then(B,n).then(function(b){!1!==b&&l.fire(y);return b},function(b){y.error=b;l.fire(y);return b});f._fetchArgs=[b,c,g,[B,n],w];return f}var f=[];v.isFunc(n)&&f.push(n);var l={on:function(b){f.push(b);return l},off:function(b){f.splice(f.indexOf(b),1);return l},fire:v.raft(function(){v.execAll(f,arguments);return l}),prop:function(b,h){var f=b,z=function(b,c){if(arguments.length&&b!==f){var h=f;f=b;!1!==c&&l.fire({type:"prop",prop:z,data:{old:h,
"new":b}})}return f};if(h&&h.then){z.update=m;if(h._fetchArgs){var w=h._fetchArgs[3];h._fetchArgs[3]=[function(b){return z(w[0]?w[0](b):b)},w[1]];z.update=function(){c.apply(null,h._fetchArgs)}}h.then(z)}return z.toString=z},sync:function(b,c,f){var l=b,m=c;"string"==typeof b&&(l=function(c){return"e."===b.substr(0,2)?c[b.substr(2)]:c.target[b]});return function(b,v,y){var q=this!==window?this:null;q&&"string"==typeof c&&(m=function(b,f){var g=q[c];q[c]=b;n&&b!==g&&!1!==f&&n()});m(l(b),f)}},fetch:c,
get:function(b,f,g){g?b+=l.query(f):g=f;return c("get",b,null,g)},"delete":function(b,f,g){g?b+=l.query(f):g=f;return c("delete",b,null,g)},post:function(b,f,g){return c("post",b,f,g)},put:function(b,f,g){return c("put",b,f,g)},patch:function(b,f,g){return c("patch",b,f,g)},query:function(b){if(!v.isObj(b))return"";var c=[],f=encodeURIComponent,l;for(l in b)c.push(f(l)+"="+f(b[l]));return c.length?"?"+c.join("&"):""}};return l}})(domvm);(function(u){function v(b,c,f,l,m,n){var v=null,y=null,q=null;if("/"==f[0]){q=f;y=!1;l={};n=q.split("#");c=n[0].split("?");v=c[0];n=n[1];c[1]&&(m={},c[1].split("&").map(function(b){b=b.split("=");m[b[0]]=null==b[1]?!0:b[1]}));var F,u;for(u in b){f=b[u];var C=f.path;if(F=v.match(f.regexPath)){y=u;-1!==C.indexOf(":")&&(l={},F.shift(),C.replace(/:([^\/]+)/g,function(b,c){l[c]=F.shift()}));break}}}else{y=f;f=b[y];var C=c+f.path,M=f.vars||{},I=/^[^\/]+$/,q=-1!==C.indexOf(":")?v=C.replace(/:([^\/]+)/g,
function(b,c){if((M[c]||I).test(l[c]))return l[c]+="";throw Error("Invalid value for route '"+C+"' segment '"+c+"': '"+l[c]+"'");}):v=C;if(m){var q=q+"?",E;for(E in m)q+=E+(!0!==m[E]?"="+m[E]:"")+"&";q=q.slice(0,-1)}q+=n?"#"+n:""}return{href:q,name:y,path:v,segs:l,hash:n,query:m}}function n(b,c){for(var f in b){var l=b[f];l.regexPath=new RegExp("^"+c+l.path.replace(/:([^\/]+)/g,function(b,c){var f=""+l.vars[c];return"("+f.substring(1,f.lastIndexOf("/"))+")"})+"$")}}var m=[],c=null,f=!1,l="";u.route=
function(b,h){function g(){var b=location,b=f?b.href.substr(b.origin.length):b.hash.substr(1)||"/";return v(D,l,b)}var u=null,w={href:function(b,c,h,g,m){var n=v(D,l,b,c,h,g);return f?(b=function(b){w["goto"](n,null,null,null,m);b.preventDefault()},b.href=n.href,b):"#"+n.href},config:function(b){(f=b.useHist)&&(l=b.root||"");u=b.init||null},refresh:function(){w["goto"](g(),null,null,null,!0)},"goto":function(b,h,g,n,u){u=u||B;b.href||(b=v(D,l,b,h,g,n));if(!1===b.name)console.log("Could not find route");
else{h=null;for(g=0;g<m.length;g++)if(m[g].href===b.href){h=g;break}null===h&&(m.splice(c+1,1E4),m.push(b),h=m.length-1);b=m[c];g=m[h];n=!0;null!==c&&(n=(n=D[b.name].onexit)?n.apply(null,(b?[b.segs,b.query,b.hash]:[]).concat(g)):!0);if(!1!==n&&!1!==D[g.name].onenter.apply(null,(g?[g.segs,g.query,g.hash]:[]).concat(b))){if(f)history[u?"replaceState":"pushState"](null,"title",g.href);c=h}B=!1}},location:function(){return B?g():m[c]}},B=!0,D=b(w,h);n(D,l);window.onhashchange=window.onpopstate=function(b){(f||
"popstate"!=b.type)&&w["goto"](g(),null,null,null,!0)};u&&u();return w}})(domvm);
