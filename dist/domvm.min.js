/*
 https://github.com/leeoniya/domvm
*/
("undefined"!==typeof global?global:this).domvm={};(function(u){var w="undefined"==typeof window?{}:window,q={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,zoom:!0},d={TYPE_ELEM:1,TYPE_TEXT:2,isArr:function(b){return b instanceof
Array},isVal:function(b){b=typeof b;return"string"===b||"number"===b},isObj:function(b){return"object"===typeof b&&null!==b&&!d.isArr(b)},isFunc:function(b){return"function"===typeof b},isProm:function(b){return"object"===typeof b&&d.isFunc(b.then)},execAll:function(b,v){b&&(d.isArr(b)?b:[b]).forEach(function(b){return b.apply(null,v)})},insertArr:function(b,d,m,f){b.splice.apply(b,[m,f].concat(d))},isEvProp:function(b){return"on"===b.substr(0,2)},isDynProp:function(b,d){switch(b){case "input":case "textarea":case "select":case "option":switch(d){case "value":case "checked":case "selected":case "selectedIndex":return!0}}},
camelDash:function(b){return b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},autoPx:function(b,d){return isNaN(d)||q[b]?d:d+"px"},deepSet:function(b,d,m){d=d.split(".");var f=d.pop();d.forEach(function(f){b[f]||(b[f]={});b=b[f]});b[f]=m},keyedIdx:function(b,d,m,f,g){for(f=0;f<d.length;f++)if(g=d[f],g.key===b)if(m){if(g.vm&&g.vm.view[0]===m)return f}else return f;return-1},raft:function(b){function d(){m=0;b.apply(f,g)}if(!w.requestAnimationFrame)return b;var m,f,g;return function(){f=this;g=arguments;
m||(m=w.requestAnimationFrame(d))}}};u.util=d})(domvm);(function(u){function w(a,c){return!1===c?null:null==c&&null!=a?a:k.isVal(c)||k.isObj(c)||k.isArr(c)||k.isFunc(c)?c:null}function q(a,c,p,D,e,B){function C(a,c,e){if(e)a[c]=a[c]||[],a[c].push(e);else for(var p in c)a[p]=a[p]||[],a[p].push(c[p])}function l(a,c,p){e=a;B=c;n.update(p,!1);return h(0,!1)}function h(a,D){if(a){for(var l=n;a--&&l.parent;)l=l.parent;l.redraw(0,!0);return l.vm}(l=n.node)&&n.hooks&&k.execAll(n.hooks.willRedraw,[n]);n.refs={};var d=n.render.call(n.api,n,c,p),d=m(d,e,B,n);d.vm=
n;n.node=d;var C=k.isVal(p)&&"^"===p[0]?p.substr(1):k.isVal(d.ref)&&"^"===d.ref[0]?d.ref.substr(1):null;d.key=null!=p?p:d.key;for(var t=e;t;)t.vm&&(n.parent||(n.parent=t.vm),null!==C&&k.deepSet(t.vm.refs,C,d)),t=t.parent;if((C=l)&&(d.type!==l.type||d.tag!==l.tag))var C=null,x=!0;f(d,C);e&&(e.body[B]=d);!1!==D&&(l&&b(l),!l&&y||g(d,null,d.el),x&&(l.el.parentNode.replaceChild(d.el,l.el),l.el=null));l&&n.hooks&&Promise.resolve().then(function(){requestAnimationFrame(function(){k.execAll(n.hooks.didRedraw,
[n])})});return n}function x(a){n.hooks&&k.execAll(n.hooks.willUnmount);if(e)if(a){for(a=B+1;a<e.body.length;a++){var c=e.body[a];c.idx=a-1;c.vm&&c.vm.updIdx(c.idx)}e.body.splice(B,1)}else e.body[B]=null;b(n.node,!0);n.node.vm=null;n.hooks&&k.execAll(n.hooks.didUnmount)}var y=!e;k.isArr(a)&&(c=a[1],p=a[2],D=a[3],a=a[0]);p=w(c,p);var n={api:{},node:null,view:[a,p],model:c,opts:D||{},render:null,update:function(a,e){null==a||p===c&&!k.isVal(p)||(c=n.model=a);return!1!==e?h(0):n},on:function(a,c){C(n.events,
a,c)},hook:function(a,c){n.hooks=n.hooks||{};C(n.hooks,a,c)},events:{},hooks:null,redraw:I.useRaf?k.raft(h):h,patch:function(a,c){if(k.isObj(c)){var e={tag:a.tag,el:a.el,ns:a.ns,props:{"class":"class"in c?(null!=a["class"]?a["class"]+" ":"")+c["class"]:a.props["class"],style:"style"in c?c.style:a.props.style}};t(e,a);a.props["class"]=e.props["class"];a.props.style=e.props.style}else{var p=a.parent,e=f(m(c,p,a.idx,n),a);p.body[a.idx]=e}},emit:function(a){for(var c=Array.prototype.slice.call(arguments,
1),e=n;e;){if(e.events[a]){k.execAll(e.events[a],c);break}e=e.parent}},refs:{},parent:null,mount:function(a,c){var e=null;c&&(a.textContent="",e=a,a=null);g(n.node,e,null,a);return n},attach:function(a){d(n.node,a);return n},unmount:function(){z(n.hooks,"Unmount",x,[],[n])},moveTo:l,updIdx:function(a){B=a}};D&&D.hooks&&n.hook(D.hooks);k.execAll(G,[n]);n.render=a.call(n.api,n,c,p);return e?l(e,B):h(0)}function d(a,c){a.el=c;c._node=a;for(var p in a.props){var b=a.props[p],e=k.isEvProp(p)?p:"."===p[0]?
p.substr(1):null;null!==e&&(c[e]=b)}if(k.isArr(a.body))for(p=0;p<a.body.length;p++)d(a.body[p],c.childNodes[p])}function b(a,c){k.isArr(a.body)&&(a.body.forEach(function(a,c){a&&(a.vm&&!a.moved?a.vm.unmount():b(a,!0))}),a.body=null);a.vm=null;c&&a.el&&a.el.parentNode&&(a.removed=!0,a.hooks?z(a.hooks,"Remove",v,[a]):v(a))}function v(a){a.el.parentNode.removeChild(a.el);a.el=null}function m(a,c,p,b){var e=a;a={type:null,key:null,ref:null,idx:null,parent:null,moved:!1,removed:!1,hooks:null,tag:null,
"class":null,ns:null,guard:!1,raw:!1,props:null,el:null,hasKeys:!1,body:null};k.isFunc(e)&&(e=e());if(k.isArr(e)&&e.length){a.type=k.TYPE_ELEM;if(1<e.length){var f=1;k.isObj(e[1])&&(a.props=e[1],f=2);a.body=e.length==f+1?k.isVal(e[f])?e[f]:k.isFunc(e[f])?e[f]():e.slice(f):e.slice(f)}e=e[0];if(/[.#]/.test(e)){if(e=A(e),a.tag=e.tag,f=null!=e["class"],null!=e.id||f){var d=a.props||{};null==d.id&&(d.id=e.id);f&&(a["class"]=e["class"],d["class"]=e["class"]+(null!=d["class"]?" "+d["class"]:""));a.props=
d}}else a.tag=e;if(a.props){var e=a.props,l;for(l in e)k.isEvProp(l)?e[l]=x(e[l],b.opts.evctx||b.model||null,a,b):k.isFunc(e[l])&&("href"==l?(e.onclick=e[l],e.href=e[l].href):e[l]=e[l]()),k.isDynProp(a.tag,l)&&(e["."+l]=e[l]);if(k.isObj(e.style))for(var g in e.style)l=e.style[g],k.isFunc(l)&&(e.style[g]=l());k.isObj(e._hooks)&&(a.hooks=e._hooks,e._hooks=null);a.key=k.isVal(e._key)?e._key:k.isVal(e._ref)?e._ref:k.isVal(e.id)?e.id:k.isVal(e.name)?e.name:null;null!=e._ref&&(a.ref=e._ref);e._raw&&(a.raw=
!0);null!=e._data&&(a.data=e._data);e._guard&&(a.guard=!0);e._ref=e._key=e._raw=e._data=e._guard=null}}else k.isVal(e)&&(a.type=k.TYPE_TEXT,a.body=e);null!==a.ref&&k.deepSet(b.refs,a.ref,a);a.parent=c;a.idx=p;a.ns=c&&c.ns?c.ns:"svg"===a.tag||"math"===a.tag?a.tag:null;if(k.isArr(a.body))for(c=0,p=a.body.length;c<p;c++){g=a.body[c];e=l=null;d=f=!1;k.isFunc(g)&&(g=g());if(null==g)f=!0;else{var h=k.isArr(g),t=h?!1:k.isObj(g);if(h)g.length?k.isArr(g[0])?d=!0:k.isFunc(g[0])?l=w(g[1],g[2]):(e=m(g,a,c,b),
l=e.key):f=!0;else if(t)if(k.isFunc(g.redraw))g.moveTo(a,c),e=g.node,l=g.view[1];else{a.body[c--]=""+g;continue}else""===g?f=!0:0<c&&a.body[c-1].type===k.TYPE_TEXT?(a.body[c-1].body+=""+g,f=!0):e=m(""+g,a,c,b)}f||d?(d?k.insertArr(a.body,g,c,1):a.body.splice(c,1),p=a.body.length,c--):(null!==l&&(a.hasKeys=!0),a.body[c]=e||g)}return a}function f(a,c){c&&(a.hooks?z(a.hooks,"Recycle",r,[c,a]):r(c,a));if(k.isArr(a.body)){var p=0;a.body.forEach(function(b,e){var d=k.isArr(b);if(c){var g=y(b,a,c,p);if(null!==
g){var l=g[0],g=g[1];l===p&&p++;l=c.body[l];l.vm?d?2===g?l.vm.moveTo(a,e,b[1]):1===g&&q(b[0],b[1],b[2],b[3],a,e):b.vm&&2===g&&b.vm===l.vm&&l.vm.moveTo(a,e):a.body[e]=f(b,l);return}}d?q(b[0],b[1],b[2],b[3],a,e):a.body[e]=f(b)})}return a}function g(a,c,b,f){for(var e=!a.el;b&&b._node.removed;)b=b.nextSibling;e&&a.vm&&a.vm.hooks&&k.execAll(a.vm.hooks.willMount,[a.vm]);if(a.type==k.TYPE_ELEM)if(e&&(a.el=c||(a.ns?J.createElementNS(E[a.ns],a.tag):J.createElement(a.tag)),a.props&&t(a)),k.isArr(a.body)){c=
0;for(var d=a.el.firstChild;c<a.body.length;c++)d=g(a.body[c],null,d)}else k.isVal(a.body)&&(a.raw?a.el.innerHTML=a.body:e&&(a.el.textContent=a.body));else a.type==k.TYPE_TEXT&&e&&(a.el=J.createTextNode(a.body));a.el._node=a;c=a.parent;b!==a.el&&(f||c&&c.el)&&(a.hooks?z(a.hooks,e?"Insert":"Reinsert",h,[a,b,f]):h(a,b,f));e&&a.vm&&a.vm.hooks&&Promise.resolve().then(function(){!a.moved&&k.execAll(a.vm.hooks.didMount,[a.vm])});return b!==a.el?b:b.nextSibling}function h(a,c,b){(b||a.parent.el).insertBefore(a.el,
c)}function y(a,c,b,f,e){var d=k.isArr(a),g=d?w(a[1],a[2]):a.key,l=b.hasKeys,h=c.hasKeys;b=b.body;c=c.body;if(null!==g&&l)return a=k.keyedIdx(g,b,d?a[0]:null),-1<a?[a,2]:null;f=f||0;if(f>b.length-1)return null;e=0===e?0:e||b.length-1;for(g=null;f<=e;f++)if(l=b[f],null!==l&&l.el)if(d&&l.vm){if(l.vm.view[0]===a[0]){if(l.vm.view[1]===w(a[1],a[2]))return[f,2];var t=!1;if(I.viewScan)for(var x=0;x<c.length;x++){var n=c[x];if(!n.el&&n.vm&&n.vm.view[0]===l.vm.view[0]&&n.vm.view[1]===l.vm.view[1]){t=!0;break}}t||
g||!h||-1!=k.keyedIdx(l.key,c,l.vm.view[0])||(g=[f,1])}}else if(a.type===l.type&&(a.type===k.TYPE_TEXT||null!==a.tag&&a.tag===l.tag)&&(null===l.key||!h||-1==k.keyedIdx(l.key,c,l.vm?l.vm.view[0]:null)))return[f,1];return g}function r(a,c){c.el=a.el;a.el=null;c.el&&(c.el._node=c);if(c.type===k.TYPE_TEXT&&c.body!==a.body)c.el.nodeValue=c.body;else{t(c,a);var b=!k.isArr(c.body),f=!k.isArr(a.body);b&&c.body!==a.body?f&&c.el.firstChild?c.el.firstChild.nodeValue=c.body:c.raw?c.el.innerHTML=c.body:c.el.textContent=
c.body:f&&!b&&(c.el.textContent="");a.moved=!0}}function z(a,c,b,f,e,g){if(a){var d=a["will"+c];k.isArr(d)&&(d=d[0]);var l=a["did"+c];k.isArr(l)&&(l=l[0]);a=function(){b.apply(null,f);l&&l.apply(null,g||e||f)};d?(d=d.apply(null,e||f),k.isProm(d)?d.then(a):a()):a()}else b.apply(null,f)}function A(a){if(a in K)return K[a];var c={tag:null,id:null,"class":null};c.tag=a.replace(/^([\w\-]+)?(?:#([\w\-]+))?((?:\.[\w\-]+)+)?$/,function(a,b,e,f){e&&(c.id=e);f&&(c["class"]=f.replace(/\./g," ").trim());return b||
"div"});return K[a]=c}function x(a,c,b,f){return function(e){var b,d=e.target._node,g=null;if(k.isFunc(a))b=a.call(c,e,d,f);else if(k.isArr(a))g=a.slice(1),b=a[0].apply(c,g.concat(e,d,f));else if(k.isObj(a))for(var p in a){var h=a[p];e.target.matches(p)&&(k.isArr(h)?(g=h.slice(1),b=h[0].apply(c,g.concat(e,d,f))):k.isFunc(h)&&(b=h.call(c,e,d,f)))}!1===b&&(e.preventDefault(),e.stopPropagation());f.opts.hasOwnProperty("watch")&&f.opts.watch.fire({type:"event",vm:f,node:d,event:e,data:g})}}function t(a,
c){var b=!c;c=c||{};if(c.props||a.props){var f=c.props||{},e=a.props||{},d=f.style,g=e.style;if(k.isObj(d)||k.isObj(g))F(a.el,a.tag,d||{},g||{},M,N,a.ns,b),f.style=e.style=null;F(a.el,a.tag,f,e,L,H,a.ns,b);g&&(e.style=g)}}function F(a,c,b,f,e,d,g,k){for(var h in f)null!==f[h]&&("."===h[0]?a[h.substr(1)]!==f[h]:f[h]!==b[h])&&e(a,h,f[h],g,k);for(h in b)null!==b[h]&&null==f[h]&&d(a,h,g,k)}function M(a,c,b){a.style[c]=k.autoPx(c,b)}function N(a,c){a.style[c]=""}function L(a,c,b,f,e){"."===c[0]?(c=c.substr(1),
"svg"===f?a[c].baseVal=b:a[c]=b):"class"===c?a.className=b:"id"===c||k.isEvProp(c)?a[c]=b:!1===b?H(a,c,f,e):a.setAttribute(c,!0===b?"":b)}function H(a,c,b,f){f||("."===c[0]?(c=c.substr(1),"svg"===b?a[c].baseVal=null:a[c]=null):"class"===c?a.className="":"id"===c||k.isEvProp(c)?a[c]=null:a.removeAttribute(c))}var E={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},K={},J="undefined"==typeof document?{}:document,I={useRaf:!0,viewScan:!1,useDOM:!1};u.view=q;u.view.config=function(a){I=
a};var G=null;u.view.extend=function(a,c){G=!G||c?[]:G;G.push(a)};var k=u.util;return u})(domvm);(function(u){var w=/^(?:img|br|input|col|link|meta|area|base|command|embed|hr|keygen|param|source|track|wbr)$/,q=u.util;u.html=function(d){var b="";switch(d.type){case q.TYPE_ELEM:b+="<"+d.tag;if(d.props){var v=q.isVal(d.props.style)?d.props.style:"",m=q.isObj(d.props.style)?d.props.style:null;if(m)for(var f in m)null!==m[f]&&(v+=q.camelDash(f)+": "+q.autoPx(f,m[f])+"; ");for(f in d.props)q.isEvProp(f)||"."===f[0]||(m=d.props[f],q.isFunc(m)&&(m=m()),q.isObj(m)||(!0===m?b+=" "+f:!1!==m&&null!==m&&
"."!==f[0]&&(b+=" "+f+'="'+m+'"')));v.length&&(b+=' style="'+v.trim()+'"')}if(d.ns&&"svg"!==d.tag&&"math"!==d.tag&&!d.body)return b+"/>";b+=">";break;case q.TYPE_TEXT:return d.body}w.test(d.tag)||(q.isArr(d.body)?d.body.forEach(function(f){b+=u.html(f)}):b+=d.body||"",b+="</"+d.tag+">");return b}})(domvm);(function(u){var w=u.util;u.watch=function(q){function d(){}function b(b,g,h,y,r){r=r||{};r.method=b.toUpperCase();null!==h&&(w.isArr(h)||w.isObj(h)?(r.headers=r.headers||new Headers,r.headers.set("Content-Type","application/json"),r.body=JSON.stringify(h)):r.body=""+h);var z=y,A=d;y instanceof Array&&(z=y[0],y[1]&&(A=y[1]));var x={type:"fetch",fetch:{method:b,url:g,body:h}};y=fetch(g,r).then(function(b){if(200<=b.status&&300>b.status)return b;var f=Error(b.status+": "+b.statusText);f.data=b;return Promise.reject(f)}).then(function(b){switch(b.headers.get("Content-Type").split("; ")[0]){case "application/json":return b.json();
case "text/plain":return b.text();default:return b}}).then(z,A).then(function(b){!1!==b&&m.fire(x);return b},function(b){x.error=b;m.fire(x);return b});y._fetchArgs=[b,g,h,[z,A],r];return y}var v=[];w.isFunc(q)&&v.push(q);var m={on:function(b){v.push(b);return m},off:function(b){v.splice(v.indexOf(b),1);return m},fire:w.raft(function(){w.execAll(v,arguments);return m}),prop:function(f,g){var h=f,y=function(b,f){if(arguments.length&&b!==h){var d=h;h=b;!1!==f&&m.fire({type:"prop",prop:y,data:{old:d,
"new":b}})}return h};if(g&&g.then){y.update=d;if(g._fetchArgs){var r=g._fetchArgs[3];g._fetchArgs[3]=[function(b){return y(r[0]?r[0](b):b)},r[1]];y.update=function(){b.apply(null,g._fetchArgs)}}g.then(y)}return y.toString=y},sync:function(b,d,h){var m=b,r=d;"string"==typeof b&&(m=function(d){return"e."===b.substr(0,2)?d[b.substr(2)]:d.target[b]});return function(b,f,x){var t=this!==window?this:null;t&&"string"==typeof d&&(r=function(b,f){var h=t[d];t[d]=b;q&&b!==h&&!1!==f&&q()});r(m(b),h)}},fetch:b,
get:function(f,d,h){h?f+=m.query(d):h=d;return b("get",f,null,h)},"delete":function(f,d,h){h?f+=m.query(d):h=d;return b("delete",f,null,h)},post:function(f,d,h){return b("post",f,d,h)},put:function(f,d,h){return b("put",f,d,h)},patch:function(f,d,h){return b("patch",f,d,h)},query:function(b){if(!w.isObj(b))return"";var d=[],h=encodeURIComponent,m;for(m in b)d.push(h(m)+"="+h(b[m]));return d.length?"?"+d.join("&"):""}};return m}})(domvm);(function(u){function w(b,d,h,m,r,q){var v=null,x=null,t=null;if("/"==h[0]){t=h;x=!1;m={};q=t.split("#");d=q[0].split("?");v=d[0];q=q[1];d[1]&&(r={},d[1].split("&").map(function(b){b=b.split("=");r[b[0]]=null==b[1]?!0:b[1]}));var F,w;for(w in b){h=b[w];var u=h.path;if(F=v.match(h.regexPath)){x=w;-1!==u.indexOf(":")&&(m={},F.shift(),u.replace(/:([^\/]+)/g,function(b,d){m[d]=F.shift()}));break}}}else{x=h;h=b[x];var u=d+h.path,L=h.vars||{},H=/^[^\/]+$/,t=-1!==u.indexOf(":")?v=u.replace(/:([^\/]+)/g,
function(b,d){if((L[d]||H).test(m[d]))return m[d]+="";throw Error("Invalid value for route '"+u+"' segment '"+d+"': '"+m[d]+"'");}):v=u;if(r){var t=t+"?",E;for(E in r)t+=E+(!0!==r[E]?"="+r[E]:"")+"&";t=t.slice(0,-1)}t+=q?"#"+q:""}return{href:t,name:x,path:v,segs:m,hash:q,query:r}}function q(b,d){for(var h in b){var m=b[h];m.regexPath=new RegExp("^"+d+m.path.replace(/:([^\/]+)/g,function(b,d){var f=""+m.vars[d];return"("+f.substring(1,f.lastIndexOf("/"))+")"})+"$")}}var d=[],b=null,v=!1,m="";u.route=
function(f,g){function h(){var b=location,b=v?b.href.substr(b.origin.length):b.hash.substr(1)||"/";return w(A,m,b)}var u=null,r={href:function(b,d,f,h,g){var q=w(A,m,b,d,f,h);return v?(b=function(b){r["goto"](q,null,null,null,g);b.preventDefault()},b.href=q.href,b):"#"+q.href},config:function(b){(v=b.useHist)&&(m=b.root||"");u=b.init||null},refresh:function(){r["goto"](h(),null,null,null,!0)},"goto":function(f,h,g,q,r){r=r||z;f.href||(f=w(A,m,f,h,g,q));if(!1===f.name)console.log("Could not find route");
else{h=null;for(g=0;g<d.length;g++)if(d[g].href===f.href){h=g;break}null===h&&(d.splice(b+1,1E4),d.push(f),h=d.length-1);f=d[b];g=d[h];q=!0;null!==b&&(q=(q=A[f.name].onexit)?q.apply(null,(f?[f.segs,f.query,f.hash]:[]).concat(g)):!0);if(!1!==q&&!1!==A[g.name].onenter.apply(null,(g?[g.segs,g.query,g.hash]:[]).concat(f))){if(v)history[r?"replaceState":"pushState"](null,"title",g.href);b=h}z=!1}},location:function(){return z?h():d[b]}},z=!0,A=f(r,g);q(A,m);window.onhashchange=window.onpopstate=function(b){(v||
"popstate"!=b.type)&&r["goto"](h(),null,null,null,!0)};u&&u();return r}})(domvm);
