/*
 https://github.com/leeoniya/domvm
*/
("undefined"!==typeof global?global:this).domvm={};(function(v){var w="undefined"==typeof window?{}:window,r={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,zoom:!0},c={TYPE_ELEM:1,TYPE_TEXT:2,isArr:function(b){return b instanceof
Array},isVal:function(b){b=typeof b;return"string"===b||"number"===b},isObj:function(b){return"object"===typeof b&&null!==b&&!c.isArr(b)},isFunc:function(b){return"function"===typeof b},isProm:function(b){return"object"===typeof b&&c.isFunc(b.then)},execAll:function(b,x){b&&(c.isArr(b)?b:[b]).forEach(function(b){return b.apply(null,x)})},insertArr:function(b,c,k,f){b.splice.apply(b,[k,f].concat(c))},isEvProp:function(b){return"on"===b.substr(0,2)},isDynProp:function(b,c){switch(b){case "input":case "textarea":case "select":case "option":switch(c){case "value":case "checked":case "selected":case "selectedIndex":return!0}}},
camelDash:function(b){return b.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},autoPx:function(b,c){return isNaN(c)||r[b]?c:c+"px"},indexOfKey:function(b,c,k,f){for(k=0;k<c.length;k++)if(c[k].key===b)return k;return-1},raft:function(b){function c(){k=0;b.apply(f,y)}if(!w.requestAnimationFrame)return b;var k,f,y;return function(){f=this;y=arguments;k||(k=w.requestAnimationFrame(c))}}};v.util=c})(domvm);(function(v){function w(a,d){return!1===d?null:null==d&&null!=a?a:g.isVal(d)||g.isObj(d)||g.isArr(d)||g.isFunc(d)?d:null}function r(a,d,p,A,e,C){function D(a,d,e){if(e)a[d]=a[d]||[],a[d].push(e);else for(var p in d)a[p]=a[p]||[],a[p].push(d[p])}function h(a,d,p){e=a;C=d;n.update(p,!1);return B(0,!1)}function B(a,A){if(a){for(var h=n;a--&&h.parent;)h=h.parent;h.redraw(0,!0);return h.vm}(h=n.node)&&n.hooks&&g.execAll(n.hooks.willRedraw,[n]);n.refs={};var c=n.render.call(n.api,n,d,p),c=k(c,e,C,n);c.vm=
n;n.node=c;var D=g.isVal(p)&&"^"===p[0]?p.substr(1):g.isVal(c.ref)&&"^"===c.ref[0]?c.ref.substr(1):null;c.key=null!=p?p:c.key;for(var B=e;B;)B.vm&&(n.parent||(n.parent=B.vm),null!==D&&(B.vm.refs[D]=c)),B=B.parent;if((D=h)&&(c.type!==h.type||c.tag!==h.tag))var D=null,m=!0;f(c,D);e&&(e.body[C]=c);!1!==A&&(h&&b(h),!h&&l||y(c,null,c.el),m&&(h.el.parentNode.replaceChild(c.el,h.el),h.el=null));h&&n.hooks&&Promise.resolve().then(function(){requestAnimationFrame(function(){g.execAll(n.hooks.didRedraw,[n])})});
return n}function u(a){n.hooks&&g.execAll(n.hooks.willUnmount);if(e)if(a){for(a=C+1;a<e.body.length;a++){var d=e.body[a];d.idx=a-1;d.vm&&d.vm.updIdx(d.idx)}e.body.splice(C,1)}else e.body[C]=null;b(n.node,!0);n.node.vm=null;n.hooks&&g.execAll(n.hooks.didUnmount)}var l=!e;g.isArr(a)&&(d=a[1],p=a[2],A=a[3],a=a[0]);p=w(d,p);var n={api:{},node:null,view:[a,p],model:d,opts:A||{},render:null,update:function(a,e){null==a||p===d&&!g.isVal(p)||(d=n.model=a);return!1!==e?B(0):n},on:function(a,d){D(n.events,
a,d)},hook:function(a,d){n.hooks=n.hooks||{};D(n.hooks,a,d)},events:{},hooks:null,redraw:J.useRaf?g.raft(B):B,patch:function(a,d){if(g.isObj(d)){var e={tag:a.tag,el:a.el,ns:a.ns,props:{"class":d["class"]||a.props["class"],style:d.style||a.props.style}};m(e,a)}else{var p=a.parent,e=f(k(d,p,a.idx,n),a);p.body[a.idx]=e}},emit:function(a){for(var d=Array.prototype.slice.call(arguments,1),e=n;e;){if(e.events[a]){g.execAll(e.events[a],d);break}e=e.parent}},refs:{},parent:null,mount:function(a,d){var e=
null;d&&(a.textContent="",e=a,a=null);y(n.node,e,null,a);return n},attach:function(a){c(n.node,a);return n},unmount:function(){z(n.hooks,"Unmount",u,[],[n])},moveTo:h,updIdx:function(a){C=a}};A&&A.hooks&&n.hook(A.hooks);g.execAll(G,[n]);n.render=a.call(n.api,n,d,p);return e?h(e,C):B(0)}function c(a,d){a.el=d;d._node=a;for(var p in a.props){var A=a.props[p],e=g.isEvProp(p)?p:"."===p[0]?p.substr(1):null;null!==e&&(d[e]=A)}if(g.isArr(a.body))for(p=0;p<a.body.length;p++)c(a.body[p],d.childNodes[p])}function b(a,
d){g.isArr(a.body)&&(a.body.forEach(function(a,d){a&&(a.vm&&!a.moved?a.vm.unmount():b(a,!0))}),a.body=null);a.vm=null;d&&a.el&&a.el.parentNode&&(a.removed=!0,z(a.hooks,"Remove",x,[a]))}function x(a){a.el.parentNode.removeChild(a.el);a.el=null}function k(a,d,p,A){var e=a;a={type:null,key:null,ref:null,idx:null,parent:null,moved:!1,removed:!1,hooks:null,tag:null,ns:null,guard:!1,raw:!1,props:null,el:null,hasKeys:!1,body:null};g.isFunc(e)&&(e=e());if(g.isArr(e)&&e.length){a.type=g.TYPE_ELEM;if(1<e.length){var b=
1;g.isObj(e[1])&&(a.props=e[1],b=2);a.body=e.length==b+1?g.isVal(e[b])?e[b]:g.isFunc(e[b])?e[b]():e.slice(b):e.slice(b)}e=e[0];if(/[.#]/.test(e)){if(e=H(e),a.tag=e.tag,b=null!=e["class"],null!=e.id||b){var c=a.props||{};null==c.id&&(c.id=e.id);b&&(c["class"]=e["class"]+(null!=c["class"]?" "+c["class"]:""));a.props=c}}else a.tag=e;if(a.props){var e=a.props,h;for(h in e)g.isEvProp(h)?e[h]=u(e[h],A.opts.evctx||A.model||null,a,A):g.isFunc(e[h])&&("href"==h?(e.onclick=e[h],e.href=e[h].href):e[h]=e[h]()),
g.isDynProp(a.tag,h)&&(e["."+h]=e[h]);if(g.isObj(e.style))for(var f in e.style)h=e.style[f],g.isFunc(h)&&(e.style[f]=h());g.isObj(e._hooks)&&(a.hooks=e._hooks,e._hooks=null);a.key=g.isVal(e._key)?e._key:g.isVal(e._ref)?e._ref:g.isVal(e.id)?e.id:g.isVal(e.name)?e.name:null;e._ref&&(a.ref=e._ref);e._raw&&(a.raw=!0);e._data&&(a.data=e._data);e._guard&&(a.guard=!0);e._ref=e._key=e._raw=e._data=e._guard=null}}else g.isVal(e)&&(a.type=g.TYPE_TEXT,a.body=e);null!==a.ref&&(A.refs[a.ref]=a);a.parent=d;a.idx=
p;a.ns=d&&d.ns?d.ns:"svg"===a.tag||"math"===a.tag?a.tag:null;if(g.isArr(a.body))for(d=0,p=a.body.length;d<p;d++){f=a.body[d];e=h=null;c=b=!1;g.isFunc(f)&&(f=f());if(null==f)b=!0;else{var m=g.isArr(f),l=m?!1:g.isObj(f);if(m)f.length?g.isArr(f[0])?c=!0:g.isFunc(f[0])?h=w(f[1],f[2]):(e=k(f,a,d,A),h=e.key):b=!0;else if(l)if(g.isFunc(f.redraw))f.moveTo(a,d),e=f.node,h=f.view[1];else{a.body[d--]=""+f;continue}else""===f?b=!0:0<d&&a.body[d-1].type===g.TYPE_TEXT?(a.body[d-1].body+=""+f,b=!0):e=k(""+f,a,d,
A)}b||c?(c?g.insertArr(a.body,f,d,1):a.body.splice(d,1),p=a.body.length,d--):(null!==h&&(a.hasKeys=!0),a.body[d]=e||f)}return a}function f(a,d){d&&z(a.hooks,"Recycle",q,[d,a]);if(g.isArr(a.body)){var b=0;a.body.forEach(function(c,e){var m=g.isArr(c);if(d){var u=l(c,a,d,b);if(null!==u){var h=u[0],u=u[1];h===b&&b++;h=d.body[h];h.vm?m?2===u?h.vm.moveTo(a,e,c[1]):1===u&&r(c[0],c[1],c[2],c[3],a,e):c.vm&&2===u&&c.vm===h.vm&&h.vm.moveTo(a,e):a.body[e]=f(c,h);return}}m?r(c[0],c[1],c[2],c[3],a,e):a.body[e]=
f(c)})}return a}function y(a,d,c,b){for(var e=!a.el;c&&c._node.removed;)c=c.nextSibling;e&&a.vm&&a.vm.hooks&&g.execAll(a.vm.hooks.willMount,[a.vm]);if(a.type==g.TYPE_ELEM)if(e&&(a.el=d||(a.ns?K.createElementNS(E[a.ns],a.tag):K.createElement(a.tag)),a.props&&m(a)),g.isArr(a.body)){d=0;for(var f=a.el.firstChild;d<a.body.length;d++)f=y(a.body[d],null,f)}else g.isVal(a.body)&&(a.raw?a.el.innerHTML=a.body:e&&(a.el.textContent=a.body));else a.type==g.TYPE_TEXT&&e&&(a.el=K.createTextNode(a.body));a.el._node=
a;d=a.parent;c!==a.el&&(b||d&&d.el)&&z(a.hooks,e?"Insert":"Reinsert",t,[a,c,b]);e&&a.vm&&a.vm.hooks&&Promise.resolve().then(function(){g.execAll(a.vm.hooks.didMount,[a.vm])});return c!==a.el?c:c.nextSibling}function t(a,d,c){(c||a.parent.el).insertBefore(a.el,d)}function l(a,d,c,b,e){var f=g.isArr(a),m=f?w(a[1],a[2]):a.key,h=c.hasKeys,u=d.hasKeys;c=c.body;d=d.body;if(null!==m&&h)return a=g.indexOfKey(m,c),-1<a?[a,2]:null;b=b||0;if(b>c.length-1)return null;e=0===e?0:e||c.length-1;for(m=null;b<=e;b++)if(h=
c[b],null!==h&&h.el)if(f&&h.vm){if(h.vm.view[0]===a[0]){if(h.vm.view[1]===w(a[1],a[2]))return[b,2];var l=!1;if(J.viewScan)for(var y=0;y<d.length;y++){var n=d[y];if(!n.el&&n.vm&&n.vm.view[0]===h.vm.view[0]&&n.vm.view[1]===h.vm.view[1]){l=!0;break}}l||m||!u||-1!=g.indexOfKey(h.key,d)||(m=[b,1])}}else if(a.type===h.type&&(a.type===g.TYPE_TEXT||null!==a.tag&&a.tag===h.tag)&&(null===h.key||!u||-1==g.indexOfKey(h.key,d)))return[b,1];return m}function q(a,d){d.el=a.el;a.el=null;if(d.type===g.TYPE_TEXT&&
d.body!==a.body)d.el.nodeValue=d.body;else{m(d,a);var c=!g.isArr(d.body),b=!g.isArr(a.body);c&&d.body!==a.body?b&&d.el.firstChild?d.el.firstChild.nodeValue=d.body:d.raw?d.el.innerHTML=d.body:d.el.textContent=d.body:b&&!c&&(d.el.textContent="");a.moved=!0}}function z(a,d,c,b,e,f){if(a){var m=a["will"+d];g.isArr(m)&&(m=m[0]);var h=a["did"+d];g.isArr(h)&&(h=h[0]);a=function(){c.apply(null,b);h&&h.apply(null,f||e||b)};m?(m=m.apply(null,e||b),g.isProm(m)?m.then(a):a()):a()}else c.apply(null,b)}function H(a){if(a in
L)return L[a];var d={tag:null,id:null,"class":null};d.tag=a.replace(/^([\w\-]+)?(?:#([\w\-]+))?((?:\.[\w\-]+)+)?$/,function(a,c,e,b){e&&(d.id=e);b&&(d["class"]=b.replace(/\./g," ").trim());return c||"div"});return L[a]=d}function u(a,d,c,b){return function(e){var c,f=e.target._node,h=null;if(g.isFunc(a))c=a.call(d,e,f,b);else if(g.isArr(a))h=a.slice(1),c=a[0].apply(d,h.concat(e,f,b));else if(g.isObj(a))for(var m in a){var p=a[m];e.target.matches(m)&&(g.isArr(p)?(h=p.slice(1),c=p[0].apply(d,h.concat(e,
f,b))):g.isFunc(p)&&(c=p.call(d,e,f,b)))}!1===c&&(e.preventDefault(),e.stopPropagation());b.opts.hasOwnProperty("watch")&&b.opts.watch.fire({type:"event",vm:b,node:f,event:e,data:h})}}function m(a,d){var c=!d;d=d||{};if(d.props||a.props){var b=d.props||{},e=a.props||{},f=b.style,m=e.style;if(g.isObj(f)||g.isObj(m))F(a.el,a.tag,f||{},m||{},M,N,a.ns,c),b.style=e.style=null;F(a.el,a.tag,b,e,O,I,a.ns,c);m&&(e.style=m)}}function F(a,d,c,b,e,f,m,h){for(var g in b)null!==b[g]&&("."===g[0]?a[g.substr(1)]!==
b[g]:b[g]!==c[g])&&e(a,g,b[g],m,h);for(g in c)null!==c[g]&&null==b[g]&&f(a,g,m,h)}function M(a,d,b){a.style[d]=g.autoPx(d,b)}function N(a,d){a.style[d]=""}function O(a,d,b,c,e){"."===d[0]?(d=d.substr(1),"svg"===c?a[d].baseVal=b:a[d]=b):"class"===d?a.className=b:"id"===d||g.isEvProp(d)?a[d]=b:!1===b?I(a,d,c,e):a.setAttribute(d,!0===b?"":b)}function I(a,d,b,c){c||("."===d[0]?(d=d.substr(1),"svg"===b?a[d].baseVal=null:a[d]=null):"class"===d?a.className="":"id"===d||g.isEvProp(d)?a[d]=null:a.removeAttribute(d))}
var E={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},L={},K="undefined"==typeof document?{}:document,J={useRaf:!0,viewScan:!1,useDOM:!1};v.view=r;v.view.config=function(a){J=a};var G=null;v.view.extend=function(a,d){G=!G||d?[]:G;G.push(a)};var g=v.util;return v})(domvm);(function(v){var w=/^(?:img|br|input|col|link|meta|area|base|command|embed|hr|keygen|param|source|track|wbr)$/,r=v.util;v.html=function(c){var b="";switch(c.type){case r.TYPE_ELEM:b+="<"+c.tag;if(c.props){var x=r.isVal(c.props.style)?c.props.style:"",k=r.isObj(c.props.style)?c.props.style:null;if(k)for(var f in k)null!==k[f]&&(x+=r.camelDash(f)+": "+r.autoPx(f,k[f])+"; ");for(f in c.props)r.isEvProp(f)||"."===f[0]||(k=c.props[f],r.isFunc(k)&&(k=k()),r.isObj(k)||(!0===k?b+=" "+f:!1!==k&&null!==k&&
"."!==f[0]&&(b+=" "+f+'="'+k+'"')));x.length&&(b+=' style="'+x.trim()+'"')}if(c.ns&&"svg"!==c.tag&&"math"!==c.tag&&!c.body)return b+"/>";b+=">";break;case r.TYPE_TEXT:return c.body}w.test(c.tag)||(r.isArr(c.body)?c.body.forEach(function(c){b+=v.html(c)}):b+=c.body||"",b+="</"+c.tag+">");return b}})(domvm);(function(v){var w=v.util;v.watch=function(r){function c(){}function b(b,y,t,l,q){q=q||{};q.method=(q.method||b).toUpperCase();if(null!==t){var z=Object.prototype.toString.call(t);"[object Array]"===z||"[object Object]"===z?(q.headers=q.headers||new Headers,q.headers.set("Content-Type","application/json"),q.body=JSON.stringify(t)):q.body=""+t}var z=l,H=c;l instanceof Array&&(z=l[0],l[1]&&(H=l[1]));var u={type:"fetch",fetch:{method:b,url:y,body:t}};l=fetch(y,q).then(function(b){if(200<=b.status&&300>
b.status)return b;var c=Error(b.status+": "+b.statusText);c.data=b;return Promise.reject(c)}).then(function(b){switch(b.headers.get("Content-Type").split("; ")[0]){case "application/json":return b.json();case "text/plain":return b.text();default:return b}}).then(z,H).then(function(b){!1!==b&&k.fire(u);return b},function(b){u.error=b;k.fire(u);return b});l._fetchArgs=[b,y,t,[z,H],q];return l}var x=[];w.isFunc(r)&&x.push(r);var k={on:function(b){x.push(b);return k},off:function(b){x.splice(x.indexOf(b),
1);return k},fire:w.raft(function(){w.execAll(x,arguments);return k}),prop:function(f,y){var t=f,l=function(b,c){if(arguments.length&&b!==t){var f=t;t=b;!1!==c&&k.fire({type:"prop",prop:l,data:{old:f,"new":b}})}return t};if(y&&y.then){l.update=c;if(y._fetchArgs){var q=y._fetchArgs[3];y._fetchArgs[3]=[function(b){return l(q[0]?q[0](b):b)},q[1]];l.update=function(){b.apply(null,y._fetchArgs)}}y.then(l)}return l.toString=l},sync:function(b,c,k){var l=b,q=c;"string"==typeof b&&(l=function(c){return"e."===
b.substr(0,2)?c[b.substr(2)]:c.target[b]});return function(b,f,u){var m=this!==window?this:null;m&&"string"==typeof c&&(q=function(b,f){var u=m[c];m[c]=b;r&&b!==u&&!1!==f&&r()});q(l(b),k)}},get:function(c,k,t){return b("get",c,null,k,t)},"delete":function(c,k,t){return b("delete",c,null,k,t)},post:function(c,k,t,l){return b("post",c,k,t,l)},put:function(c,k,t,l){return b("put",c,k,t,l)},patch:function(c,k,t,l){return b("patch",c,k,t,l)}};return k}})(domvm);(function(v){function w(b,c,k,l,q,z){var r=null,u=null,m=null;if("/"==k[0]){m=k;u=!1;l={};z=m.split("#");c=z[0].split("?");r=c[0];z=z[1];c[1]&&(q={},c[1].split("&").map(function(b){b=b.split("=");q[b[0]]=null==b[1]?!0:b[1]}));var F,x;for(x in b){k=b[x];var w=k.path;if(F=r.match(k.regexPath)){u=x;-1!==w.indexOf(":")&&(l={},F.shift(),w.replace(/:([^\/]+)/g,function(b,c){l[c]=F.shift()}));break}}}else{u=k;k=b[u];var w=c+k.path,v=k.vars||{},I=/^[^\/]+$/,m=-1!==w.indexOf(":")?r=w.replace(/:([^\/]+)/g,
function(b,c){if((v[c]||I).test(l[c]))return l[c]+="";throw Error("Invalid value for route '"+w+"' segment '"+c+"': '"+l[c]+"'");}):r=w;if(q){var m=m+"?",E;for(E in q)m+=E+(!0!==q[E]?"="+q[E]:"")+"&";m=m.slice(0,-1)}m+=z?"#"+z:""}return{href:m,name:u,path:r,segs:l,hash:z,query:q}}function r(b,c){for(var k in b){var l=b[k];l.regexPath=new RegExp("^"+c+l.path.replace(/:([^\/]+)/g,function(b,c){var f=""+l.vars[c];return"("+f.substring(1,f.lastIndexOf("/"))+")"})+"$")}}var c=[],b=null,x=!1,k="";v.route=
function(f,y){function t(){var b=location,b=x?b.href.substr(b.origin.length):b.hash.substr(1)||"/";return w(v,k,b)}var l=null,q={href:function(b,c,f,l,r){var t=w(v,k,b,c,f,l);return x?(b=function(b){q["goto"](t,null,null,null,r);b.preventDefault()},b.href=t.href,b):"#"+t.href},config:function(b){(x=b.useHist)&&(k=b.root||"");l=b.init||null},refresh:function(){q["goto"](t(),null,null,null,!0)},"goto":function(f,m,l,q,r){r=r||z;f.href||(f=w(v,k,f,m,l,q));if(!1===f.name)console.log("Could not find route");
else{m=null;for(l=0;l<c.length;l++)if(c[l].path===f.path){m=l;break}null===m&&(c.splice(b+1,1E4),c.push(f),m=c.length-1);f=c[b];l=c[m];q=!0;null!==b&&(q=(q=v[f.name].onexit)?q.apply(null,(f?[f.segs,f.query,f.hash]:[]).concat(l)):!0);if(!1!==q&&!1!==v[l.name].onenter.apply(null,(l?[l.segs,l.query,l.hash]:[]).concat(f))){if(x)history[r?"replaceState":"pushState"](null,"title",l.href);b=m}z=!1}},location:function(){return z?t():c[b]}},z=!0,v=f(q,y);r(v,k);window.onhashchange=window.onpopstate=function(b){(x||
"popstate"!=b.type)&&q["goto"](t(),null,null,null,!0)};l&&l();return q}})(domvm);
