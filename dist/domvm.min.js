/*
 https://github.com/leeoniya/domvm
*/
("undefined"!==typeof global?global:this).domvm={};(function(u){var x="undefined"==typeof window?{}:window,r={animationIterationCount:!0,boxFlex:!0,boxFlexGroup:!0,columnCount:!0,counterIncrement:!0,fillOpacity:!0,flex:!0,flexGrow:!0,flexOrder:!0,flexPositive:!0,flexShrink:!0,"float":!0,fontWeight:!0,gridColumn:!0,lineHeight:!0,lineClamp:!0,opacity:!0,order:!0,orphans:!0,stopOpacity:!0,strokeDashoffset:!0,strokeOpacity:!0,strokeWidth:!0,tabSize:!0,transform:!0,transformOrigin:!0,widows:!0,zIndex:!0,zoom:!0},b={TYPE_ELEM:1,TYPE_TEXT:2,isArr:function(c){return c instanceof
Array},isVal:function(c){c=typeof c;return"string"===c||"number"===c},isObj:function(c){return"object"===typeof c&&null!==c&&!b.isArr(c)},isFunc:function(c){return"function"===typeof c},isProm:function(c){return"object"===typeof c&&b.isFunc(c.then)},execAll:function(c,v){c&&(b.isArr(c)?c:[c]).forEach(function(c){return c.apply(null,v)})},insertArr:function(c,b,m,g){c.splice.apply(c,[m,g].concat(b))},isEvProp:function(c){return"on"===c.substr(0,2)},isDynProp:function(c,b){switch(c){case "input":case "textarea":case "select":case "option":switch(b){case "value":case "checked":case "selected":case "selectedIndex":return!0}}},
camelDash:function(c){return c.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()},autoPx:function(c,b){return isNaN(b)||r[c]?b:b+"px"},indexOfKey:function(c,b,m,g){for(m=0;m<b.length;m++)if(b[m].key===c)return m;return-1},raft:function(c){function b(){m=0;c.apply(g,h)}if(!x.requestAnimationFrame)return c;var m,g,h;return function(){g=this;h=arguments;m||(m=x.requestAnimationFrame(b))}}};u.util=b})(domvm);(function(u){function x(a,d){return!1===d?null:null==d&&null!=a?a:k.isVal(d)||k.isObj(d)||k.isArr(d)||k.isFunc(d)?d:null}function r(a,d,q,y,e,f){function C(a,d,e){if(e)a[d]=a[d]||[],a[d].push(e);else for(var q in d)a[q]=a[q]||[],a[q].push(d[q])}function l(a,d,q){e=a;f=d;n.update(q,!1);return A(0,!1)}function A(a,y){if(a){for(var l=n;a--&&l.parent;)l=l.parent;l.redraw(0,!0);return l.vm}(l=n.node)&&n.hooks&&k.execAll(n.hooks.willRedraw,[n]);n.refs={};var b=n.render.call(n.api,n,d,q),b=m(b,e,f,n);b.vm=
n;n.node=b;var C=k.isVal(q)&&"^"===q[0]?q.substr(1):k.isVal(b.ref)&&"^"===b.ref[0]?b.ref.substr(1):null;b.key=null!=q?q:b.key;for(var A=e;A;)A.vm&&(n.parent||(n.parent=A.vm),null!==C&&(A.vm.refs[C]=b)),A=A.parent;if((C=l)&&(b.type!==l.type||b.tag!==l.tag))var C=null,w=!0;g(b,C);e&&(e.body[f]=b);!1!==y&&(l&&c(l),!l&&z||h(b,null,b.el),w&&(l.el.parentNode.replaceChild(b.el,l.el),l.el=null));l&&n.hooks&&Promise.resolve().then(function(){requestAnimationFrame(function(){k.execAll(n.hooks.didRedraw,[n])})});
return n}function p(a){n.hooks&&k.execAll(n.hooks.willUnmount);if(e)if(a){for(a=f+1;a<e.body.length;a++){var d=e.body[a];d.idx=a-1;d.vm&&d.vm.updIdx(d.idx)}e.body.splice(f,1)}else e.body[f]=null;c(n.node,!0);n.node.vm=null;n.hooks&&k.execAll(n.hooks.didUnmount)}var z=!e;k.isArr(a)&&(d=a[1],q=a[2],y=a[3],a=a[0]);q=x(d,q);var n={api:{},node:null,view:[a,q],model:d,opts:y||{},render:null,update:function(a,e){null==a||q===d&&!k.isVal(q)||(d=n.model=a);return!1!==e?A(0):n},on:function(a,d){C(n.events,
a,d)},hook:function(a,d){n.hooks=n.hooks||{};C(n.hooks,a,d)},events:{},hooks:null,redraw:I.useRaf?k.raft(A):A,patch:function(a,d){if(k.isObj(d)){var e={tag:a.tag,el:a.el,ns:a.ns,props:{"class":"class"in d?d["class"]:a.props["class"],style:"style"in d?d.style:a.props.style}};w(e,a)}else{var q=a.parent,e=g(m(d,q,a.idx,n),a);q.body[a.idx]=e}},emit:function(a){for(var d=Array.prototype.slice.call(arguments,1),e=n;e;){if(e.events[a]){k.execAll(e.events[a],d);break}e=e.parent}},refs:{},parent:null,mount:function(a,
d){var e=null;d&&(a.textContent="",e=a,a=null);h(n.node,e,null,a);return n},attach:function(a){b(n.node,a);return n},unmount:function(){D(n.hooks,"Unmount",p,[],[n])},moveTo:l,updIdx:function(a){f=a}};y&&y.hooks&&n.hook(y.hooks);k.execAll(G,[n]);n.render=a.call(n.api,n,d,q);return e?l(e,f):A(0)}function b(a,d){a.el=d;d._node=a;for(var q in a.props){var y=a.props[q],e=k.isEvProp(q)?q:"."===q[0]?q.substr(1):null;null!==e&&(d[e]=y)}if(k.isArr(a.body))for(q=0;q<a.body.length;q++)b(a.body[q],d.childNodes[q])}
function c(a,d){k.isArr(a.body)&&(a.body.forEach(function(a,d){a&&(a.vm&&!a.moved?a.vm.unmount():c(a,!0))}),a.body=null);a.vm=null;d&&a.el&&a.el.parentNode&&(a.removed=!0,a.hooks?D(a.hooks,"Remove",v,[a]):v(a))}function v(a){a.el.parentNode.removeChild(a.el);a.el=null}function m(a,d,q,y){var e=a;a={type:null,key:null,ref:null,idx:null,parent:null,moved:!1,removed:!1,hooks:null,tag:null,ns:null,guard:!1,raw:!1,props:null,el:null,hasKeys:!1,body:null};k.isFunc(e)&&(e=e());if(k.isArr(e)&&e.length){a.type=
k.TYPE_ELEM;if(1<e.length){var c=1;k.isObj(e[1])&&(a.props=e[1],c=2);a.body=e.length==c+1?k.isVal(e[c])?e[c]:k.isFunc(e[c])?e[c]():e.slice(c):e.slice(c)}e=e[0];if(/[.#]/.test(e)){if(e=B(e),a.tag=e.tag,c=null!=e["class"],null!=e.id||c){var b=a.props||{};null==b.id&&(b.id=e.id);c&&(b["class"]=e["class"]+(null!=b["class"]?" "+b["class"]:""));a.props=b}}else a.tag=e;if(a.props){var e=a.props,l;for(l in e)k.isEvProp(l)?e[l]=z(e[l],y.opts.evctx||y.model||null,a,y):k.isFunc(e[l])&&("href"==l?(e.onclick=
e[l],e.href=e[l].href):e[l]=e[l]()),k.isDynProp(a.tag,l)&&(e["."+l]=e[l]);if(k.isObj(e.style))for(var g in e.style)l=e.style[g],k.isFunc(l)&&(e.style[g]=l());k.isObj(e._hooks)&&(a.hooks=e._hooks,e._hooks=null);a.key=k.isVal(e._key)?e._key:k.isVal(e._ref)?e._ref:k.isVal(e.id)?e.id:k.isVal(e.name)?e.name:null;e._ref&&(a.ref=e._ref);e._raw&&(a.raw=!0);e._data&&(a.data=e._data);e._guard&&(a.guard=!0);e._ref=e._key=e._raw=e._data=e._guard=null}}else k.isVal(e)&&(a.type=k.TYPE_TEXT,a.body=e);null!==a.ref&&
(y.refs[a.ref]=a);a.parent=d;a.idx=q;a.ns=d&&d.ns?d.ns:"svg"===a.tag||"math"===a.tag?a.tag:null;if(k.isArr(a.body))for(d=0,q=a.body.length;d<q;d++){g=a.body[d];e=l=null;b=c=!1;k.isFunc(g)&&(g=g());if(null==g)c=!0;else{var f=k.isArr(g),h=f?!1:k.isObj(g);if(f)g.length?k.isArr(g[0])?b=!0:k.isFunc(g[0])?l=x(g[1],g[2]):(e=m(g,a,d,y),l=e.key):c=!0;else if(h)if(k.isFunc(g.redraw))g.moveTo(a,d),e=g.node,l=g.view[1];else{a.body[d--]=""+g;continue}else""===g?c=!0:0<d&&a.body[d-1].type===k.TYPE_TEXT?(a.body[d-
1].body+=""+g,c=!0):e=m(""+g,a,d,y)}c||b?(b?k.insertArr(a.body,g,d,1):a.body.splice(d,1),q=a.body.length,d--):(null!==l&&(a.hasKeys=!0),a.body[d]=e||g)}return a}function g(a,d){d&&(a.hooks?D(a.hooks,"Recycle",t,[d,a]):t(d,a));if(k.isArr(a.body)){var c=0;a.body.forEach(function(b,e){var f=k.isArr(b);if(d){var h=p(b,a,d,c);if(null!==h){var l=h[0],h=h[1];l===c&&c++;l=d.body[l];l.vm?f?2===h?l.vm.moveTo(a,e,b[1]):1===h&&r(b[0],b[1],b[2],b[3],a,e):b.vm&&2===h&&b.vm===l.vm&&l.vm.moveTo(a,e):a.body[e]=g(b,
l);return}}f?r(b[0],b[1],b[2],b[3],a,e):a.body[e]=g(b)})}return a}function h(a,d,c,b){for(var e=!a.el;c&&c._node.removed;)c=c.nextSibling;e&&a.vm&&a.vm.hooks&&k.execAll(a.vm.hooks.willMount,[a.vm]);if(a.type==k.TYPE_ELEM)if(e&&(a.el=d||(a.ns?J.createElementNS(E[a.ns],a.tag):J.createElement(a.tag)),a.props&&w(a)),k.isArr(a.body)){d=0;for(var g=a.el.firstChild;d<a.body.length;d++)g=h(a.body[d],null,g)}else k.isVal(a.body)&&(a.raw?a.el.innerHTML=a.body:e&&(a.el.textContent=a.body));else a.type==k.TYPE_TEXT&&
e&&(a.el=J.createTextNode(a.body));a.el._node=a;d=a.parent;c!==a.el&&(b||d&&d.el)&&(a.hooks?D(a.hooks,e?"Insert":"Reinsert",f,[a,c,b]):f(a,c,b));e&&a.vm&&a.vm.hooks&&Promise.resolve().then(function(){k.execAll(a.vm.hooks.didMount,[a.vm])});return c!==a.el?c:c.nextSibling}function f(a,d,c){(c||a.parent.el).insertBefore(a.el,d)}function p(a,d,c,b,e){var g=k.isArr(a),f=g?x(a[1],a[2]):a.key,l=c.hasKeys,h=d.hasKeys;c=c.body;d=d.body;if(null!==f&&l)return a=k.indexOfKey(f,c),-1<a?[a,2]:null;b=b||0;if(b>
c.length-1)return null;e=0===e?0:e||c.length-1;for(f=null;b<=e;b++)if(l=c[b],null!==l&&l.el)if(g&&l.vm){if(l.vm.view[0]===a[0]){if(l.vm.view[1]===x(a[1],a[2]))return[b,2];var w=!1;if(I.viewScan)for(var p=0;p<d.length;p++){var n=d[p];if(!n.el&&n.vm&&n.vm.view[0]===l.vm.view[0]&&n.vm.view[1]===l.vm.view[1]){w=!0;break}}w||f||!h||-1!=k.indexOfKey(l.key,d)||(f=[b,1])}}else if(a.type===l.type&&(a.type===k.TYPE_TEXT||null!==a.tag&&a.tag===l.tag)&&(null===l.key||!h||-1==k.indexOfKey(l.key,d)))return[b,1];
return f}function t(a,d){d.el=a.el;a.el=null;if(d.type===k.TYPE_TEXT&&d.body!==a.body)d.el.nodeValue=d.body;else{w(d,a);var c=!k.isArr(d.body),b=!k.isArr(a.body);c&&d.body!==a.body?b&&d.el.firstChild?d.el.firstChild.nodeValue=d.body:d.raw?d.el.innerHTML=d.body:d.el.textContent=d.body:b&&!c&&(d.el.textContent="");a.moved=!0}}function D(a,d,c,b,e,g){if(a){var f=a["will"+d];k.isArr(f)&&(f=f[0]);var l=a["did"+d];k.isArr(l)&&(l=l[0]);a=function(){c.apply(null,b);l&&l.apply(null,g||e||b)};f?(f=f.apply(null,
e||b),k.isProm(f)?f.then(a):a()):a()}else c.apply(null,b)}function B(a){if(a in K)return K[a];var d={tag:null,id:null,"class":null};d.tag=a.replace(/^([\w\-]+)?(?:#([\w\-]+))?((?:\.[\w\-]+)+)?$/,function(a,c,e,b){e&&(d.id=e);b&&(d["class"]=b.replace(/\./g," ").trim());return c||"div"});return K[a]=d}function z(a,d,c,b){return function(e){var c,g=e.target._node,f=null;if(k.isFunc(a))c=a.call(d,e,g,b);else if(k.isArr(a))f=a.slice(1),c=a[0].apply(d,f.concat(e,g,b));else if(k.isObj(a))for(var h in a){var q=
a[h];e.target.matches(h)&&(k.isArr(q)?(f=q.slice(1),c=q[0].apply(d,f.concat(e,g,b))):k.isFunc(q)&&(c=q.call(d,e,g,b)))}!1===c&&(e.preventDefault(),e.stopPropagation());b.opts.hasOwnProperty("watch")&&b.opts.watch.fire({type:"event",vm:b,node:g,event:e,data:f})}}function w(a,d){var c=!d;d=d||{};if(d.props||a.props){var b=d.props||{},e=a.props||{},g=b.style,f=e.style;if(k.isObj(g)||k.isObj(f))F(a.el,a.tag,g||{},f||{},M,N,a.ns,c),b.style=e.style=null;F(a.el,a.tag,b,e,L,H,a.ns,c);f&&(e.style=f)}}function F(a,
d,c,b,e,g,f,k){for(var h in b)null!==b[h]&&("."===h[0]?a[h.substr(1)]!==b[h]:b[h]!==c[h])&&e(a,h,b[h],f,k);for(h in c)null!==c[h]&&null==b[h]&&g(a,h,f,k)}function M(a,d,b){a.style[d]=k.autoPx(d,b)}function N(a,d){a.style[d]=""}function L(a,d,b,c,e){"."===d[0]?(d=d.substr(1),"svg"===c?a[d].baseVal=b:a[d]=b):"class"===d?a.className=b:"id"===d||k.isEvProp(d)?a[d]=b:!1===b?H(a,d,c,e):a.setAttribute(d,!0===b?"":b)}function H(a,d,b,c){c||("."===d[0]?(d=d.substr(1),"svg"===b?a[d].baseVal=null:a[d]=null):
"class"===d?a.className="":"id"===d||k.isEvProp(d)?a[d]=null:a.removeAttribute(d))}var E={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},K={},J="undefined"==typeof document?{}:document,I={useRaf:!0,viewScan:!1,useDOM:!1};u.view=r;u.view.config=function(a){I=a};var G=null;u.view.extend=function(a,d){G=!G||d?[]:G;G.push(a)};var k=u.util;return u})(domvm);(function(u){var x=/^(?:img|br|input|col|link|meta|area|base|command|embed|hr|keygen|param|source|track|wbr)$/,r=u.util;u.html=function(b){var c="";switch(b.type){case r.TYPE_ELEM:c+="<"+b.tag;if(b.props){var v=r.isVal(b.props.style)?b.props.style:"",m=r.isObj(b.props.style)?b.props.style:null;if(m)for(var g in m)null!==m[g]&&(v+=r.camelDash(g)+": "+r.autoPx(g,m[g])+"; ");for(g in b.props)r.isEvProp(g)||"."===g[0]||(m=b.props[g],r.isFunc(m)&&(m=m()),r.isObj(m)||(!0===m?c+=" "+g:!1!==m&&null!==m&&
"."!==g[0]&&(c+=" "+g+'="'+m+'"')));v.length&&(c+=' style="'+v.trim()+'"')}if(b.ns&&"svg"!==b.tag&&"math"!==b.tag&&!b.body)return c+"/>";c+=">";break;case r.TYPE_TEXT:return b.body}x.test(b.tag)||(r.isArr(b.body)?b.body.forEach(function(b){c+=u.html(b)}):c+=b.body||"",c+="</"+b.tag+">");return c}})(domvm);(function(u){var x=u.util;u.watch=function(r){function b(){}function c(c,h,f,p,t){t=t||{};t.method=c.toUpperCase();null!==f&&(x.isArr(f)||x.isObj(f)?(t.headers=t.headers||new Headers,t.headers.set("Content-Type","application/json"),t.body=JSON.stringify(f)):t.body=""+f);var D=p,B=b;p instanceof Array&&(D=p[0],p[1]&&(B=p[1]));var z={type:"fetch",fetch:{method:c,url:h,body:f}};p=fetch(h,t).then(function(b){if(200<=b.status&&300>b.status)return b;var c=Error(b.status+": "+b.statusText);c.data=b;return Promise.reject(c)}).then(function(b){switch(b.headers.get("Content-Type").split("; ")[0]){case "application/json":return b.json();
case "text/plain":return b.text();default:return b}}).then(D,B).then(function(b){!1!==b&&m.fire(z);return b},function(b){z.error=b;m.fire(z);return b});p._fetchArgs=[c,h,f,[D,B],t];return p}var v=[];x.isFunc(r)&&v.push(r);var m={on:function(b){v.push(b);return m},off:function(b){v.splice(v.indexOf(b),1);return m},fire:x.raft(function(){x.execAll(v,arguments);return m}),prop:function(g,h){var f=g,p=function(b,c){if(arguments.length&&b!==f){var g=f;f=b;!1!==c&&m.fire({type:"prop",prop:p,data:{old:g,
"new":b}})}return f};if(h&&h.then){p.update=b;if(h._fetchArgs){var t=h._fetchArgs[3];h._fetchArgs[3]=[function(b){return p(t[0]?t[0](b):b)},t[1]];p.update=function(){c.apply(null,h._fetchArgs)}}h.then(p)}return p.toString=p},sync:function(b,c,f){var p=b,m=c;"string"==typeof b&&(p=function(c){return"e."===b.substr(0,2)?c[b.substr(2)]:c.target[b]});return function(b,g,z){var w=this!==window?this:null;w&&"string"==typeof c&&(m=function(b,g){var f=w[c];w[c]=b;r&&b!==f&&!1!==g&&r()});m(p(b),f)}},fetch:function(b,
h,f,p,m){"put"!=b&&"post"!=b&&"patch"!=b&&(m=p,p=f,f=null);return c(b,h,f,p,m)},get:function(b,h,f){f?b+=m.query(h):f=h;return c("get",b,null,f)},"delete":function(b,h,f){f?b+=m.query(h):f=h;return c("delete",b,null,f)},post:function(b,h,f){return c("post",b,h,f)},put:function(b,h,f){return c("put",b,h,f)},patch:function(b,h,f){return c("patch",b,h,f)},query:function(b){if(!x.isObj(b))return"";var c=[],f=encodeURIComponent,m;for(m in b)c.push(f(m)+"="+f(b[m]));return c.length?"?"+c.join("&"):""}};
return m}})(domvm);(function(u){function x(b,c,f,m,t,r){var v=null,z=null,w=null;if("/"==f[0]){w=f;z=!1;m={};r=w.split("#");c=r[0].split("?");v=c[0];r=r[1];c[1]&&(t={},c[1].split("&").map(function(b){b=b.split("=");t[b[0]]=null==b[1]?!0:b[1]}));var F,x;for(x in b){f=b[x];var u=f.path;if(F=v.match(f.regexPath)){z=x;-1!==u.indexOf(":")&&(m={},F.shift(),u.replace(/:([^\/]+)/g,function(b,c){m[c]=F.shift()}));break}}}else{z=f;f=b[z];var u=c+f.path,L=f.vars||{},H=/^[^\/]+$/,w=-1!==u.indexOf(":")?v=u.replace(/:([^\/]+)/g,
function(b,c){if((L[c]||H).test(m[c]))return m[c]+="";throw Error("Invalid value for route '"+u+"' segment '"+c+"': '"+m[c]+"'");}):v=u;if(t){var w=w+"?",E;for(E in t)w+=E+(!0!==t[E]?"="+t[E]:"")+"&";w=w.slice(0,-1)}w+=r?"#"+r:""}return{href:w,name:z,path:v,segs:m,hash:r,query:t}}function r(b,c){for(var f in b){var m=b[f];m.regexPath=new RegExp("^"+c+m.path.replace(/:([^\/]+)/g,function(b,c){var f=""+m.vars[c];return"("+f.substring(1,f.lastIndexOf("/"))+")"})+"$")}}var b=[],c=null,v=!1,m="";u.route=
function(g,h){function f(){var b=location,b=v?b.href.substr(b.origin.length):b.hash.substr(1)||"/";return x(B,m,b)}var p=null,t={href:function(b,c,f,g,h){var p=x(B,m,b,c,f,g);return v?(b=function(b){t["goto"](p,null,null,null,h);b.preventDefault()},b.href=p.href,b):"#"+p.href},config:function(b){(v=b.useHist)&&(m=b.root||"");p=b.init||null},refresh:function(){t["goto"](f(),null,null,null,!0)},"goto":function(f,g,h,p,r){r=r||u;f.href||(f=x(B,m,f,g,h,p));if(!1===f.name)console.log("Could not find route");
else{g=null;for(h=0;h<b.length;h++)if(b[h].href===f.href){g=h;break}null===g&&(b.splice(c+1,1E4),b.push(f),g=b.length-1);f=b[c];h=b[g];p=!0;null!==c&&(p=(p=B[f.name].onexit)?p.apply(null,(f?[f.segs,f.query,f.hash]:[]).concat(h)):!0);if(!1!==p&&!1!==B[h.name].onenter.apply(null,(h?[h.segs,h.query,h.hash]:[]).concat(f))){if(v)history[r?"replaceState":"pushState"](null,"title",h.href);c=g}u=!1}},location:function(){return u?f():b[c]}},u=!0,B=g(t,h);r(B,m);window.onhashchange=window.onpopstate=function(b){(v||
"popstate"!=b.type)&&t["goto"](f(),null,null,null,!0)};p&&p();return t}})(domvm);
