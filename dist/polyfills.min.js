/*
 Contains the following:
 https://gist.github.com/elijahmanor/6452535
 https://github.com/julienetie/request-frame
 https://github.com/taylorhakes/promise-polyfill
 https://github.com/github/fetch
*/
if(Element&&!Element.prototype.matches){var proto=Element.prototype;proto.matches=proto.matchesSelector||proto.mozMatchesSelector||proto.msMatchesSelector||proto.oMatchesSelector||proto.webkitMatchesSelector};function requestFrame(f){function m(){var a=window.webkitRequestAnimationFrame,b=window.requestAnimationFrame,e=768>=screen.width?!0:!1,d=window.performance?!1:!0;a&&b||!e||!d?a=!1:a||b?(console.warn("setTimeout is being used as a substitiue forrequestAnimationFrame due to a bug within iOS 6 builds"),a=!0):a=!1;return a}function p(a){clearTimeout(a)}function a(a){var b=Date.now(),e=Math.max(v+16,b);return setTimeout(function(){a(v=e)},e-b)}function q(){if(Array.prototype.filter)r=window.requestAnimationFrame||
window[n.filter(function(a){if(void 0!==window[a+"RequestAnimationFrame"])return a})+"RequestAnimationFrame"]||a;else return a;return m()?a:r}function t(){function a(b,d){for(var g;d<b.length;d++)if(window[b[d]]){g=window[b[d]];break}return g}var b=[];if(Array.prototype.map)n.map(function(a){return["Cancel","CancelRequest"].map(function(d){b.push(a+d+"AnimationFrame")})});else return p;l=window.cancelAnimationFrame||a(b,0)||p;return m()?p:l}var n=["moz","webkit"],r,l,v=0,u=window.mozCancelAnimationFrame,
u=window.mozRequestAnimationFrame&&!u,k;Date.now||(Date.now=function(){return(new Date).getTime()});switch(f){case "request":case "":k=u?a:q();break;case "cancel":k=t();break;case "native":u?(window.requestAnimationFrame=a,window.cancelAnimationFrame=p):(window.requestAnimationFrame=q(),window.cancelAnimationFrame=t());break;default:throw Error("RequestFrame parameter is not a type.");}return k};(function(f){function m(){}function p(b,a){return function(){b.apply(a,arguments)}}function a(b){if("object"!==typeof this)throw new TypeError("Promises must be constructed via new");if("function"!==typeof b)throw new TypeError("not a function");this._state=0;this._value=void 0;this._deferreds=[];v(b,this)}function q(b,a){for(;3===b._state;)b=b._value;0===b._state?b._deferreds.push(a):k(function(){var d=1===b._state?a.onFulfilled:a.onRejected;if(null===d)(1===b._state?t:n)(a.promise,b._value);else{var g;
try{g=d(b._value)}catch(c){n(a.promise,c);return}t(a.promise,g)}})}function t(b,e){try{if(e===b)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===typeof e||"function"===typeof e)){var d=e.then;if(e instanceof a){b._state=3;b._value=e;r(b);return}if("function"===typeof d){v(p(d,e),b);return}}b._state=1;b._value=e;r(b)}catch(g){n(b,g)}}function n(b,a){b._state=2;b._value=a;r(b)}function r(b){for(var a=0,d=b._deferreds.length;a<d;a++)q(b,b._deferreds[a]);b._deferreds=
null}function l(b,a,d){this.onFulfilled="function"===typeof b?b:null;this.onRejected="function"===typeof a?a:null;this.promise=d}function v(b,a){var d=!1;try{b(function(b){d||(d=!0,t(a,b))},function(b){d||(d=!0,n(a,b))})}catch(g){d||(d=!0,n(a,g))}}var u=setTimeout,k="function"===typeof setImmediate&&setImmediate||function(b){u(b,1)},z=Array.isArray||function(b){return"[object Array]"===Object.prototype.toString.call(b)};a.prototype["catch"]=function(b){return this.then(null,b)};a.prototype.then=function(b,
e){var d=new a(m);q(this,new l(b,e,d));return d};a.all=function(){var b=Array.prototype.slice.call(1===arguments.length&&z(arguments[0])?arguments[0]:arguments);return new a(function(a,d){function g(w,x){try{if(x&&("object"===typeof x||"function"===typeof x)){var f=x.then;if("function"===typeof f){f.call(x,function(c){g(w,c)},d);return}}b[w]=x;0===--c&&a(b)}catch(h){d(h)}}if(0===b.length)return a([]);for(var c=b.length,w=0;w<b.length;w++)g(w,b[w])})};a.resolve=function(b){return b&&"object"===typeof b&&
b.constructor===a?b:new a(function(a){a(b)})};a.reject=function(b){return new a(function(a,d){d(b)})};a.race=function(b){return new a(function(a,d){for(var f=0,c=b.length;f<c;f++)b[f].then(a,d)})};a._setImmediateFn=function(a){k=a};"undefined"!==typeof module&&module.exports?module.exports=a:f.Promise||(f.Promise=a)})(this);(function(f){function m(c){"string"!==typeof c&&(c=String(c));if(/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(c))throw new TypeError("Invalid character in header field name");return c.toLowerCase()}function p(c){"string"!==typeof c&&(c=String(c));return c}function a(c){this.map={};c instanceof a?c.forEach(function(c,a){this.append(a,c)},this):c&&Object.getOwnPropertyNames(c).forEach(function(a){this.append(a,c[a])},this)}function q(c){if(c.bodyUsed)return Promise.reject(new TypeError("Already read"));c.bodyUsed=
!0}function t(c){return new Promise(function(a,b){c.onload=function(){a(c.result)};c.onerror=function(){b(c.error)}})}function n(c){var a=new FileReader;a.readAsArrayBuffer(c);return t(a)}function r(){this.bodyUsed=!1;this._initBody=function(c){this._bodyInit=c;if("string"===typeof c)this._bodyText=c;else if(e.blob&&Blob.prototype.isPrototypeOf(c))this._bodyBlob=c;else if(e.formData&&FormData.prototype.isPrototypeOf(c))this._bodyFormData=c;else if(!c)this._bodyText="";else if(!e.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(c))throw Error("unsupported BodyInit type");
this.headers.get("content-type")||("string"===typeof c?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type&&this.headers.set("content-type",this._bodyBlob.type))};e.blob?(this.blob=function(){var c=q(this);if(c)return c;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(n)},
this.text=function(){var c=q(this);if(c)return c;if(this._bodyBlob){var c=this._bodyBlob,a=new FileReader;a.readAsText(c);return t(a)}if(this._bodyFormData)throw Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var c=q(this);return c?c:Promise.resolve(this._bodyText)};e.formData&&(this.formData=function(){return this.text().then(v)});this.json=function(){return this.text().then(JSON.parse)};return this}function l(c,b){b=b||{};var y=b.body;
if(l.prototype.isPrototypeOf(c)){if(c.bodyUsed)throw new TypeError("Already read");this.url=c.url;this.credentials=c.credentials;b.headers||(this.headers=new a(c.headers));this.method=c.method;this.mode=c.mode;y||(y=c._bodyInit,c.bodyUsed=!0)}else this.url=c;this.credentials=b.credentials||this.credentials||"omit";if(b.headers||!this.headers)this.headers=new a(b.headers);var e=b.method||this.method||"GET",f=e.toUpperCase();this.method=-1<d.indexOf(f)?f:e;this.mode=b.mode||this.mode||null;this.referrer=
null;if(("GET"===this.method||"HEAD"===this.method)&&y)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(y)}function v(c){var a=new FormData;c.trim().split("&").forEach(function(c){if(c){var b=c.split("=");c=b.shift().replace(/\+/g," ");b=b.join("=").replace(/\+/g," ");a.append(decodeURIComponent(c),decodeURIComponent(b))}});return a}function u(c){var b=new a;c.getAllResponseHeaders().trim().split("\n").forEach(function(c){var a=c.trim().split(":");c=a.shift().trim();
a=a.join(":").trim();b.append(c,a)});return b}function k(c,b){b||(b={});this.type="default";this.status=b.status;this.ok=200<=this.status&&300>this.status;this.statusText=b.statusText;this.headers=b.headers instanceof a?b.headers:new a(b.headers);this.url=b.url||"";this._initBody(c)}if(!f.fetch){var z="Symbol"in f&&"iterator"in Symbol,b;if(b="FileReader"in f&&"Blob"in f)try{new Blob,b=!0}catch(c){b=!1}var e={iterable:z,blob:b,formData:"FormData"in f,arrayBuffer:"ArrayBuffer"in f};a.prototype.append=
function(c,b){c=m(c);b=p(b);var a=this.map[c];a||(a=[],this.map[c]=a);a.push(b)};a.prototype["delete"]=function(c){delete this.map[m(c)]};a.prototype.get=function(c){return(c=this.map[m(c)])?c[0]:null};a.prototype.getAll=function(c){return this.map[m(c)]||[]};a.prototype.has=function(c){return this.map.hasOwnProperty(m(c))};a.prototype.set=function(c,b){this.map[m(c)]=[p(b)]};a.prototype.forEach=function(c,b){Object.getOwnPropertyNames(this.map).forEach(function(a){this.map[a].forEach(function(d){c.call(b,
d,a,this)},this)},this)};a.prototype.keys=function(){var b=[];this.forEach(function(a,d){b.push(d)});var a={next:function(){var a=b.shift();return{done:void 0===a,value:a}}};e.iterable&&(a[Symbol.iterator]=function(){return a});return a};a.prototype.values=function(){var a=[];this.forEach(function(b){a.push(b)});var b={next:function(){var b=a.shift();return{done:void 0===b,value:b}}};e.iterable&&(b[Symbol.iterator]=function(){return b});return b};a.prototype.entries=function(){var b=[];this.forEach(function(a,
d){b.push([d,a])});var a={next:function(){var a=b.shift();return{done:void 0===a,value:a}}};e.iterable&&(a[Symbol.iterator]=function(){return a});return a};e.iterable&&(a.prototype[Symbol.iterator]=a.prototype.entries);var d="DELETE GET HEAD OPTIONS POST PUT".split(" ");l.prototype.clone=function(){return new l(this)};r.call(l.prototype);r.call(k.prototype);k.prototype.clone=function(){return new k(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new a(this.headers),url:this.url})};
k.error=function(){var a=new k(null,{status:0,statusText:""});a.type="error";return a};var g=[301,302,303,307,308];k.redirect=function(a,b){if(-1===g.indexOf(b))throw new RangeError("Invalid status code");return new k(null,{status:b,headers:{location:a}})};f.Headers=a;f.Request=l;f.Response=k;f.fetch=function(a,b){return new Promise(function(d,f){var g;g=l.prototype.isPrototypeOf(a)&&!b?a:new l(a,b);var h=new XMLHttpRequest;h.onload=function(){var a=h.status,b=h.statusText,c=u(h),e;e="responseURL"in
h?h.responseURL:/^X-Request-URL:/m.test(h.getAllResponseHeaders())?h.getResponseHeader("X-Request-URL"):void 0;d(new k("response"in h?h.response:h.responseText,{status:a,statusText:b,headers:c,url:e}))};h.onerror=function(){f(new TypeError("Network request failed"))};h.open(g.method,g.url,!0);"include"===g.credentials&&(h.withCredentials=!0);"responseType"in h&&e.blob&&(h.responseType="blob");g.headers.forEach(function(a,b){h.setRequestHeader(b,a)});h.send("undefined"===typeof g._bodyInit?null:g._bodyInit)})};
f.fetch.polyfill=!0}})("undefined"!==typeof self?self:this);
